(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function y(){}function ke(e,t){for(const n in t)e[n]=t[n];return e}function ot(e){return e()}function Ke(){return Object.create(null)}function H(e){e.forEach(ot)}function ut(e){return typeof e=="function"}function J(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let me;function Ae(e,t){return me||(me=document.createElement("a")),me.href=t,e===me.href}function bt(e){return Object.keys(e).length===0}function ct(e,...t){if(e==null)return y;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function $e(e){let t;return ct(e,n=>t=n)(),t}function O(e,t,n){e.$$.on_destroy.push(ct(t,n))}function yt(e,t,n,l){if(e){const r=at(e,t,n,l);return e[0](r)}}function at(e,t,n,l){return e[1]&&l?ke(n.ctx.slice(),e[1](l(t))):n.ctx}function wt(e,t,n,l){if(e[2]&&l){const r=e[2](l(n));if(t.dirty===void 0)return r;if(typeof r=="object"){const s=[],i=Math.max(t.dirty.length,r.length);for(let o=0;o<i;o+=1)s[o]=t.dirty[o]|r[o];return s}return t.dirty|r}return t.dirty}function kt(e,t,n,l,r,s){if(r){const i=at(t,n,l,s);e.p(i,r)}}function $t(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let l=0;l<n;l++)t[l]=-1;return t}return-1}function Ue(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function Ve(e){return e==null?"":e}function g(e,t){e.appendChild(t)}function $(e,t,n){e.insertBefore(t,n||null)}function k(e){e.parentNode.removeChild(e)}function ft(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function m(e){return document.createElement(e)}function ae(e){return document.createTextNode(e)}function v(){return ae(" ")}function E(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function ve(e){return function(t){return t.preventDefault(),e.call(this,t)}}function d(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Qe(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const l in t)t[l]==null?e.removeAttribute(l):l==="style"?e.style.cssText=t[l]:l==="__value"?e.value=e[l]=t[l]:n[l]&&n[l].set?e[l]=t[l]:d(e,l,t[l])}function St(e){return Array.from(e.childNodes)}function Oe(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function G(e,t,n){e.classList[n?"add":"remove"](t)}function zt(e,t,{bubbles:n=!1,cancelable:l=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,l,t),r}let fe;function ce(e){fe=e}function Ne(){if(!fe)throw new Error("Function called outside component initialization");return fe}function Lt(e){Ne().$$.on_mount.push(e)}function Et(e){Ne().$$.after_update.push(e)}function dt(){const e=Ne();return(t,n,{cancelable:l=!1}={})=>{const r=e.$$.callbacks[t];if(r){const s=zt(t,n,{cancelable:l});return r.slice().forEach(i=>{i.call(e,s)}),!s.defaultPrevented}return!0}}function Ct(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(l=>l.call(this,t))}const ue=[],de=[],be=[],Te=[],At=Promise.resolve();let Ie=!1;function Tt(){Ie||(Ie=!0,At.then(_t))}function je(e){be.push(e)}function Ze(e){Te.push(e)}const Ce=new Set;let pe=0;function _t(){const e=fe;do{for(;pe<ue.length;){const t=ue[pe];pe++,ce(t),It(t.$$)}for(ce(null),ue.length=0,pe=0;de.length;)de.pop()();for(let t=0;t<be.length;t+=1){const n=be[t];Ce.has(n)||(Ce.add(n),n())}be.length=0}while(ue.length);for(;Te.length;)Te.pop()();Ie=!1,Ce.clear(),ce(e)}function It(e){if(e.fragment!==null){e.update(),H(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(je)}}const ye=new Set;let K;function Pe(){K={r:0,c:[],p:K}}function qe(){K.r||H(K.c),K=K.p}function S(e,t){e&&e.i&&(ye.delete(e),e.i(t))}function L(e,t,n,l){if(e&&e.o){if(ye.has(e))return;ye.add(e),K.c.push(()=>{ye.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}function jt(e,t){const n={},l={},r={$$scope:1};let s=e.length;for(;s--;){const i=e[s],o=t[s];if(o){for(const u in i)u in o||(l[u]=1);for(const u in o)r[u]||(n[u]=o[u],r[u]=1);e[s]=o}else for(const u in i)r[u]=1}for(const i in l)i in n||(n[i]=void 0);return n}function xe(e,t,n){const l=e.$$.props[t];l!==void 0&&(e.$$.bound[l]=n,n(e.$$.ctx[l]))}function B(e){e&&e.c()}function N(e,t,n,l){const{fragment:r,after_update:s}=e.$$;r&&r.m(t,n),l||je(()=>{const i=e.$$.on_mount.map(ot).filter(ut);e.$$.on_destroy?e.$$.on_destroy.push(...i):H(i),e.$$.on_mount=[]}),s.forEach(je)}function P(e,t){const n=e.$$;n.fragment!==null&&(H(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ot(e,t){e.$$.dirty[0]===-1&&(ue.push(e),Tt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function U(e,t,n,l,r,s,i,o=[-1]){const u=fe;ce(e);const c=e.$$={fragment:null,ctx:[],props:s,update:y,not_equal:r,bound:Ke(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:Ke(),dirty:o,skip_bound:!1,root:t.target||u.$$.root};i&&i(c.root);let f=!1;if(c.ctx=n?n(e,t.props||{},(a,h,...w)=>{const b=w.length?w[0]:h;return c.ctx&&r(c.ctx[a],c.ctx[a]=b)&&(!c.skip_bound&&c.bound[a]&&c.bound[a](b),f&&Ot(e,a)),h}):[],c.update(),f=!0,H(c.before_update),c.fragment=l?l(c.ctx):!1,t.target){if(t.hydrate){const a=St(t.target);c.fragment&&c.fragment.l(a),a.forEach(k)}else c.fragment&&c.fragment.c();t.intro&&S(e.$$.fragment),N(e,t.target,t.anchor,t.customElement),_t()}ce(u)}class V{$destroy(){P(this,1),this.$destroy=y}$on(t,n){if(!ut(n))return y;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(t){this.$$set&&!bt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Nt(e){let t,n,l,r,s,i,o,u=[{type:e[3]},{name:e[2]},{id:e[2]},e[4],{value:e[0]}],c={};for(let f=0;f<u.length;f+=1)c=ke(c,u[f]);return{c(){t=m("div"),n=m("label"),l=ae(e[1]),r=v(),s=m("input"),d(n,"for",e[2]),Qe(s,c)},m(f,a){$(f,t,a),g(t,n),g(n,l),g(t,r),g(t,s),s.value=c.value,s.autofocus&&s.focus(),i||(o=[E(s,"input",e[5]),E(s,"keypress",e[6])],i=!0)},p(f,[a]){a&2&&Oe(l,f[1]),a&4&&d(n,"for",f[2]),Qe(s,c=jt(u,[a&8&&{type:f[3]},a&4&&{name:f[2]},a&4&&{id:f[2]},a&16&&f[4],a&1&&s.value!==f[0]&&{value:f[0]}])),"value"in c&&(s.value=c.value)},i:y,o:y,d(f){f&&k(t),i=!1,H(o)}}}function Pt(e,t,n){let{value:l=""}=t,{label:r="Input"}=t,{name:s="input"}=t,{type:i="text"}=t,{inputParams:o={}}=t;const u=dt(),c=a=>{n(0,l=a.target.value),(i==="number"||i==="range")&&n(0,l=Number(l)),u("input",l)};function f(a){Ct.call(this,e,a)}return e.$$set=a=>{"value"in a&&n(0,l=a.value),"label"in a&&n(1,r=a.label),"name"in a&&n(2,s=a.name),"type"in a&&n(3,i=a.type),"inputParams"in a&&n(4,o=a.inputParams)},[l,r,s,i,o,c,f]}class et extends V{constructor(t){super(),U(this,t,Pt,Nt,J,{value:0,label:1,name:2,type:3,inputParams:4})}}function qt(e){let t,n,l,r,s,i,o,u;const c=e[4].default,f=yt(c,e,e[3],null);return{c(){t=m("nav"),n=m("h2"),l=ae(e[0]),r=v(),s=m("hr"),i=v(),f&&f.c(),d(n,"class","svelte-15oiif1"),d(s,"class","svelte-15oiif1"),d(t,"class",o=Ve(e[2].class)+" svelte-15oiif1"),G(t,"leftShadow",e[1]=="left"),G(t,"rightShadow",e[1]=="right")},m(a,h){$(a,t,h),g(t,n),g(n,l),g(t,r),g(t,s),g(t,i),f&&f.m(t,null),u=!0},p(a,[h]){(!u||h&1)&&Oe(l,a[0]),f&&f.p&&(!u||h&8)&&kt(f,c,a,a[3],u?wt(c,a[3],h,null):$t(a[3]),null),(!u||h&4&&o!==(o=Ve(a[2].class)+" svelte-15oiif1"))&&d(t,"class",o),(!u||h&6)&&G(t,"leftShadow",a[1]=="left"),(!u||h&6)&&G(t,"rightShadow",a[1]=="right")},i(a){u||(S(f,a),u=!0)},o(a){L(f,a),u=!1},d(a){a&&k(t),f&&f.d(a)}}}function Mt(e,t,n){let{$$slots:l={},$$scope:r}=t,{title:s="Undefined"}=t,{shadow:i="left"}=t;return e.$$set=o=>{n(2,t=ke(ke({},t),Ue(o))),"title"in o&&n(0,s=o.title),"shadow"in o&&n(1,i=o.shadow),"$$scope"in o&&n(3,r=o.$$scope)},t=Ue(t),[s,i,t,r,l]}class gt extends V{constructor(t){super(),U(this,t,Mt,qt,J,{title:0,shadow:1})}}const re=[];function he(e,t=y){let n;const l=new Set;function r(o){if(J(e,o)&&(e=o,n)){const u=!re.length;for(const c of l)c[1](),re.push(c,e);if(u){for(let c=0;c<re.length;c+=2)re[c][0](re[c+1]);re.length=0}}}function s(o){r(o(e))}function i(o,u=y){const c=[o,u];return l.add(c),l.size===1&&(n=t(r)||y),o(e),()=>{l.delete(c),l.size===0&&(n(),n=null)}}return{set:r,update:s,subscribe:i}}const Se=he(-1);function ht(e,t,n){const{subscribe:l,set:r,update:s}=he(e);return{subscribe:l,set(i){i<t?i=t:i>n&&(i=n),r(i)},update(i){s(o=>(o=i(o),o<t?o=t:o>n&&(o=n),o))}}}const _e=ht(10,1,50),ge=ht(10,1,50);function Dt(){const{subscribe:e,set:t,update:n}=he(new Array);return{subscribe:e,set:t,addLevel(){n(l=>[...l,Array.from({length:$e(ge)},r=>Array($e(_e)).fill(-1))])},pushLevel(l){n(r=>[...r,l])},removeLevel(l){n(r=>r.filter((s,i)=>i!==l))},setLevelCell(l,r,s,i){n(o=>(o[l][s][r]=i,o))},resize(l,r){n(s=>s.map(i=>{const o=i.map(u=>u.length>=l?u.slice(0,l):[...u,...Array(l-u.length).fill(-1)]);return o.length>=r?o.slice(0,r):[...o,...Array.from({length:r-o.length},u=>Array(l).fill(-1))]}))},reset(){n(l=>new Array)}}}const q=Dt(),tt=localStorage.getItem("levels");if(tt){const e=JSON.parse(tt);q.set(e.levels),_e.set(e.width),ge.set(e.height)}q.subscribe(e=>{localStorage.setItem("levels",JSON.stringify({width:$e(_e),height:$e(ge),levels:e}))});const se=he(Array()),nt=localStorage.getItem("images");if(nt){const e=JSON.parse(nt);se.update(t=>[...t,...e.map(n=>{const l=new Image;return l.src=n.data,{name:n.name,data:l}})])}se.subscribe(e=>{localStorage.setItem("images",JSON.stringify(e.map(t=>({name:t.name,data:t.data.src}))))});const we=he(0),Bt="/Vivian-level-editor/assets/trash.8b6cb216.svg";function lt(e,t,n){const l=e.slice();return l[15]=t[n],l[17]=n,l}function rt(e){let t,n,l,r,s,i,o,u,c,f;return{c(){t=m("li"),n=m("input"),l=v(),r=m("label"),s=m("img"),d(n,"type","radio"),d(n,"name","tile"+String(e[17])),d(n,"id","tile"+String(e[17])),n.__value=e[17],n.value=n.__value,d(n,"class","svelte-17mgxwz"),e[12][0].push(n),Ae(s.src,i=e[15].data.src)||d(s,"src",i),d(s,"alt",o=e[15].name),d(s,"title",u=e[15].name),d(s,"class","svelte-17mgxwz"),d(r,"for","tile"+String(e[17])),d(r,"class","svelte-17mgxwz"),G(r,"current",e[3]==e[17]),d(t,"class","tileSelector__itemList__tile svelte-17mgxwz")},m(a,h){$(a,t,h),g(t,n),n.checked=n.__value===e[3],g(t,l),g(t,r),g(r,s),c||(f=E(n,"change",e[13]),c=!0)},p(a,h){h&8&&(n.checked=n.__value===a[3]),h&16&&!Ae(s.src,i=a[15].data.src)&&d(s,"src",i),h&16&&o!==(o=a[15].name)&&d(s,"alt",o),h&16&&u!==(u=a[15].name)&&d(s,"title",u),h&8&&G(r,"current",a[3]==a[17])},d(a){a&&k(t),e[12][0].splice(e[12][0].indexOf(n),1),c=!1,f()}}}function Rt(e){let t,n,l,r,s,i,o,u,c,f,a,h,w,b,W,Q,A,_,j,T,X,Z,ie,Me,ze,De,M,x,z,Be,Y,F,Re,Ge,Le,ee,R,He,oe,te,Ee,Je;function pt(p){e[9](p)}let We={label:"Width:",name:"width",type:"number",inputParams:{min:0,max:100,step:1}};e[2]!==void 0&&(We.value=e[2]),b=new et({props:We}),de.push(()=>xe(b,"value",pt)),b.$on("keypress",e[6]);function vt(p){e[10](p)}let Xe={label:"Height:",name:"height",type:"number",inputParams:{min:0,max:100,step:1}};e[1]!==void 0&&(Xe.value=e[1]),A=new et({props:Xe}),de.push(()=>xe(A,"value",vt)),A.$on("keypress",e[6]);let ne=e[4],C=[];for(let p=0;p<ne.length;p+=1)C[p]=rt(lt(e,ne,p));return{c(){t=m("form"),n=m("div"),l=m("h3"),l.textContent="Project Manager",r=v(),s=m("button"),s.textContent="Import level set",i=v(),o=m("button"),o.textContent="Export level set",u=v(),c=m("button"),c.textContent="Delete current project",f=v(),a=m("div"),h=m("h3"),h.textContent="Grid Size",w=v(),B(b.$$.fragment),Q=v(),B(A.$$.fragment),j=v(),T=m("button"),T.textContent="Resize",X=v(),Z=m("div"),ie=m("h3"),Me=ae("Tile selector : "),ze=ae(e[3]),De=v(),M=m("ul"),x=m("li"),z=m("input"),Be=v(),Y=m("label"),F=m("img"),Ge=v();for(let p=0;p<C.length;p+=1)C[p].c();Le=v(),ee=m("li"),R=m("input"),He=v(),oe=m("label"),oe.textContent="+",d(l,"class","svelte-17mgxwz"),d(s,"class","svelte-17mgxwz"),d(o,"class","svelte-17mgxwz"),d(c,"class","warn svelte-17mgxwz"),d(n,"class","fileManager svelte-17mgxwz"),d(h,"class","svelte-17mgxwz"),d(T,"class","svelte-17mgxwz"),d(a,"class","gridSize svelte-17mgxwz"),d(ie,"class","svelte-17mgxwz"),d(z,"type","radio"),d(z,"name","tileEraser"),d(z,"id","tileEraser"),z.__value=-1,z.value=z.__value,d(z,"class","svelte-17mgxwz"),e[12][0].push(z),Ae(F.src,Re=Bt)||d(F,"src",Re),d(F,"alt","Eraser"),d(F,"title","Eraser"),d(F,"class","svelte-17mgxwz"),d(Y,"for","tileEraser"),d(Y,"class","noBg svelte-17mgxwz"),G(Y,"current",e[3]==-1),d(x,"class","tileSelector__itemList__tile svelte-17mgxwz"),d(R,"type","file"),d(R,"id","newTileButton"),d(R,"accept","*.png, *.jpg, *.jpeg"),d(R,"class","svelte-17mgxwz"),d(oe,"for","newTileButton"),d(oe,"class","noBg svelte-17mgxwz"),d(ee,"class","tileSelector__itemList__tile svelte-17mgxwz"),d(M,"class","tileSelector__itemList svelte-17mgxwz"),d(Z,"class","tileSelector"),d(t,"class","svelte-17mgxwz")},m(p,D){$(p,t,D),g(t,n),g(n,l),g(n,r),g(n,s),g(n,i),g(n,o),g(n,u),g(n,c),g(t,f),g(t,a),g(a,h),g(a,w),N(b,a,null),g(a,Q),N(A,a,null),g(a,j),g(a,T),g(t,X),g(t,Z),g(Z,ie),g(ie,Me),g(ie,ze),g(Z,De),g(Z,M),g(M,x),g(x,z),z.checked=z.__value===e[3],g(x,Be),g(x,Y),g(Y,F),g(M,Ge);for(let le=0;le<C.length;le+=1)C[le].m(M,null);g(M,Le),g(M,ee),g(ee,R),g(ee,He),g(ee,oe),te=!0,Ee||(Je=[E(c,"click",ve(e[8])),E(T,"click",ve(e[7])),E(z,"change",e[11]),E(R,"change",e[14]),E(R,"change",ve(e[5]))],Ee=!0)},p(p,D){const le={};!W&&D&4&&(W=!0,le.value=p[2],Ze(()=>W=!1)),b.$set(le);const Ye={};if(!_&&D&2&&(_=!0,Ye.value=p[1],Ze(()=>_=!1)),A.$set(Ye),(!te||D&8)&&Oe(ze,p[3]),D&8&&(z.checked=z.__value===p[3]),(!te||D&8)&&G(Y,"current",p[3]==-1),D&24){ne=p[4];let I;for(I=0;I<ne.length;I+=1){const Fe=lt(p,ne,I);C[I]?C[I].p(Fe,D):(C[I]=rt(Fe),C[I].c(),C[I].m(M,Le))}for(;I<C.length;I+=1)C[I].d(1);C.length=ne.length}},i(p){te||(S(b.$$.fragment,p),S(A.$$.fragment,p),te=!0)},o(p){L(b.$$.fragment,p),L(A.$$.fragment,p),te=!1},d(p){p&&k(t),P(b),P(A),e[12][0].splice(e[12][0].indexOf(z),1),ft(C,p),Ee=!1,H(Je)}}}function Gt(e){let t,n;return t=new gt({props:{title:"Configuration",shadow:"right",$$slots:{default:[Rt]},$$scope:{ctx:e}}}),{c(){B(t.$$.fragment)},m(l,r){N(t,l,r),n=!0},p(l,[r]){const s={};r&262175&&(s.$$scope={dirty:r,ctx:l}),t.$set(s)},i(l){n||(S(t.$$.fragment,l),n=!0)},o(l){L(t.$$.fragment,l),n=!1},d(l){P(t,l)}}}function Ht(e,t,n){let l,r,s,i;O(e,ge,_=>n(1,l=_)),O(e,_e,_=>n(2,r=_)),O(e,we,_=>n(3,s=_)),O(e,se,_=>n(4,i=_));let o;const u=()=>{let _=o[0],j=new FileReader;j.onload=()=>{const T=new Image;T.src=j.result,T.title=_.name,se.update(X=>[...X,{name:_.name,data:T}])},j.readAsDataURL(_)},c=_=>{_.key==="Enter"&&(f(),_.preventDefault())},f=()=>{q.resize(r,l)},a=()=>{confirm("Are you sure you want to delete this project?")&&(q.reset(),se.set([]))},h=[[]];function w(_){r=_,_e.set(r)}function b(_){l=_,ge.set(l)}function W(){s=this.__value,we.set(s)}function Q(){s=this.__value,we.set(s)}function A(){o=this.files,n(0,o)}return[o,l,r,s,i,u,c,f,a,w,b,W,h,Q,A]}class Jt extends V{constructor(t){super(),U(this,t,Ht,Gt,J,{})}}function Wt(e){let t,n,l,r,s,i;return{c(){t=m("div"),n=m("canvas"),d(n,"width",l=e[2]*32),d(n,"height",r=e[1]*32),d(t,"class","grid svelte-2utg53")},m(o,u){$(o,t,u),g(t,n),e[9](n),s||(i=[E(window,"resize",e[3]),E(n,"mousedown",ve(e[4])),E(n,"mousemove",e[6]),E(n,"contextmenu",e[5])],s=!0)},p(o,[u]){u&4&&l!==(l=o[2]*32)&&d(n,"width",l),u&2&&r!==(r=o[1]*32)&&d(n,"height",r)},i:y,o:y,d(o){o&&k(t),e[9](null),s=!1,H(i)}}}function Xt(e,t,n){let l,r,s,i;O(e,q,_=>n(8,s=_)),O(e,se,_=>n(11,i=_));let{gridId:o}=t,u,c;const f=()=>{!c||(c.clearRect(0,0,u.width,u.height),s[o].forEach((_,j)=>{_.forEach((T,X)=>{T===-1?(c.fillStyle="white",c.fillRect(X*32,j*32,32,32)):c.drawImage(i[T].data,X*32,j*32,32,32)})}))},a=()=>{if(c){f(),c.beginPath(),c.strokeStyle="black",c.fillStyle="black",c.lineWidth=1;for(let _=0;_<l;_++)c.moveTo(_*32,0),c.lineTo(_*32,r*32);for(let _=0;_<r;_++)c.moveTo(0,_*32),c.lineTo(l*32,_*32);c.stroke()}},h=(_,j)=>({x:Math.floor(_/u.width*l),y:Math.floor(j/u.height*r)}),w=dt(),b=_=>{if(console.log(_.buttons),_.buttons==2&&!_.shiftKey)return w("erase",h(_.offsetX,_.offsetY)),!1;if(_.buttons==1)return w("click",h(_.offsetX,_.offsetY)),!0},W=_=>{if(!_.shiftKey){_.preventDefault(),b(_);return}},Q=_=>{_.buttons==2?w("erase",h(_.offsetX,_.offsetY)):_.buttons==1&&w("click",h(_.offsetX,_.offsetY))};Lt(()=>{if(c=u.getContext("2d"),!c){alert("Could not get canvas context");return}c.imageSmoothingEnabled=!0,console.log("Context loaded"),o>-1&&a()}),Et(()=>{o>-1&&a()});function A(_){de[_?"unshift":"push"](()=>{u=_,n(0,u)})}return e.$$set=_=>{"gridId"in _&&n(7,o=_.gridId)},e.$$.update=()=>{e.$$.dirty&384&&n(2,l=s[o][0].length),e.$$.dirty&384&&n(1,r=s[o].length),e.$$.dirty&384&&s[o]&&a()},[u,r,l,a,b,W,Q,o,s,A]}class mt extends V{constructor(t){super(),U(this,t,Xt,Wt,J,{gridId:7})}}function Yt(e){let t;return{c(){t=m("p"),t.textContent="There is currently no level selected.",d(t,"class","center svelte-92ejb9")},m(n,l){$(n,t,l)},p:y,i:y,o:y,d(n){n&&k(t)}}}function Ft(e){let t,n,l,r,s,i;return{c(){t=m("div"),n=m("p"),n.textContent="There is currently no levels.",l=v(),r=m("button"),r.textContent="Add a new level",d(t,"class","center svelte-92ejb9")},m(o,u){$(o,t,u),g(t,n),g(t,l),g(t,r),s||(i=E(r,"click",e[2]),s=!0)},p:y,i:y,o:y,d(o){o&&k(t),s=!1,i()}}}function Kt(e){let t,n,l;return n=new mt({props:{gridId:e[0]}}),n.$on("click",e[3]),n.$on("erase",e[4]),{c(){t=m("div"),B(n.$$.fragment),d(t,"class","editor__gridContener svelte-92ejb9")},m(r,s){$(r,t,s),N(n,t,null),l=!0},p(r,s){const i={};s&1&&(i.gridId=r[0]),n.$set(i)},i(r){l||(S(n.$$.fragment,r),l=!0)},o(r){L(n.$$.fragment,r),l=!1},d(r){r&&k(t),P(n)}}}function Ut(e){let t,n,l,r;const s=[Kt,Ft,Yt],i=[];function o(u,c){return u[0]!=-1&&u[1].length>0?0:u[1].length==0?1:2}return n=o(e),l=i[n]=s[n](e),{c(){t=m("section"),l.c(),d(t,"class","editor svelte-92ejb9")},m(u,c){$(u,t,c),i[n].m(t,null),r=!0},p(u,[c]){let f=n;n=o(u),n===f?i[n].p(u,c):(Pe(),L(i[f],1,1,()=>{i[f]=null}),qe(),l=i[n],l?l.p(u,c):(l=i[n]=s[n](u),l.c()),S(l,1),l.m(t,null))},i(u){r||(S(l),r=!0)},o(u){L(l),r=!1},d(u){u&&k(t),i[n].d()}}}function Vt(e,t,n){let l,r,s;O(e,we,c=>n(5,l=c)),O(e,Se,c=>n(0,r=c)),O(e,q,c=>n(1,s=c));const i=()=>{q.addLevel(),Se.set(s.length-1)},o=(c,f=!1)=>{console.log(c.detail,f),q.setLevelCell(r,c.detail.x,c.detail.y,f?-1:l)};return[r,s,i,o,c=>{o(c,!0)}]}class Qt extends V{constructor(t){super(),U(this,t,Vt,Ut,J,{})}}function st(e,t,n){const l=e.slice();return l[5]=t[n],l[7]=n,l}function Zt(e){let t;return{c(){t=m("p"),t.textContent="There is currently no levels."},m(n,l){$(n,t,l)},p:y,i:y,o:y,d(n){n&&k(t)}}}function xt(e){let t,n,l=e[0],r=[];for(let i=0;i<l.length;i+=1)r[i]=it(st(e,l,i));const s=i=>L(r[i],1,1,()=>{r[i]=null});return{c(){t=m("ul");for(let i=0;i<r.length;i+=1)r[i].c();d(t,"class","levelList__list svelte-ynwbqm")},m(i,o){$(i,t,o);for(let u=0;u<r.length;u+=1)r[u].m(t,null);n=!0},p(i,o){if(o&3){l=i[0];let u;for(u=0;u<l.length;u+=1){const c=st(i,l,u);r[u]?(r[u].p(c,o),S(r[u],1)):(r[u]=it(c),r[u].c(),S(r[u],1),r[u].m(t,null))}for(Pe(),u=l.length;u<r.length;u+=1)s(u);qe()}},i(i){if(!n){for(let o=0;o<l.length;o+=1)S(r[o]);n=!0}},o(i){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)L(r[o]);n=!1},d(i){i&&k(t),ft(r,i)}}}function it(e){let t,n,l,r,s,i,o,u,c;return s=new mt({props:{gridId:e[7]}}),{c(){t=m("li"),n=m("input"),l=v(),r=m("label"),B(s.$$.fragment),i=v(),d(n,"type","radio"),d(n,"name","level"),d(n,"id","level-"+e[7]),n.__value=e[7],n.value=n.__value,d(n,"class","svelte-ynwbqm"),e[4][0].push(n),d(r,"class","levelList__list__grid svelte-ynwbqm"),d(r,"for","level-"+e[7]),d(t,"class","svelte-ynwbqm")},m(f,a){$(f,t,a),g(t,n),n.checked=n.__value===e[1],g(t,l),g(t,r),N(s,r,null),g(t,i),o=!0,u||(c=E(n,"change",e[3]),u=!0)},p(f,a){a&2&&(n.checked=n.__value===f[1])},i(f){o||(S(s.$$.fragment,f),o=!0)},o(f){L(s.$$.fragment,f),o=!1},d(f){f&&k(t),e[4][0].splice(e[4][0].indexOf(n),1),P(s),u=!1,c()}}}function en(e){let t,n,l,r,s,i,o,u;const c=[xt,Zt],f=[];function a(h,w){return h[0].length!=0?0:1}return r=a(e),s=f[r]=c[r](e),{c(){t=m("button"),t.textContent="Add a new level",n=v(),l=m("div"),s.c(),d(t,"class","svelte-ynwbqm"),d(l,"class","levelList svelte-ynwbqm")},m(h,w){$(h,t,w),$(h,n,w),$(h,l,w),f[r].m(l,null),i=!0,o||(u=E(t,"click",e[2]),o=!0)},p(h,w){let b=r;r=a(h),r===b?f[r].p(h,w):(Pe(),L(f[b],1,1,()=>{f[b]=null}),qe(),s=f[r],s?s.p(h,w):(s=f[r]=c[r](h),s.c()),S(s,1),s.m(l,null))},i(h){i||(S(s),i=!0)},o(h){L(s),i=!1},d(h){h&&k(t),h&&k(n),h&&k(l),f[r].d(),o=!1,u()}}}function tn(e){let t,n;return t=new gt({props:{title:"Level Selector",shadow:"left",$$slots:{default:[en]},$$scope:{ctx:e}}}),{c(){B(t.$$.fragment)},m(l,r){N(t,l,r),n=!0},p(l,[r]){const s={};r&259&&(s.$$scope={dirty:r,ctx:l}),t.$set(s)},i(l){n||(S(t.$$.fragment,l),n=!0)},o(l){L(t.$$.fragment,l),n=!1},d(l){P(t,l)}}}function nn(e,t,n){let l,r;O(e,q,u=>n(0,l=u)),O(e,Se,u=>n(1,r=u));const s=u=>{q.addLevel()},i=[[]];function o(){r=this.__value,Se.set(r)}return[l,r,s,o,i]}class ln extends V{constructor(t){super(),U(this,t,nn,tn,J,{})}}function rn(e){let t,n,l,r,s,i,o,u,c;return r=new Jt({}),i=new Qt({}),u=new ln({}),{c(){t=m("header"),t.innerHTML="<h1>Vivian level Editor</h1>",n=v(),l=m("main"),B(r.$$.fragment),s=v(),B(i.$$.fragment),o=v(),B(u.$$.fragment),d(l,"class","svelte-1fszlhy")},m(f,a){$(f,t,a),$(f,n,a),$(f,l,a),N(r,l,null),g(l,s),N(i,l,null),g(l,o),N(u,l,null),c=!0},p:y,i(f){c||(S(r.$$.fragment,f),S(i.$$.fragment,f),S(u.$$.fragment,f),c=!0)},o(f){L(r.$$.fragment,f),L(i.$$.fragment,f),L(u.$$.fragment,f),c=!1},d(f){f&&k(t),f&&k(n),f&&k(l),P(r),P(i),P(u)}}}class sn extends V{constructor(t){super(),U(this,t,null,rn,J,{})}}new sn({target:document.getElementById("app")});
