(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))f(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&f(n)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function f(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function pt(){}function le(o,u){for(const t in u)o[t]=u[t];return o}function Fe(o){return o()}function xe(){return Object.create(null)}function Lt(o){o.forEach(Fe)}function be(o){return typeof o=="function"}function jt(o,u){return o!=o?u==u:o!==u||o&&typeof o=="object"||typeof o=="function"}let re;function Xt(o,u){return re||(re=document.createElement("a")),re.href=u,o===re.href}function er(o){return Object.keys(o).length===0}function Ne(o,...u){if(o==null)return pt;const t=o.subscribe(...u);return t.unsubscribe?()=>t.unsubscribe():t}function $t(o){let u;return Ne(o,t=>u=t)(),u}function Ct(o,u,t){o.$$.on_destroy.push(Ne(u,t))}function Pe(o,u,t,f){if(o){const s=Ue(o,u,t,f);return o[0](s)}}function Ue(o,u,t,f){return o[1]&&f?le(t.ctx.slice(),o[1](f(u))):t.ctx}function We(o,u,t,f){if(o[2]&&f){const s=o[2](f(t));if(u.dirty===void 0)return s;if(typeof s=="object"){const i=[],n=Math.max(u.dirty.length,s.length);for(let e=0;e<n;e+=1)i[e]=u.dirty[e]|s[e];return i}return u.dirty|s}return u.dirty}function Ze(o,u,t,f,s,i){if(s){const n=Ue(u,t,f,i);o.p(n,s)}}function Me(o){if(o.ctx.length>32){const u=[],t=o.ctx.length/32;for(let f=0;f<t;f++)u[f]=-1;return u}return-1}function Ae(o){const u={};for(const t in o)t[0]!=="$"&&(u[t]=o[t]);return u}function Ie(o){return o==null?"":o}function q(o,u){o.appendChild(u)}function bt(o,u,t){o.insertBefore(u,t||null)}function gt(o){o.parentNode.removeChild(o)}function ye(o,u){for(let t=0;t<o.length;t+=1)o[t]&&o[t].d(u)}function rt(o){return document.createElement(o)}function Vt(o){return document.createTextNode(o)}function lt(){return Vt(" ")}function dt(o,u,t,f){return o.addEventListener(u,t,f),()=>o.removeEventListener(u,t,f)}function Ot(o){return function(u){return u.preventDefault(),o.call(this,u)}}function rr(o){return function(u){return u.stopPropagation(),o.call(this,u)}}function G(o,u,t){t==null?o.removeAttribute(u):o.getAttribute(u)!==t&&o.setAttribute(u,t)}function Oe(o,u){const t=Object.getOwnPropertyDescriptors(o.__proto__);for(const f in u)u[f]==null?o.removeAttribute(f):f==="style"?o.style.cssText=u[f]:f==="__value"?o.value=o[f]=u[f]:t[f]&&t[f].set?o[f]=u[f]:G(o,f,u[f])}function nr(o){return Array.from(o.childNodes)}function we(o,u){u=""+u,o.wholeText!==u&&(o.data=u)}function Tt(o,u,t){o.classList[t?"add":"remove"](u)}function ir(o,u,{bubbles:t=!1,cancelable:f=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(o,t,f,u),s}let Qt;function Jt(o){Qt=o}function ke(){if(!Qt)throw new Error("Function called outside component initialization");return Qt}function He(o){ke().$$.on_mount.push(o)}function $e(o){ke().$$.on_destroy.push(o)}function Ge(){const o=ke();return(u,t,{cancelable:f=!1}={})=>{const s=o.$$.callbacks[u];if(s){const i=ir(u,t,{cancelable:f});return s.slice().forEach(n=>{n.call(o,i)}),!i.defaultPrevented}return!0}}function sr(o,u){const t=o.$$.callbacks[u.type];t&&t.slice().forEach(f=>f.call(this,u))}const qt=[],Gt=[],ae=[],pe=[],ar=Promise.resolve();let me=!1;function or(){me||(me=!0,ar.then(Ke))}function _e(o){ae.push(o)}function ce(o){pe.push(o)}const fe=new Set;let ne=0;function Ke(){const o=Qt;do{for(;ne<qt.length;){const u=qt[ne];ne++,Jt(u),lr(u.$$)}for(Jt(null),qt.length=0,ne=0;Gt.length;)Gt.pop()();for(let u=0;u<ae.length;u+=1){const t=ae[u];fe.has(t)||(fe.add(t),t())}ae.length=0}while(qt.length);for(;pe.length;)pe.pop()();me=!1,fe.clear(),Jt(o)}function lr(o){if(o.fragment!==null){o.update(),Lt(o.before_update);const u=o.dirty;o.dirty=[-1],o.fragment&&o.fragment.p(o.ctx,u),o.after_update.forEach(_e)}}const oe=new Set;let Ut;function Se(){Ut={r:0,c:[],p:Ut}}function Ce(){Ut.r||Lt(Ut.c),Ut=Ut.p}function _t(o,u){o&&o.i&&(oe.delete(o),o.i(u))}function yt(o,u,t,f){if(o&&o.o){if(oe.has(o))return;oe.add(o),Ut.c.push(()=>{oe.delete(o),f&&(t&&o.d(1),f())}),o.o(u)}else f&&f()}function ur(o,u){const t={},f={},s={$$scope:1};let i=o.length;for(;i--;){const n=o[i],e=u[i];if(e){for(const a in n)a in e||(f[a]=1);for(const a in e)s[a]||(t[a]=e[a],s[a]=1);o[i]=e}else for(const a in n)s[a]=1}for(const n in f)n in t||(t[n]=void 0);return t}function he(o,u,t){const f=o.$$.props[u];f!==void 0&&(o.$$.bound[f]=t,t(o.$$.ctx[f]))}function It(o){o&&o.c()}function xt(o,u,t,f){const{fragment:s,after_update:i}=o.$$;s&&s.m(u,t),f||_e(()=>{const n=o.$$.on_mount.map(Fe).filter(be);o.$$.on_destroy?o.$$.on_destroy.push(...n):Lt(n),o.$$.on_mount=[]}),i.forEach(_e)}function At(o,u){const t=o.$$;t.fragment!==null&&(Lt(t.on_destroy),t.fragment&&t.fragment.d(u),t.on_destroy=t.fragment=null,t.ctx=[])}function cr(o,u){o.$$.dirty[0]===-1&&(qt.push(o),or(),o.$$.dirty.fill(0)),o.$$.dirty[u/31|0]|=1<<u%31}function Nt(o,u,t,f,s,i,n,e=[-1]){const a=Qt;Jt(o);const c=o.$$={fragment:null,ctx:[],props:i,update:pt,not_equal:s,bound:xe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u.context||(a?a.$$.context:[])),callbacks:xe(),dirty:e,skip_bound:!1,root:u.target||a.$$.root};n&&n(c.root);let d=!1;if(c.ctx=t?t(o,u.props||{},(h,b,...p)=>{const v=p.length?p[0]:b;return c.ctx&&s(c.ctx[h],c.ctx[h]=v)&&(!c.skip_bound&&c.bound[h]&&c.bound[h](v),d&&cr(o,h)),b}):[],c.update(),d=!0,Lt(c.before_update),c.fragment=f?f(c.ctx):!1,u.target){if(u.hydrate){const h=nr(u.target);c.fragment&&c.fragment.l(h),h.forEach(gt)}else c.fragment&&c.fragment.c();u.intro&&_t(o.$$.fragment),xt(o,u.target,u.anchor,u.customElement),Ke()}Jt(a)}class Pt{$destroy(){At(this,1),this.$destroy=pt}$on(u,t){if(!be(t))return pt;const f=this.$$.callbacks[u]||(this.$$.callbacks[u]=[]);return f.push(t),()=>{const s=f.indexOf(t);s!==-1&&f.splice(s,1)}}$set(u){this.$$set&&!er(u)&&(this.$$.skip_bound=!0,this.$$set(u),this.$$.skip_bound=!1)}}function fr(o){let u,t,f,s,i,n,e,a=[{type:o[3]},{name:o[2]},{id:o[2]},o[4],{value:o[0]}],c={};for(let d=0;d<a.length;d+=1)c=le(c,a[d]);return{c(){u=rt("div"),t=rt("label"),f=Vt(o[1]),s=lt(),i=rt("input"),G(t,"for",o[2]),Oe(i,c)},m(d,h){bt(d,u,h),q(u,t),q(t,f),q(u,s),q(u,i),i.value=c.value,i.autofocus&&i.focus(),n||(e=[dt(i,"input",o[5]),dt(i,"keypress",o[6])],n=!0)},p(d,[h]){h&2&&we(f,d[1]),h&4&&G(t,"for",d[2]),Oe(i,c=ur(a,[h&8&&{type:d[3]},h&4&&{name:d[2]},h&4&&{id:d[2]},h&16&&d[4],h&1&&i.value!==d[0]&&{value:d[0]}])),"value"in c&&(i.value=c.value)},i:pt,o:pt,d(d){d&&gt(u),n=!1,Lt(e)}}}function hr(o,u,t){let{value:f=""}=u,{label:s="Input"}=u,{name:i="input"}=u,{type:n="text"}=u,{inputParams:e={}}=u;const a=Ge(),c=h=>{t(0,f=h.target.value),n==="number"||n==="range"?t(0,f=Number(f)):n=="checkbox"&&t(0,f=h.target.checked),a("input",f)};function d(h){sr.call(this,o,h)}return o.$$set=h=>{"value"in h&&t(0,f=h.value),"label"in h&&t(1,s=h.label),"name"in h&&t(2,i=h.name),"type"in h&&t(3,n=h.type),"inputParams"in h&&t(4,e=h.inputParams)},[f,s,i,n,e,c,d]}class de extends Pt{constructor(u){super(),Nt(this,u,hr,fr,jt,{value:0,label:1,name:2,type:3,inputParams:4})}}function dr(o){let u,t,f,s,i,n,e,a;const c=o[4].default,d=Pe(c,o,o[3],null);return{c(){u=rt("nav"),t=rt("h2"),f=Vt(o[0]),s=lt(),i=rt("hr"),n=lt(),d&&d.c(),G(t,"class","svelte-15oiif1"),G(i,"class","svelte-15oiif1"),G(u,"class",e=Ie(o[2].class)+" svelte-15oiif1"),Tt(u,"leftShadow",o[1]=="left"),Tt(u,"rightShadow",o[1]=="right")},m(h,b){bt(h,u,b),q(u,t),q(t,f),q(u,s),q(u,i),q(u,n),d&&d.m(u,null),a=!0},p(h,[b]){(!a||b&1)&&we(f,h[0]),d&&d.p&&(!a||b&8)&&Ze(d,c,h,h[3],a?We(c,h[3],b,null):Me(h[3]),null),(!a||b&4&&e!==(e=Ie(h[2].class)+" svelte-15oiif1"))&&G(u,"class",e),(!a||b&6)&&Tt(u,"leftShadow",h[1]=="left"),(!a||b&6)&&Tt(u,"rightShadow",h[1]=="right")},i(h){a||(_t(d,h),a=!0)},o(h){yt(d,h),a=!1},d(h){h&&gt(u),d&&d.d(h)}}}function pr(o,u,t){let{$$slots:f={},$$scope:s}=u,{title:i="Undefined"}=u,{shadow:n="left"}=u;return o.$$set=e=>{t(2,u=le(le({},u),Ae(e))),"title"in e&&t(0,i=e.title),"shadow"in e&&t(1,n=e.shadow),"$$scope"in e&&t(3,s=e.$$scope)},u=Ae(u),[i,n,u,s,f]}class Ye extends Pt{constructor(u){super(),Nt(this,u,pr,dr,jt,{title:0,shadow:1})}}const Mt=[];function Zt(o,u=pt){let t;const f=new Set;function s(e){if(jt(o,e)&&(o=e,t)){const a=!Mt.length;for(const c of f)c[1](),Mt.push(c,o);if(a){for(let c=0;c<Mt.length;c+=2)Mt[c][0](Mt[c+1]);Mt.length=0}}}function i(e){s(e(o))}function n(e,a=pt){const c=[e,a];return f.add(c),f.size===1&&(t=u(s)||pt),e(o),()=>{f.delete(c),f.size===0&&(t(),t=null)}}return{set:s,update:i,subscribe:n}}const Rt=Zt(-1),ge=Zt(!1);function qe(o,u,t){const{subscribe:f,set:s,update:i}=Zt(o);return{subscribe:f,set(n){n<u?n=u:n>t&&(n=t),s(n)},update(n){i(e=>(e=n(e),e<u?e=u:e>t&&(e=t),e))}}}const Kt=qe(10,1,50),Wt=qe(10,1,20);function mr(){const{subscribe:o,set:u,update:t}=Zt(new Array),f=Zt(new Array);return{subscribe:o,set:u,addLevel(){t(s=>[...s,Array.from({length:$t(Wt)*2+1},i=>Array($t(Kt)).fill(-1))]),f.update(s=>[...s,!0])},pushLevel(s,i){i===void 0?(t(n=>[...n,s]),f.update(n=>[...n,!0])):(t(n=>(n=[...n.slice(0,i),s,...n.slice(i)],n)),f.update(n=>(n=[...n.slice(0,i),!0,...n.slice(i)],n)))},removeLevel(s){t(i=>(i=i.filter((n,e)=>e!==s),i)),f.update(i=>{i=i.filter((n,e)=>e!==s);for(let n=s;n<i.length;n++)i[n]=!0;return i})},setLevelCell(s,i,n,e){n!=$t(Wt)&&t(a=>(a[s][n][i]=e,a))},resize(s,i){i=i*2+1,t(n=>n.map(e=>{const a=e.length-i;if(a>0)e=e.slice(a/2,e.length-a/2);else if(a<0){for(let c=0;c<-a/2;c++)e.unshift(Array(s).fill(-1));for(let c=0;c<-a/2;c++)e.push(Array(s).fill(-1))}return e=e.map(c=>(c.length>s?c=c.slice(0,s):c.length<s&&(c=[...c,...Array(s-c.length).fill(-1)]),c)),e})),f.update(n=>n.map(e=>!0))},reset(){t(s=>new Array),f.update(s=>new Array)},switchTiles(s,i){t(n=>n.map(e=>e.map(a=>a.map(c=>c==s?i:c==i?s:c)))),f.update(n=>n.map((e,a)=>e||a==s||a==i))},needUpdate(s){return $t(f)[s]}}}const kt=mr();if(localStorage){const o=localStorage.getItem("levels");if(o){const u=JSON.parse(o);kt.set(u.levels),Kt.set(u.width),Wt.set(u.height)}kt.subscribe(u=>{localStorage.setItem("levels",JSON.stringify({width:$t(Kt),height:$t(Wt),levels:u}))})}else console.warn("localstorage not available");const Dt=Zt(Array());if(localStorage){const o=localStorage.getItem("images");if(o){const u=JSON.parse(o);Dt.update(t=>[...t,...u.map(f=>{const s=new Image;return s.src=f.data,{name:f.name,data:s}})])}Dt.subscribe(u=>{localStorage.setItem("images",JSON.stringify(u.map(t=>({name:t.name,data:t.data.src}))))})}else console.warn("localstorage not available");const Ht=Zt(-1),_r="/Vivian-level-editor/assets/trash.8b6cb216.svg",gr=(o,u,t)=>{const f=document.createElement("canvas"),s=f.getContext("2d");if(!s)throw new Error("Canvas context is not defined");f.width=u,f.height=t,s.imageSmoothingEnabled=!0,s.imageSmoothingQuality="high",s.drawImage(o,0,0,u,t);const i=new Image;return i.src=f.toDataURL(),i.alt=o.alt,i.title=o.title,i};var ie=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function se(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Je={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(o,u){(function(t){o.exports=t()})(function(){return function t(f,s,i){function n(c,d){if(!s[c]){if(!f[c]){var h=typeof se=="function"&&se;if(!d&&h)return h(c,!0);if(e)return e(c,!0);var b=new Error("Cannot find module '"+c+"'");throw b.code="MODULE_NOT_FOUND",b}var p=s[c]={exports:{}};f[c][0].call(p.exports,function(v){var m=f[c][1][v];return n(m||v)},p,p.exports,t,f,s,i)}return s[c].exports}for(var e=typeof se=="function"&&se,a=0;a<i.length;a++)n(i[a]);return n}({1:[function(t,f,s){var i=t("./utils"),n=t("./support"),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(a){for(var c,d,h,b,p,v,m,y=[],_=0,S=a.length,k=S,x=i.getTypeOf(a)!=="string";_<a.length;)k=S-_,h=x?(c=a[_++],d=_<S?a[_++]:0,_<S?a[_++]:0):(c=a.charCodeAt(_++),d=_<S?a.charCodeAt(_++):0,_<S?a.charCodeAt(_++):0),b=c>>2,p=(3&c)<<4|d>>4,v=1<k?(15&d)<<2|h>>6:64,m=2<k?63&h:64,y.push(e.charAt(b)+e.charAt(p)+e.charAt(v)+e.charAt(m));return y.join("")},s.decode=function(a){var c,d,h,b,p,v,m=0,y=0,_="data:";if(a.substr(0,_.length)===_)throw new Error("Invalid base64 input, it looks like a data url.");var S,k=3*(a=a.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(a.charAt(a.length-1)===e.charAt(64)&&k--,a.charAt(a.length-2)===e.charAt(64)&&k--,k%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=n.uint8array?new Uint8Array(0|k):new Array(0|k);m<a.length;)c=e.indexOf(a.charAt(m++))<<2|(b=e.indexOf(a.charAt(m++)))>>4,d=(15&b)<<4|(p=e.indexOf(a.charAt(m++)))>>2,h=(3&p)<<6|(v=e.indexOf(a.charAt(m++))),S[y++]=c,p!==64&&(S[y++]=d),v!==64&&(S[y++]=h);return S}},{"./support":30,"./utils":32}],2:[function(t,f,s){var i=t("./external"),n=t("./stream/DataWorker"),e=t("./stream/Crc32Probe"),a=t("./stream/DataLengthProbe");function c(d,h,b,p,v){this.compressedSize=d,this.uncompressedSize=h,this.crc32=b,this.compression=p,this.compressedContent=v}c.prototype={getContentWorker:function(){var d=new n(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),h=this;return d.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new n(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(d,h,b){return d.pipe(new e).pipe(new a("uncompressedSize")).pipe(h.compressWorker(b)).pipe(new a("compressedSize")).withStreamInfo("compression",h)},f.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,f,s){var i=t("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},s.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,f,s){var i=t("./utils"),n=function(){for(var e,a=[],c=0;c<256;c++){e=c;for(var d=0;d<8;d++)e=1&e?3988292384^e>>>1:e>>>1;a[c]=e}return a}();f.exports=function(e,a){return e!==void 0&&e.length?i.getTypeOf(e)!=="string"?function(c,d,h,b){var p=n,v=b+h;c^=-1;for(var m=b;m<v;m++)c=c>>>8^p[255&(c^d[m])];return-1^c}(0|a,e,e.length,0):function(c,d,h,b){var p=n,v=b+h;c^=-1;for(var m=b;m<v;m++)c=c>>>8^p[255&(c^d.charCodeAt(m))];return-1^c}(0|a,e,e.length,0):0}},{"./utils":32}],5:[function(t,f,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(t,f,s){var i=null;i=typeof Promise<"u"?Promise:t("lie"),f.exports={Promise:i}},{lie:37}],7:[function(t,f,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",n=t("pako"),e=t("./utils"),a=t("./stream/GenericWorker"),c=i?"uint8array":"array";function d(h,b){a.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=b,this.meta={}}s.magic="\b\0",e.inherits(d,a),d.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(e.transformTo(c,h.data),!1)},d.prototype.flush=function(){a.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new n[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(b){h.push({data:b,meta:h.meta})}},s.compressWorker=function(h){return new d("Deflate",h)},s.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,f,s){function i(p,v){var m,y="";for(m=0;m<v;m++)y+=String.fromCharCode(255&p),p>>>=8;return y}function n(p,v,m,y,_,S){var k,x,z=p.file,N=p.compression,L=S!==c.utf8encode,Z=e.transformTo("string",S(z.name)),D=e.transformTo("string",c.utf8encode(z.name)),H=z.comment,et=e.transformTo("string",S(H)),C=e.transformTo("string",c.utf8encode(H)),j=D.length!==z.name.length,l=C.length!==H.length,P="",it="",A="",Y=z.dir,B=z.date,tt={crc32:0,compressedSize:0,uncompressedSize:0};v&&!m||(tt.crc32=p.crc32,tt.compressedSize=p.compressedSize,tt.uncompressedSize=p.uncompressedSize);var T=0;v&&(T|=8),L||!j&&!l||(T|=2048);var O=0,nt=0;Y&&(O|=16),_==="UNIX"?(nt=798,O|=function(K,ut){var ft=K;return K||(ft=ut?16893:33204),(65535&ft)<<16}(z.unixPermissions,Y)):(nt=20,O|=function(K){return 63&(K||0)}(z.dosPermissions)),k=B.getUTCHours(),k<<=6,k|=B.getUTCMinutes(),k<<=5,k|=B.getUTCSeconds()/2,x=B.getUTCFullYear()-1980,x<<=4,x|=B.getUTCMonth()+1,x<<=5,x|=B.getUTCDate(),j&&(it=i(1,1)+i(d(Z),4)+D,P+="up"+i(it.length,2)+it),l&&(A=i(1,1)+i(d(et),4)+C,P+="uc"+i(A.length,2)+A);var J="";return J+=`
\0`,J+=i(T,2),J+=N.magic,J+=i(k,2),J+=i(x,2),J+=i(tt.crc32,4),J+=i(tt.compressedSize,4),J+=i(tt.uncompressedSize,4),J+=i(Z.length,2),J+=i(P.length,2),{fileRecord:h.LOCAL_FILE_HEADER+J+Z+P,dirRecord:h.CENTRAL_FILE_HEADER+i(nt,2)+J+i(et.length,2)+"\0\0\0\0"+i(O,4)+i(y,4)+Z+P+et}}var e=t("../utils"),a=t("../stream/GenericWorker"),c=t("../utf8"),d=t("../crc32"),h=t("../signature");function b(p,v,m,y){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=m,this.encodeFileName=y,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}e.inherits(b,a),b.prototype.push=function(p){var v=p.meta.percent||0,m=this.entriesCount,y=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,a.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:m?(v+100*(m-y-1))/m:100}}))},b.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var v=this.streamFiles&&!p.file.dir;if(v){var m=n(p,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:m.fileRecord,meta:{percent:0}})}else this.accumulate=!0},b.prototype.closedSource=function(p){this.accumulate=!1;var v=this.streamFiles&&!p.file.dir,m=n(p,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(m.dirRecord),v)this.push({data:function(y){return h.DATA_DESCRIPTOR+i(y.crc32,4)+i(y.compressedSize,4)+i(y.uncompressedSize,4)}(p),meta:{percent:100}});else for(this.push({data:m.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},b.prototype.flush=function(){for(var p=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var m=this.bytesWritten-p,y=function(_,S,k,x,z){var N=e.transformTo("string",z(x));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(_,2)+i(_,2)+i(S,4)+i(k,4)+i(N.length,2)+N}(this.dirRecords.length,m,p,this.zipComment,this.encodeFileName);this.push({data:y,meta:{percent:100}})},b.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},b.prototype.registerPrevious=function(p){this._sources.push(p);var v=this;return p.on("data",function(m){v.processChunk(m)}),p.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),p.on("error",function(m){v.error(m)}),this},b.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},b.prototype.error=function(p){var v=this._sources;if(!a.prototype.error.call(this,p))return!1;for(var m=0;m<v.length;m++)try{v[m].error(p)}catch{}return!0},b.prototype.lock=function(){a.prototype.lock.call(this);for(var p=this._sources,v=0;v<p.length;v++)p[v].lock()},f.exports=b},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,f,s){var i=t("../compressions"),n=t("./ZipFileWorker");s.generateWorker=function(e,a,c){var d=new n(a.streamFiles,c,a.platform,a.encodeFileName),h=0;try{e.forEach(function(b,p){h++;var v=function(S,k){var x=S||k,z=i[x];if(!z)throw new Error(x+" is not a valid compression method !");return z}(p.options.compression,a.compression),m=p.options.compressionOptions||a.compressionOptions||{},y=p.dir,_=p.date;p._compressWorker(v,m).withStreamInfo("file",{name:b,dir:y,date:_,comment:p.comment||"",unixPermissions:p.unixPermissions,dosPermissions:p.dosPermissions}).pipe(d)}),d.entriesCount=h}catch(b){d.error(b)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,f,s){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var n=new i;for(var e in this)typeof this[e]!="function"&&(n[e]=this[e]);return n}}(i.prototype=t("./object")).loadAsync=t("./load"),i.support=t("./support"),i.defaults=t("./defaults"),i.version="3.10.1",i.loadAsync=function(n,e){return new i().loadAsync(n,e)},i.external=t("./external"),f.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,f,s){var i=t("./utils"),n=t("./external"),e=t("./utf8"),a=t("./zipEntries"),c=t("./stream/Crc32Probe"),d=t("./nodejsUtils");function h(b){return new n.Promise(function(p,v){var m=b.decompressed.getContentWorker().pipe(new c);m.on("error",function(y){v(y)}).on("end",function(){m.streamInfo.crc32!==b.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}f.exports=function(b,p){var v=this;return p=i.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:e.utf8decode}),d.isNode&&d.isStream(b)?n.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",b,!0,p.optimizedBinaryString,p.base64).then(function(m){var y=new a(p);return y.load(m),y}).then(function(m){var y=[n.Promise.resolve(m)],_=m.files;if(p.checkCRC32)for(var S=0;S<_.length;S++)y.push(h(_[S]));return n.Promise.all(y)}).then(function(m){for(var y=m.shift(),_=y.files,S=0;S<_.length;S++){var k=_[S],x=k.fileNameStr,z=i.resolve(k.fileNameStr);v.file(z,k.decompressed,{binary:!0,optimizedBinaryString:!0,date:k.date,dir:k.dir,comment:k.fileCommentStr.length?k.fileCommentStr:null,unixPermissions:k.unixPermissions,dosPermissions:k.dosPermissions,createFolders:p.createFolders}),k.dir||(v.file(z).unsafeOriginalName=x)}return y.zipComment.length&&(v.comment=y.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,f,s){var i=t("../utils"),n=t("../stream/GenericWorker");function e(a,c){n.call(this,"Nodejs stream input adapter for "+a),this._upstreamEnded=!1,this._bindStream(c)}i.inherits(e,n),e.prototype._bindStream=function(a){var c=this;(this._stream=a).pause(),a.on("data",function(d){c.push({data:d,meta:{percent:0}})}).on("error",function(d){c.isPaused?this.generatedError=d:c.error(d)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},e.prototype.pause=function(){return!!n.prototype.pause.call(this)&&(this._stream.pause(),!0)},e.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},f.exports=e},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,f,s){var i=t("readable-stream").Readable;function n(e,a,c){i.call(this,a),this._helper=e;var d=this;e.on("data",function(h,b){d.push(h)||d._helper.pause(),c&&c(b)}).on("error",function(h){d.emit("error",h)}).on("end",function(){d.push(null)})}t("../utils").inherits(n,i),n.prototype._read=function(){this._helper.resume()},f.exports=n},{"../utils":32,"readable-stream":16}],14:[function(t,f,s){f.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,n){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,n);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,n)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var n=new Buffer(i);return n.fill(0),n},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(t,f,s){function i(z,N,L){var Z,D=e.getTypeOf(N),H=e.extend(L||{},d);H.date=H.date||new Date,H.compression!==null&&(H.compression=H.compression.toUpperCase()),typeof H.unixPermissions=="string"&&(H.unixPermissions=parseInt(H.unixPermissions,8)),H.unixPermissions&&16384&H.unixPermissions&&(H.dir=!0),H.dosPermissions&&16&H.dosPermissions&&(H.dir=!0),H.dir&&(z=_(z)),H.createFolders&&(Z=y(z))&&S.call(this,Z,!0);var et=D==="string"&&H.binary===!1&&H.base64===!1;L&&L.binary!==void 0||(H.binary=!et),(N instanceof h&&N.uncompressedSize===0||H.dir||!N||N.length===0)&&(H.base64=!1,H.binary=!0,N="",H.compression="STORE",D="string");var C=null;C=N instanceof h||N instanceof a?N:v.isNode&&v.isStream(N)?new m(z,N):e.prepareContent(z,N,H.binary,H.optimizedBinaryString,H.base64);var j=new b(z,C,H);this.files[z]=j}var n=t("./utf8"),e=t("./utils"),a=t("./stream/GenericWorker"),c=t("./stream/StreamHelper"),d=t("./defaults"),h=t("./compressedObject"),b=t("./zipObject"),p=t("./generate"),v=t("./nodejsUtils"),m=t("./nodejs/NodejsStreamInputAdapter"),y=function(z){z.slice(-1)==="/"&&(z=z.substring(0,z.length-1));var N=z.lastIndexOf("/");return 0<N?z.substring(0,N):""},_=function(z){return z.slice(-1)!=="/"&&(z+="/"),z},S=function(z,N){return N=N!==void 0?N:d.createFolders,z=_(z),this.files[z]||i.call(this,z,null,{dir:!0,createFolders:N}),this.files[z]};function k(z){return Object.prototype.toString.call(z)==="[object RegExp]"}var x={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(z){var N,L,Z;for(N in this.files)Z=this.files[N],(L=N.slice(this.root.length,N.length))&&N.slice(0,this.root.length)===this.root&&z(L,Z)},filter:function(z){var N=[];return this.forEach(function(L,Z){z(L,Z)&&N.push(Z)}),N},file:function(z,N,L){if(arguments.length!==1)return z=this.root+z,i.call(this,z,N,L),this;if(k(z)){var Z=z;return this.filter(function(H,et){return!et.dir&&Z.test(H)})}var D=this.files[this.root+z];return D&&!D.dir?D:null},folder:function(z){if(!z)return this;if(k(z))return this.filter(function(D,H){return H.dir&&z.test(D)});var N=this.root+z,L=S.call(this,N),Z=this.clone();return Z.root=L.name,Z},remove:function(z){z=this.root+z;var N=this.files[z];if(N||(z.slice(-1)!=="/"&&(z+="/"),N=this.files[z]),N&&!N.dir)delete this.files[z];else for(var L=this.filter(function(D,H){return H.name.slice(0,z.length)===z}),Z=0;Z<L.length;Z++)delete this.files[L[Z].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(z){var N,L={};try{if((L=e.extend(z||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:n.utf8encode})).type=L.type.toLowerCase(),L.compression=L.compression.toUpperCase(),L.type==="binarystring"&&(L.type="string"),!L.type)throw new Error("No output type specified.");e.checkSupport(L.type),L.platform!=="darwin"&&L.platform!=="freebsd"&&L.platform!=="linux"&&L.platform!=="sunos"||(L.platform="UNIX"),L.platform==="win32"&&(L.platform="DOS");var Z=L.comment||this.comment||"";N=p.generateWorker(this,L,Z)}catch(D){(N=new a("error")).error(D)}return new c(N,L.type||"string",L.mimeType)},generateAsync:function(z,N){return this.generateInternalStream(z).accumulate(N)},generateNodeStream:function(z,N){return(z=z||{}).type||(z.type="nodebuffer"),this.generateInternalStream(z).toNodejsStream(N)}};f.exports=x},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,f,s){f.exports=t("stream")},{stream:void 0}],17:[function(t,f,s){var i=t("./DataReader");function n(e){i.call(this,e);for(var a=0;a<this.data.length;a++)e[a]=255&e[a]}t("../utils").inherits(n,i),n.prototype.byteAt=function(e){return this.data[this.zero+e]},n.prototype.lastIndexOfSignature=function(e){for(var a=e.charCodeAt(0),c=e.charCodeAt(1),d=e.charCodeAt(2),h=e.charCodeAt(3),b=this.length-4;0<=b;--b)if(this.data[b]===a&&this.data[b+1]===c&&this.data[b+2]===d&&this.data[b+3]===h)return b-this.zero;return-1},n.prototype.readAndCheckSignature=function(e){var a=e.charCodeAt(0),c=e.charCodeAt(1),d=e.charCodeAt(2),h=e.charCodeAt(3),b=this.readData(4);return a===b[0]&&c===b[1]&&d===b[2]&&h===b[3]},n.prototype.readData=function(e){if(this.checkOffset(e),e===0)return[];var a=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,a},f.exports=n},{"../utils":32,"./DataReader":18}],18:[function(t,f,s){var i=t("../utils");function n(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}n.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var a,c=0;for(this.checkOffset(e),a=this.index+e-1;a>=this.index;a--)c=(c<<8)+this.byteAt(a);return this.index+=e,c},readString:function(e){return i.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},f.exports=n},{"../utils":32}],19:[function(t,f,s){var i=t("./Uint8ArrayReader");function n(e){i.call(this,e)}t("../utils").inherits(n,i),n.prototype.readData=function(e){this.checkOffset(e);var a=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,a},f.exports=n},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,f,s){var i=t("./DataReader");function n(e){i.call(this,e)}t("../utils").inherits(n,i),n.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},n.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},n.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},n.prototype.readData=function(e){this.checkOffset(e);var a=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,a},f.exports=n},{"../utils":32,"./DataReader":18}],21:[function(t,f,s){var i=t("./ArrayReader");function n(e){i.call(this,e)}t("../utils").inherits(n,i),n.prototype.readData=function(e){if(this.checkOffset(e),e===0)return new Uint8Array(0);var a=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,a},f.exports=n},{"../utils":32,"./ArrayReader":17}],22:[function(t,f,s){var i=t("../utils"),n=t("../support"),e=t("./ArrayReader"),a=t("./StringReader"),c=t("./NodeBufferReader"),d=t("./Uint8ArrayReader");f.exports=function(h){var b=i.getTypeOf(h);return i.checkSupport(b),b!=="string"||n.uint8array?b==="nodebuffer"?new c(h):n.uint8array?new d(i.transformTo("uint8array",h)):new e(i.transformTo("array",h)):new a(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,f,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,f,s){var i=t("./GenericWorker"),n=t("../utils");function e(a){i.call(this,"ConvertWorker to "+a),this.destType=a}n.inherits(e,i),e.prototype.processChunk=function(a){this.push({data:n.transformTo(this.destType,a.data),meta:a.meta})},f.exports=e},{"../utils":32,"./GenericWorker":28}],25:[function(t,f,s){var i=t("./GenericWorker"),n=t("../crc32");function e(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(e,i),e.prototype.processChunk=function(a){this.streamInfo.crc32=n(a.data,this.streamInfo.crc32||0),this.push(a)},f.exports=e},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,f,s){var i=t("../utils"),n=t("./GenericWorker");function e(a){n.call(this,"DataLengthProbe for "+a),this.propName=a,this.withStreamInfo(a,0)}i.inherits(e,n),e.prototype.processChunk=function(a){if(a){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+a.data.length}n.prototype.processChunk.call(this,a)},f.exports=e},{"../utils":32,"./GenericWorker":28}],27:[function(t,f,s){var i=t("../utils"),n=t("./GenericWorker");function e(a){n.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,a.then(function(d){c.dataIsReady=!0,c.data=d,c.max=d&&d.length||0,c.type=i.getTypeOf(d),c.isPaused||c._tickAndRepeat()},function(d){c.error(d)})}i.inherits(e,n),e.prototype.cleanUp=function(){n.prototype.cleanUp.call(this),this.data=null},e.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},e.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},e.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var a=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":a=this.data.substring(this.index,c);break;case"uint8array":a=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":a=this.data.slice(this.index,c)}return this.index=c,this.push({data:a,meta:{percent:this.max?this.index/this.max*100:0}})},f.exports=e},{"../utils":32,"./GenericWorker":28}],28:[function(t,f,s){function i(n){this.name=n||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(n){this.emit("data",n)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(n){this.emit("error",n)}return!0},error:function(n){return!this.isFinished&&(this.isPaused?this.generatedError=n:(this.isFinished=!0,this.emit("error",n),this.previous&&this.previous.error(n),this.cleanUp()),!0)},on:function(n,e){return this._listeners[n].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(n,e){if(this._listeners[n])for(var a=0;a<this._listeners[n].length;a++)this._listeners[n][a].call(this,e)},pipe:function(n){return n.registerPrevious(this)},registerPrevious:function(n){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=n.streamInfo,this.mergeStreamInfo(),this.previous=n;var e=this;return n.on("data",function(a){e.processChunk(a)}),n.on("end",function(){e.end()}),n.on("error",function(a){e.error(a)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var n=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),n=!0),this.previous&&this.previous.resume(),!n},flush:function(){},processChunk:function(n){this.push(n)},withStreamInfo:function(n,e){return this.extraStreamInfo[n]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var n in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,n)&&(this.streamInfo[n]=this.extraStreamInfo[n])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var n="Worker "+this.name;return this.previous?this.previous+" -> "+n:n}},f.exports=i},{}],29:[function(t,f,s){var i=t("../utils"),n=t("./ConvertWorker"),e=t("./GenericWorker"),a=t("../base64"),c=t("../support"),d=t("../external"),h=null;if(c.nodestream)try{h=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function b(v,m){return new d.Promise(function(y,_){var S=[],k=v._internalType,x=v._outputType,z=v._mimeType;v.on("data",function(N,L){S.push(N),m&&m(L)}).on("error",function(N){S=[],_(N)}).on("end",function(){try{var N=function(L,Z,D){switch(L){case"blob":return i.newBlob(i.transformTo("arraybuffer",Z),D);case"base64":return a.encode(Z);default:return i.transformTo(L,Z)}}(x,function(L,Z){var D,H=0,et=null,C=0;for(D=0;D<Z.length;D++)C+=Z[D].length;switch(L){case"string":return Z.join("");case"array":return Array.prototype.concat.apply([],Z);case"uint8array":for(et=new Uint8Array(C),D=0;D<Z.length;D++)et.set(Z[D],H),H+=Z[D].length;return et;case"nodebuffer":return Buffer.concat(Z);default:throw new Error("concat : unsupported type '"+L+"'")}}(k,S),z);y(N)}catch(L){_(L)}S=[]}).resume()})}function p(v,m,y){var _=m;switch(m){case"blob":case"arraybuffer":_="uint8array";break;case"base64":_="string"}try{this._internalType=_,this._outputType=m,this._mimeType=y,i.checkSupport(_),this._worker=v.pipe(new n(_)),v.lock()}catch(S){this._worker=new e("error"),this._worker.error(S)}}p.prototype={accumulate:function(v){return b(this,v)},on:function(v,m){var y=this;return v==="data"?this._worker.on(v,function(_){m.call(y,_.data,_.meta)}):this._worker.on(v,function(){i.delay(m,arguments,y)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},v)}},f.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,f,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var i=new ArrayBuffer(0);try{s.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);n.append(i),s.blob=n.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!t("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(t,f,s){for(var i=t("./utils"),n=t("./support"),e=t("./nodejsUtils"),a=t("./stream/GenericWorker"),c=new Array(256),d=0;d<256;d++)c[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;c[254]=c[254]=1;function h(){a.call(this,"utf-8 decode"),this.leftOver=null}function b(){a.call(this,"utf-8 encode")}s.utf8encode=function(p){return n.nodebuffer?e.newBufferFrom(p,"utf-8"):function(v){var m,y,_,S,k,x=v.length,z=0;for(S=0;S<x;S++)(64512&(y=v.charCodeAt(S)))==55296&&S+1<x&&(64512&(_=v.charCodeAt(S+1)))==56320&&(y=65536+(y-55296<<10)+(_-56320),S++),z+=y<128?1:y<2048?2:y<65536?3:4;for(m=n.uint8array?new Uint8Array(z):new Array(z),S=k=0;k<z;S++)(64512&(y=v.charCodeAt(S)))==55296&&S+1<x&&(64512&(_=v.charCodeAt(S+1)))==56320&&(y=65536+(y-55296<<10)+(_-56320),S++),y<128?m[k++]=y:(y<2048?m[k++]=192|y>>>6:(y<65536?m[k++]=224|y>>>12:(m[k++]=240|y>>>18,m[k++]=128|y>>>12&63),m[k++]=128|y>>>6&63),m[k++]=128|63&y);return m}(p)},s.utf8decode=function(p){return n.nodebuffer?i.transformTo("nodebuffer",p).toString("utf-8"):function(v){var m,y,_,S,k=v.length,x=new Array(2*k);for(m=y=0;m<k;)if((_=v[m++])<128)x[y++]=_;else if(4<(S=c[_]))x[y++]=65533,m+=S-1;else{for(_&=S===2?31:S===3?15:7;1<S&&m<k;)_=_<<6|63&v[m++],S--;1<S?x[y++]=65533:_<65536?x[y++]=_:(_-=65536,x[y++]=55296|_>>10&1023,x[y++]=56320|1023&_)}return x.length!==y&&(x.subarray?x=x.subarray(0,y):x.length=y),i.applyFromCharCode(x)}(p=i.transformTo(n.uint8array?"uint8array":"array",p))},i.inherits(h,a),h.prototype.processChunk=function(p){var v=i.transformTo(n.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(n.uint8array){var m=v;(v=new Uint8Array(m.length+this.leftOver.length)).set(this.leftOver,0),v.set(m,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var y=function(S,k){var x;for((k=k||S.length)>S.length&&(k=S.length),x=k-1;0<=x&&(192&S[x])==128;)x--;return x<0||x===0?k:x+c[S[x]]>k?x:k}(v),_=v;y!==v.length&&(n.uint8array?(_=v.subarray(0,y),this.leftOver=v.subarray(y,v.length)):(_=v.slice(0,y),this.leftOver=v.slice(y,v.length))),this.push({data:s.utf8decode(_),meta:p.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=h,i.inherits(b,a),b.prototype.processChunk=function(p){this.push({data:s.utf8encode(p.data),meta:p.meta})},s.Utf8EncodeWorker=b},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,f,s){var i=t("./support"),n=t("./base64"),e=t("./nodejsUtils"),a=t("./external");function c(m){return m}function d(m,y){for(var _=0;_<m.length;++_)y[_]=255&m.charCodeAt(_);return y}t("setimmediate"),s.newBlob=function(m,y){s.checkSupport("blob");try{return new Blob([m],{type:y})}catch{try{var _=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return _.append(m),_.getBlob(y)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(m,y,_){var S=[],k=0,x=m.length;if(x<=_)return String.fromCharCode.apply(null,m);for(;k<x;)y==="array"||y==="nodebuffer"?S.push(String.fromCharCode.apply(null,m.slice(k,Math.min(k+_,x)))):S.push(String.fromCharCode.apply(null,m.subarray(k,Math.min(k+_,x)))),k+=_;return S.join("")},stringifyByChar:function(m){for(var y="",_=0;_<m.length;_++)y+=String.fromCharCode(m[_]);return y},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,e.allocBuffer(1)).length===1}catch{return!1}}()}};function b(m){var y=65536,_=s.getTypeOf(m),S=!0;if(_==="uint8array"?S=h.applyCanBeUsed.uint8array:_==="nodebuffer"&&(S=h.applyCanBeUsed.nodebuffer),S)for(;1<y;)try{return h.stringifyByChunk(m,_,y)}catch{y=Math.floor(y/2)}return h.stringifyByChar(m)}function p(m,y){for(var _=0;_<m.length;_++)y[_]=m[_];return y}s.applyFromCharCode=b;var v={};v.string={string:c,array:function(m){return d(m,new Array(m.length))},arraybuffer:function(m){return v.string.uint8array(m).buffer},uint8array:function(m){return d(m,new Uint8Array(m.length))},nodebuffer:function(m){return d(m,e.allocBuffer(m.length))}},v.array={string:b,array:c,arraybuffer:function(m){return new Uint8Array(m).buffer},uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return e.newBufferFrom(m)}},v.arraybuffer={string:function(m){return b(new Uint8Array(m))},array:function(m){return p(new Uint8Array(m),new Array(m.byteLength))},arraybuffer:c,uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return e.newBufferFrom(new Uint8Array(m))}},v.uint8array={string:b,array:function(m){return p(m,new Array(m.length))},arraybuffer:function(m){return m.buffer},uint8array:c,nodebuffer:function(m){return e.newBufferFrom(m)}},v.nodebuffer={string:b,array:function(m){return p(m,new Array(m.length))},arraybuffer:function(m){return v.nodebuffer.uint8array(m).buffer},uint8array:function(m){return p(m,new Uint8Array(m.length))},nodebuffer:c},s.transformTo=function(m,y){if(y=y||"",!m)return y;s.checkSupport(m);var _=s.getTypeOf(y);return v[_][m](y)},s.resolve=function(m){for(var y=m.split("/"),_=[],S=0;S<y.length;S++){var k=y[S];k==="."||k===""&&S!==0&&S!==y.length-1||(k===".."?_.pop():_.push(k))}return _.join("/")},s.getTypeOf=function(m){return typeof m=="string"?"string":Object.prototype.toString.call(m)==="[object Array]"?"array":i.nodebuffer&&e.isBuffer(m)?"nodebuffer":i.uint8array&&m instanceof Uint8Array?"uint8array":i.arraybuffer&&m instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(m){if(!i[m.toLowerCase()])throw new Error(m+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(m){var y,_,S="";for(_=0;_<(m||"").length;_++)S+="\\x"+((y=m.charCodeAt(_))<16?"0":"")+y.toString(16).toUpperCase();return S},s.delay=function(m,y,_){setImmediate(function(){m.apply(_||null,y||[])})},s.inherits=function(m,y){function _(){}_.prototype=y.prototype,m.prototype=new _},s.extend=function(){var m,y,_={};for(m=0;m<arguments.length;m++)for(y in arguments[m])Object.prototype.hasOwnProperty.call(arguments[m],y)&&_[y]===void 0&&(_[y]=arguments[m][y]);return _},s.prepareContent=function(m,y,_,S,k){return a.Promise.resolve(y).then(function(x){return i.blob&&(x instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(x))!==-1)&&typeof FileReader<"u"?new a.Promise(function(z,N){var L=new FileReader;L.onload=function(Z){z(Z.target.result)},L.onerror=function(Z){N(Z.target.error)},L.readAsArrayBuffer(x)}):x}).then(function(x){var z=s.getTypeOf(x);return z?(z==="arraybuffer"?x=s.transformTo("uint8array",x):z==="string"&&(k?x=n.decode(x):_&&S!==!0&&(x=function(N){return d(N,i.uint8array?new Uint8Array(N.length):new Array(N.length))}(x))),x):a.Promise.reject(new Error("Can't read the data of '"+m+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,f,s){var i=t("./reader/readerFor"),n=t("./utils"),e=t("./signature"),a=t("./zipEntry"),c=t("./support");function d(h){this.files=[],this.loadOptions=h}d.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+n.pretty(b)+", expected "+n.pretty(h)+")")}},isSignature:function(h,b){var p=this.reader.index;this.reader.setIndex(h);var v=this.reader.readString(4)===b;return this.reader.setIndex(p),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),b=c.uint8array?"uint8array":"array",p=n.transformTo(b,h);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,b,p,v=this.zip64EndOfCentralSize-44;0<v;)h=this.reader.readInt(2),b=this.reader.readInt(4),p=this.reader.readData(b),this.zip64ExtensibleData[h]={id:h,length:b,value:p}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,b;for(h=0;h<this.files.length;h++)b=this.files[h],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(e.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(e.CENTRAL_FILE_HEADER);)(h=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(e.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,e.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var b=h;if(this.checkSignature(e.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===n.MAX_VALUE_16BITS||this.diskWithCentralDirStart===n.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===n.MAX_VALUE_16BITS||this.centralDirRecords===n.MAX_VALUE_16BITS||this.centralDirSize===n.MAX_VALUE_32BITS||this.centralDirOffset===n.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(e.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(e.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,e.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(e.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(e.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var p=this.centralDirOffset+this.centralDirSize;this.zip64&&(p+=20,p+=12+this.zip64EndOfCentralSize);var v=b-p;if(0<v)this.isSignature(b,e.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(h){this.reader=i(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},f.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,f,s){var i=t("./reader/readerFor"),n=t("./utils"),e=t("./compressedObject"),a=t("./crc32"),c=t("./utf8"),d=t("./compressions"),h=t("./support");function b(p,v){this.options=p,this.loadOptions=v}b.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(p){var v,m;if(p.skip(22),this.fileNameLength=p.readInt(2),m=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(y){for(var _ in d)if(Object.prototype.hasOwnProperty.call(d,_)&&d[_].magic===y)return d[_];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+n.pretty(this.compressionMethod)+" unknown (inner file : "+n.transformTo("string",this.fileName)+")");this.decompressed=new e(this.compressedSize,this.uncompressedSize,this.crc32,v,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var v=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(v),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),p==0&&(this.dosPermissions=63&this.externalFileAttributes),p==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var p=i(this.extraFields[1].value);this.uncompressedSize===n.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===n.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===n.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===n.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var v,m,y,_=p.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});p.index+4<_;)v=p.readInt(2),m=p.readInt(2),y=p.readData(m),this.extraFields[v]={id:v,length:m,value:y};p.setIndex(_)},handleUTF8:function(){var p=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var m=n.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var y=this.findExtraFieldUnicodeComment();if(y!==null)this.fileCommentStr=y;else{var _=n.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(_)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var v=i(p.value);return v.readInt(1)!==1||a(this.fileName)!==v.readInt(4)?null:c.utf8decode(v.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var v=i(p.value);return v.readInt(1)!==1||a(this.fileComment)!==v.readInt(4)?null:c.utf8decode(v.readData(p.length-5))}return null}},f.exports=b},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,f,s){function i(v,m,y){this.name=v,this.dir=y.dir,this.date=y.date,this.comment=y.comment,this.unixPermissions=y.unixPermissions,this.dosPermissions=y.dosPermissions,this._data=m,this._dataBinary=y.binary,this.options={compression:y.compression,compressionOptions:y.compressionOptions}}var n=t("./stream/StreamHelper"),e=t("./stream/DataWorker"),a=t("./utf8"),c=t("./compressedObject"),d=t("./stream/GenericWorker");i.prototype={internalStream:function(v){var m=null,y="string";try{if(!v)throw new Error("No output type specified.");var _=(y=v.toLowerCase())==="string"||y==="text";y!=="binarystring"&&y!=="text"||(y="string"),m=this._decompressWorker();var S=!this._dataBinary;S&&!_&&(m=m.pipe(new a.Utf8EncodeWorker)),!S&&_&&(m=m.pipe(new a.Utf8DecodeWorker))}catch(k){(m=new d("error")).error(k)}return new n(m,y,"")},async:function(v,m){return this.internalStream(v).accumulate(m)},nodeStream:function(v,m){return this.internalStream(v||"nodebuffer").toNodejsStream(m)},_compressWorker:function(v,m){if(this._data instanceof c&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var y=this._decompressWorker();return this._dataBinary||(y=y.pipe(new a.Utf8EncodeWorker)),c.createWorkerFrom(y,v,m)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof d?this._data:new e(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],b=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<h.length;p++)i.prototype[h[p]]=b;f.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,f,s){(function(i){var n,e,a=i.MutationObserver||i.WebKitMutationObserver;if(a){var c=0,d=new a(v),h=i.document.createTextNode("");d.observe(h,{characterData:!0}),n=function(){h.data=c=++c%2}}else if(i.setImmediate||i.MessageChannel===void 0)n="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var m=i.document.createElement("script");m.onreadystatechange=function(){v(),m.onreadystatechange=null,m.parentNode.removeChild(m),m=null},i.document.documentElement.appendChild(m)}:function(){setTimeout(v,0)};else{var b=new i.MessageChannel;b.port1.onmessage=v,n=function(){b.port2.postMessage(0)}}var p=[];function v(){var m,y;e=!0;for(var _=p.length;_;){for(y=p,p=[],m=-1;++m<_;)y[m]();_=p.length}e=!1}f.exports=function(m){p.push(m)!==1||e||n()}}).call(this,typeof ie<"u"?ie:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,f,s){var i=t("immediate");function n(){}var e={},a=["REJECTED"],c=["FULFILLED"],d=["PENDING"];function h(_){if(typeof _!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,_!==n&&m(this,_)}function b(_,S,k){this.promise=_,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof k=="function"&&(this.onRejected=k,this.callRejected=this.otherCallRejected)}function p(_,S,k){i(function(){var x;try{x=S(k)}catch(z){return e.reject(_,z)}x===_?e.reject(_,new TypeError("Cannot resolve promise with itself")):e.resolve(_,x)})}function v(_){var S=_&&_.then;if(_&&(typeof _=="object"||typeof _=="function")&&typeof S=="function")return function(){S.apply(_,arguments)}}function m(_,S){var k=!1;function x(L){k||(k=!0,e.reject(_,L))}function z(L){k||(k=!0,e.resolve(_,L))}var N=y(function(){S(z,x)});N.status==="error"&&x(N.value)}function y(_,S){var k={};try{k.value=_(S),k.status="success"}catch(x){k.status="error",k.value=x}return k}(f.exports=h).prototype.finally=function(_){if(typeof _!="function")return this;var S=this.constructor;return this.then(function(k){return S.resolve(_()).then(function(){return k})},function(k){return S.resolve(_()).then(function(){throw k})})},h.prototype.catch=function(_){return this.then(null,_)},h.prototype.then=function(_,S){if(typeof _!="function"&&this.state===c||typeof S!="function"&&this.state===a)return this;var k=new this.constructor(n);return this.state!==d?p(k,this.state===c?_:S,this.outcome):this.queue.push(new b(k,_,S)),k},b.prototype.callFulfilled=function(_){e.resolve(this.promise,_)},b.prototype.otherCallFulfilled=function(_){p(this.promise,this.onFulfilled,_)},b.prototype.callRejected=function(_){e.reject(this.promise,_)},b.prototype.otherCallRejected=function(_){p(this.promise,this.onRejected,_)},e.resolve=function(_,S){var k=y(v,S);if(k.status==="error")return e.reject(_,k.value);var x=k.value;if(x)m(_,x);else{_.state=c,_.outcome=S;for(var z=-1,N=_.queue.length;++z<N;)_.queue[z].callFulfilled(S)}return _},e.reject=function(_,S){_.state=a,_.outcome=S;for(var k=-1,x=_.queue.length;++k<x;)_.queue[k].callRejected(S);return _},h.resolve=function(_){return _ instanceof this?_:e.resolve(new this(n),_)},h.reject=function(_){var S=new this(n);return e.reject(S,_)},h.all=function(_){var S=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=_.length,x=!1;if(!k)return this.resolve([]);for(var z=new Array(k),N=0,L=-1,Z=new this(n);++L<k;)D(_[L],L);return Z;function D(H,et){S.resolve(H).then(function(C){z[et]=C,++N!==k||x||(x=!0,e.resolve(Z,z))},function(C){x||(x=!0,e.reject(Z,C))})}},h.race=function(_){var S=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=_.length,x=!1;if(!k)return this.resolve([]);for(var z=-1,N=new this(n);++z<k;)L=_[z],S.resolve(L).then(function(Z){x||(x=!0,e.resolve(N,Z))},function(Z){x||(x=!0,e.reject(N,Z))});var L;return N}},{immediate:36}],38:[function(t,f,s){var i={};(0,t("./lib/utils/common").assign)(i,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),f.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,f,s){var i=t("./zlib/deflate"),n=t("./utils/common"),e=t("./utils/strings"),a=t("./zlib/messages"),c=t("./zlib/zstream"),d=Object.prototype.toString,h=0,b=-1,p=0,v=8;function m(_){if(!(this instanceof m))return new m(_);this.options=n.assign({level:b,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},_||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var k=i.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(k!==h)throw new Error(a[k]);if(S.header&&i.deflateSetHeader(this.strm,S.header),S.dictionary){var x;if(x=typeof S.dictionary=="string"?e.string2buf(S.dictionary):d.call(S.dictionary)==="[object ArrayBuffer]"?new Uint8Array(S.dictionary):S.dictionary,(k=i.deflateSetDictionary(this.strm,x))!==h)throw new Error(a[k]);this._dict_set=!0}}function y(_,S){var k=new m(S);if(k.push(_,!0),k.err)throw k.msg||a[k.err];return k.result}m.prototype.push=function(_,S){var k,x,z=this.strm,N=this.options.chunkSize;if(this.ended)return!1;x=S===~~S?S:S===!0?4:0,typeof _=="string"?z.input=e.string2buf(_):d.call(_)==="[object ArrayBuffer]"?z.input=new Uint8Array(_):z.input=_,z.next_in=0,z.avail_in=z.input.length;do{if(z.avail_out===0&&(z.output=new n.Buf8(N),z.next_out=0,z.avail_out=N),(k=i.deflate(z,x))!==1&&k!==h)return this.onEnd(k),!(this.ended=!0);z.avail_out!==0&&(z.avail_in!==0||x!==4&&x!==2)||(this.options.to==="string"?this.onData(e.buf2binstring(n.shrinkBuf(z.output,z.next_out))):this.onData(n.shrinkBuf(z.output,z.next_out)))}while((0<z.avail_in||z.avail_out===0)&&k!==1);return x===4?(k=i.deflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===h):x!==2||(this.onEnd(h),!(z.avail_out=0))},m.prototype.onData=function(_){this.chunks.push(_)},m.prototype.onEnd=function(_){_===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg},s.Deflate=m,s.deflate=y,s.deflateRaw=function(_,S){return(S=S||{}).raw=!0,y(_,S)},s.gzip=function(_,S){return(S=S||{}).gzip=!0,y(_,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,f,s){var i=t("./zlib/inflate"),n=t("./utils/common"),e=t("./utils/strings"),a=t("./zlib/constants"),c=t("./zlib/messages"),d=t("./zlib/zstream"),h=t("./zlib/gzheader"),b=Object.prototype.toString;function p(m){if(!(this instanceof p))return new p(m);this.options=n.assign({chunkSize:16384,windowBits:0,to:""},m||{});var y=this.options;y.raw&&0<=y.windowBits&&y.windowBits<16&&(y.windowBits=-y.windowBits,y.windowBits===0&&(y.windowBits=-15)),!(0<=y.windowBits&&y.windowBits<16)||m&&m.windowBits||(y.windowBits+=32),15<y.windowBits&&y.windowBits<48&&(15&y.windowBits)==0&&(y.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var _=i.inflateInit2(this.strm,y.windowBits);if(_!==a.Z_OK)throw new Error(c[_]);this.header=new h,i.inflateGetHeader(this.strm,this.header)}function v(m,y){var _=new p(y);if(_.push(m,!0),_.err)throw _.msg||c[_.err];return _.result}p.prototype.push=function(m,y){var _,S,k,x,z,N,L=this.strm,Z=this.options.chunkSize,D=this.options.dictionary,H=!1;if(this.ended)return!1;S=y===~~y?y:y===!0?a.Z_FINISH:a.Z_NO_FLUSH,typeof m=="string"?L.input=e.binstring2buf(m):b.call(m)==="[object ArrayBuffer]"?L.input=new Uint8Array(m):L.input=m,L.next_in=0,L.avail_in=L.input.length;do{if(L.avail_out===0&&(L.output=new n.Buf8(Z),L.next_out=0,L.avail_out=Z),(_=i.inflate(L,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&D&&(N=typeof D=="string"?e.string2buf(D):b.call(D)==="[object ArrayBuffer]"?new Uint8Array(D):D,_=i.inflateSetDictionary(this.strm,N)),_===a.Z_BUF_ERROR&&H===!0&&(_=a.Z_OK,H=!1),_!==a.Z_STREAM_END&&_!==a.Z_OK)return this.onEnd(_),!(this.ended=!0);L.next_out&&(L.avail_out!==0&&_!==a.Z_STREAM_END&&(L.avail_in!==0||S!==a.Z_FINISH&&S!==a.Z_SYNC_FLUSH)||(this.options.to==="string"?(k=e.utf8border(L.output,L.next_out),x=L.next_out-k,z=e.buf2string(L.output,k),L.next_out=x,L.avail_out=Z-x,x&&n.arraySet(L.output,L.output,k,x,0),this.onData(z)):this.onData(n.shrinkBuf(L.output,L.next_out)))),L.avail_in===0&&L.avail_out===0&&(H=!0)}while((0<L.avail_in||L.avail_out===0)&&_!==a.Z_STREAM_END);return _===a.Z_STREAM_END&&(S=a.Z_FINISH),S===a.Z_FINISH?(_=i.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===a.Z_OK):S!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(L.avail_out=0))},p.prototype.onData=function(m){this.chunks.push(m)},p.prototype.onEnd=function(m){m===a.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},s.Inflate=p,s.inflate=v,s.inflateRaw=function(m,y){return(y=y||{}).raw=!0,v(m,y)},s.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,f,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(a){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var d=c.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var h in d)d.hasOwnProperty(h)&&(a[h]=d[h])}}return a},s.shrinkBuf=function(a,c){return a.length===c?a:a.subarray?a.subarray(0,c):(a.length=c,a)};var n={arraySet:function(a,c,d,h,b){if(c.subarray&&a.subarray)a.set(c.subarray(d,d+h),b);else for(var p=0;p<h;p++)a[b+p]=c[d+p]},flattenChunks:function(a){var c,d,h,b,p,v;for(c=h=0,d=a.length;c<d;c++)h+=a[c].length;for(v=new Uint8Array(h),c=b=0,d=a.length;c<d;c++)p=a[c],v.set(p,b),b+=p.length;return v}},e={arraySet:function(a,c,d,h,b){for(var p=0;p<h;p++)a[b+p]=c[d+p]},flattenChunks:function(a){return[].concat.apply([],a)}};s.setTyped=function(a){a?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,n)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,e))},s.setTyped(i)},{}],42:[function(t,f,s){var i=t("./common"),n=!0,e=!0;try{String.fromCharCode.apply(null,[0])}catch{n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{e=!1}for(var a=new i.Buf8(256),c=0;c<256;c++)a[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function d(h,b){if(b<65537&&(h.subarray&&e||!h.subarray&&n))return String.fromCharCode.apply(null,i.shrinkBuf(h,b));for(var p="",v=0;v<b;v++)p+=String.fromCharCode(h[v]);return p}a[254]=a[254]=1,s.string2buf=function(h){var b,p,v,m,y,_=h.length,S=0;for(m=0;m<_;m++)(64512&(p=h.charCodeAt(m)))==55296&&m+1<_&&(64512&(v=h.charCodeAt(m+1)))==56320&&(p=65536+(p-55296<<10)+(v-56320),m++),S+=p<128?1:p<2048?2:p<65536?3:4;for(b=new i.Buf8(S),m=y=0;y<S;m++)(64512&(p=h.charCodeAt(m)))==55296&&m+1<_&&(64512&(v=h.charCodeAt(m+1)))==56320&&(p=65536+(p-55296<<10)+(v-56320),m++),p<128?b[y++]=p:(p<2048?b[y++]=192|p>>>6:(p<65536?b[y++]=224|p>>>12:(b[y++]=240|p>>>18,b[y++]=128|p>>>12&63),b[y++]=128|p>>>6&63),b[y++]=128|63&p);return b},s.buf2binstring=function(h){return d(h,h.length)},s.binstring2buf=function(h){for(var b=new i.Buf8(h.length),p=0,v=b.length;p<v;p++)b[p]=h.charCodeAt(p);return b},s.buf2string=function(h,b){var p,v,m,y,_=b||h.length,S=new Array(2*_);for(p=v=0;p<_;)if((m=h[p++])<128)S[v++]=m;else if(4<(y=a[m]))S[v++]=65533,p+=y-1;else{for(m&=y===2?31:y===3?15:7;1<y&&p<_;)m=m<<6|63&h[p++],y--;1<y?S[v++]=65533:m<65536?S[v++]=m:(m-=65536,S[v++]=55296|m>>10&1023,S[v++]=56320|1023&m)}return d(S,v)},s.utf8border=function(h,b){var p;for((b=b||h.length)>h.length&&(b=h.length),p=b-1;0<=p&&(192&h[p])==128;)p--;return p<0||p===0?b:p+a[h[p]]>b?p:b}},{"./common":41}],43:[function(t,f,s){f.exports=function(i,n,e,a){for(var c=65535&i|0,d=i>>>16&65535|0,h=0;e!==0;){for(e-=h=2e3<e?2e3:e;d=d+(c=c+n[a++]|0)|0,--h;);c%=65521,d%=65521}return c|d<<16|0}},{}],44:[function(t,f,s){f.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,f,s){var i=function(){for(var n,e=[],a=0;a<256;a++){n=a;for(var c=0;c<8;c++)n=1&n?3988292384^n>>>1:n>>>1;e[a]=n}return e}();f.exports=function(n,e,a,c){var d=i,h=c+a;n^=-1;for(var b=c;b<h;b++)n=n>>>8^d[255&(n^e[b])];return-1^n}},{}],46:[function(t,f,s){var i,n=t("../utils/common"),e=t("./trees"),a=t("./adler32"),c=t("./crc32"),d=t("./messages"),h=0,b=4,p=0,v=-2,m=-1,y=4,_=2,S=8,k=9,x=286,z=30,N=19,L=2*x+1,Z=15,D=3,H=258,et=H+D+1,C=42,j=113,l=1,P=2,it=3,A=4;function Y(r,F){return r.msg=d[F],F}function B(r){return(r<<1)-(4<r?9:0)}function tt(r){for(var F=r.length;0<=--F;)r[F]=0}function T(r){var F=r.state,R=F.pending;R>r.avail_out&&(R=r.avail_out),R!==0&&(n.arraySet(r.output,F.pending_buf,F.pending_out,R,r.next_out),r.next_out+=R,F.pending_out+=R,r.total_out+=R,r.avail_out-=R,F.pending-=R,F.pending===0&&(F.pending_out=0))}function O(r,F){e._tr_flush_block(r,0<=r.block_start?r.block_start:-1,r.strstart-r.block_start,F),r.block_start=r.strstart,T(r.strm)}function nt(r,F){r.pending_buf[r.pending++]=F}function J(r,F){r.pending_buf[r.pending++]=F>>>8&255,r.pending_buf[r.pending++]=255&F}function K(r,F){var R,w,g=r.max_chain_length,E=r.strstart,U=r.prev_length,W=r.nice_match,I=r.strstart>r.w_size-et?r.strstart-(r.w_size-et):0,$=r.window,X=r.w_mask,M=r.prev,V=r.strstart+H,Q=$[E+U-1],st=$[E+U];r.prev_length>=r.good_match&&(g>>=2),W>r.lookahead&&(W=r.lookahead);do if($[(R=F)+U]===st&&$[R+U-1]===Q&&$[R]===$[E]&&$[++R]===$[E+1]){E+=2,R++;do;while($[++E]===$[++R]&&$[++E]===$[++R]&&$[++E]===$[++R]&&$[++E]===$[++R]&&$[++E]===$[++R]&&$[++E]===$[++R]&&$[++E]===$[++R]&&$[++E]===$[++R]&&E<V);if(w=H-(V-E),E=V-H,U<w){if(r.match_start=F,W<=(U=w))break;Q=$[E+U-1],st=$[E+U]}}while((F=M[F&X])>I&&--g!=0);return U<=r.lookahead?U:r.lookahead}function ut(r){var F,R,w,g,E,U,W,I,$,X,M=r.w_size;do{if(g=r.window_size-r.lookahead-r.strstart,r.strstart>=M+(M-et)){for(n.arraySet(r.window,r.window,M,M,0),r.match_start-=M,r.strstart-=M,r.block_start-=M,F=R=r.hash_size;w=r.head[--F],r.head[F]=M<=w?w-M:0,--R;);for(F=R=M;w=r.prev[--F],r.prev[F]=M<=w?w-M:0,--R;);g+=M}if(r.strm.avail_in===0)break;if(U=r.strm,W=r.window,I=r.strstart+r.lookahead,$=g,X=void 0,X=U.avail_in,$<X&&(X=$),R=X===0?0:(U.avail_in-=X,n.arraySet(W,U.input,U.next_in,X,I),U.state.wrap===1?U.adler=a(U.adler,W,X,I):U.state.wrap===2&&(U.adler=c(U.adler,W,X,I)),U.next_in+=X,U.total_in+=X,X),r.lookahead+=R,r.lookahead+r.insert>=D)for(E=r.strstart-r.insert,r.ins_h=r.window[E],r.ins_h=(r.ins_h<<r.hash_shift^r.window[E+1])&r.hash_mask;r.insert&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[E+D-1])&r.hash_mask,r.prev[E&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=E,E++,r.insert--,!(r.lookahead+r.insert<D)););}while(r.lookahead<et&&r.strm.avail_in!==0)}function ft(r,F){for(var R,w;;){if(r.lookahead<et){if(ut(r),r.lookahead<et&&F===h)return l;if(r.lookahead===0)break}if(R=0,r.lookahead>=D&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+D-1])&r.hash_mask,R=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),R!==0&&r.strstart-R<=r.w_size-et&&(r.match_length=K(r,R)),r.match_length>=D)if(w=e._tr_tally(r,r.strstart-r.match_start,r.match_length-D),r.lookahead-=r.match_length,r.match_length<=r.max_lazy_match&&r.lookahead>=D){for(r.match_length--;r.strstart++,r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+D-1])&r.hash_mask,R=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart,--r.match_length!=0;);r.strstart++}else r.strstart+=r.match_length,r.match_length=0,r.ins_h=r.window[r.strstart],r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+1])&r.hash_mask;else w=e._tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++;if(w&&(O(r,!1),r.strm.avail_out===0))return l}return r.insert=r.strstart<D-1?r.strstart:D-1,F===b?(O(r,!0),r.strm.avail_out===0?it:A):r.last_lit&&(O(r,!1),r.strm.avail_out===0)?l:P}function at(r,F){for(var R,w,g;;){if(r.lookahead<et){if(ut(r),r.lookahead<et&&F===h)return l;if(r.lookahead===0)break}if(R=0,r.lookahead>=D&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+D-1])&r.hash_mask,R=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),r.prev_length=r.match_length,r.prev_match=r.match_start,r.match_length=D-1,R!==0&&r.prev_length<r.max_lazy_match&&r.strstart-R<=r.w_size-et&&(r.match_length=K(r,R),r.match_length<=5&&(r.strategy===1||r.match_length===D&&4096<r.strstart-r.match_start)&&(r.match_length=D-1)),r.prev_length>=D&&r.match_length<=r.prev_length){for(g=r.strstart+r.lookahead-D,w=e._tr_tally(r,r.strstart-1-r.prev_match,r.prev_length-D),r.lookahead-=r.prev_length-1,r.prev_length-=2;++r.strstart<=g&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+D-1])&r.hash_mask,R=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),--r.prev_length!=0;);if(r.match_available=0,r.match_length=D-1,r.strstart++,w&&(O(r,!1),r.strm.avail_out===0))return l}else if(r.match_available){if((w=e._tr_tally(r,0,r.window[r.strstart-1]))&&O(r,!1),r.strstart++,r.lookahead--,r.strm.avail_out===0)return l}else r.match_available=1,r.strstart++,r.lookahead--}return r.match_available&&(w=e._tr_tally(r,0,r.window[r.strstart-1]),r.match_available=0),r.insert=r.strstart<D-1?r.strstart:D-1,F===b?(O(r,!0),r.strm.avail_out===0?it:A):r.last_lit&&(O(r,!1),r.strm.avail_out===0)?l:P}function ot(r,F,R,w,g){this.good_length=r,this.max_lazy=F,this.nice_length=R,this.max_chain=w,this.func=g}function mt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new n.Buf16(2*L),this.dyn_dtree=new n.Buf16(2*(2*z+1)),this.bl_tree=new n.Buf16(2*(2*N+1)),tt(this.dyn_ltree),tt(this.dyn_dtree),tt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new n.Buf16(Z+1),this.heap=new n.Buf16(2*x+1),tt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new n.Buf16(2*x+1),tt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ct(r){var F;return r&&r.state?(r.total_in=r.total_out=0,r.data_type=_,(F=r.state).pending=0,F.pending_out=0,F.wrap<0&&(F.wrap=-F.wrap),F.status=F.wrap?C:j,r.adler=F.wrap===2?0:1,F.last_flush=h,e._tr_init(F),p):Y(r,v)}function Et(r){var F=ct(r);return F===p&&function(R){R.window_size=2*R.w_size,tt(R.head),R.max_lazy_match=i[R.level].max_lazy,R.good_match=i[R.level].good_length,R.nice_match=i[R.level].nice_length,R.max_chain_length=i[R.level].max_chain,R.strstart=0,R.block_start=0,R.lookahead=0,R.insert=0,R.match_length=R.prev_length=D-1,R.match_available=0,R.ins_h=0}(r.state),F}function St(r,F,R,w,g,E){if(!r)return v;var U=1;if(F===m&&(F=6),w<0?(U=0,w=-w):15<w&&(U=2,w-=16),g<1||k<g||R!==S||w<8||15<w||F<0||9<F||E<0||y<E)return Y(r,v);w===8&&(w=9);var W=new mt;return(r.state=W).strm=r,W.wrap=U,W.gzhead=null,W.w_bits=w,W.w_size=1<<W.w_bits,W.w_mask=W.w_size-1,W.hash_bits=g+7,W.hash_size=1<<W.hash_bits,W.hash_mask=W.hash_size-1,W.hash_shift=~~((W.hash_bits+D-1)/D),W.window=new n.Buf8(2*W.w_size),W.head=new n.Buf16(W.hash_size),W.prev=new n.Buf16(W.w_size),W.lit_bufsize=1<<g+6,W.pending_buf_size=4*W.lit_bufsize,W.pending_buf=new n.Buf8(W.pending_buf_size),W.d_buf=1*W.lit_bufsize,W.l_buf=3*W.lit_bufsize,W.level=F,W.strategy=E,W.method=R,Et(r)}i=[new ot(0,0,0,0,function(r,F){var R=65535;for(R>r.pending_buf_size-5&&(R=r.pending_buf_size-5);;){if(r.lookahead<=1){if(ut(r),r.lookahead===0&&F===h)return l;if(r.lookahead===0)break}r.strstart+=r.lookahead,r.lookahead=0;var w=r.block_start+R;if((r.strstart===0||r.strstart>=w)&&(r.lookahead=r.strstart-w,r.strstart=w,O(r,!1),r.strm.avail_out===0)||r.strstart-r.block_start>=r.w_size-et&&(O(r,!1),r.strm.avail_out===0))return l}return r.insert=0,F===b?(O(r,!0),r.strm.avail_out===0?it:A):(r.strstart>r.block_start&&(O(r,!1),r.strm.avail_out),l)}),new ot(4,4,8,4,ft),new ot(4,5,16,8,ft),new ot(4,6,32,32,ft),new ot(4,4,16,16,at),new ot(8,16,32,32,at),new ot(8,16,128,128,at),new ot(8,32,128,256,at),new ot(32,128,258,1024,at),new ot(32,258,258,4096,at)],s.deflateInit=function(r,F){return St(r,F,S,15,8,0)},s.deflateInit2=St,s.deflateReset=Et,s.deflateResetKeep=ct,s.deflateSetHeader=function(r,F){return r&&r.state?r.state.wrap!==2?v:(r.state.gzhead=F,p):v},s.deflate=function(r,F){var R,w,g,E;if(!r||!r.state||5<F||F<0)return r?Y(r,v):v;if(w=r.state,!r.output||!r.input&&r.avail_in!==0||w.status===666&&F!==b)return Y(r,r.avail_out===0?-5:v);if(w.strm=r,R=w.last_flush,w.last_flush=F,w.status===C)if(w.wrap===2)r.adler=0,nt(w,31),nt(w,139),nt(w,8),w.gzhead?(nt(w,(w.gzhead.text?1:0)+(w.gzhead.hcrc?2:0)+(w.gzhead.extra?4:0)+(w.gzhead.name?8:0)+(w.gzhead.comment?16:0)),nt(w,255&w.gzhead.time),nt(w,w.gzhead.time>>8&255),nt(w,w.gzhead.time>>16&255),nt(w,w.gzhead.time>>24&255),nt(w,w.level===9?2:2<=w.strategy||w.level<2?4:0),nt(w,255&w.gzhead.os),w.gzhead.extra&&w.gzhead.extra.length&&(nt(w,255&w.gzhead.extra.length),nt(w,w.gzhead.extra.length>>8&255)),w.gzhead.hcrc&&(r.adler=c(r.adler,w.pending_buf,w.pending,0)),w.gzindex=0,w.status=69):(nt(w,0),nt(w,0),nt(w,0),nt(w,0),nt(w,0),nt(w,w.level===9?2:2<=w.strategy||w.level<2?4:0),nt(w,3),w.status=j);else{var U=S+(w.w_bits-8<<4)<<8;U|=(2<=w.strategy||w.level<2?0:w.level<6?1:w.level===6?2:3)<<6,w.strstart!==0&&(U|=32),U+=31-U%31,w.status=j,J(w,U),w.strstart!==0&&(J(w,r.adler>>>16),J(w,65535&r.adler)),r.adler=1}if(w.status===69)if(w.gzhead.extra){for(g=w.pending;w.gzindex<(65535&w.gzhead.extra.length)&&(w.pending!==w.pending_buf_size||(w.gzhead.hcrc&&w.pending>g&&(r.adler=c(r.adler,w.pending_buf,w.pending-g,g)),T(r),g=w.pending,w.pending!==w.pending_buf_size));)nt(w,255&w.gzhead.extra[w.gzindex]),w.gzindex++;w.gzhead.hcrc&&w.pending>g&&(r.adler=c(r.adler,w.pending_buf,w.pending-g,g)),w.gzindex===w.gzhead.extra.length&&(w.gzindex=0,w.status=73)}else w.status=73;if(w.status===73)if(w.gzhead.name){g=w.pending;do{if(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>g&&(r.adler=c(r.adler,w.pending_buf,w.pending-g,g)),T(r),g=w.pending,w.pending===w.pending_buf_size)){E=1;break}E=w.gzindex<w.gzhead.name.length?255&w.gzhead.name.charCodeAt(w.gzindex++):0,nt(w,E)}while(E!==0);w.gzhead.hcrc&&w.pending>g&&(r.adler=c(r.adler,w.pending_buf,w.pending-g,g)),E===0&&(w.gzindex=0,w.status=91)}else w.status=91;if(w.status===91)if(w.gzhead.comment){g=w.pending;do{if(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>g&&(r.adler=c(r.adler,w.pending_buf,w.pending-g,g)),T(r),g=w.pending,w.pending===w.pending_buf_size)){E=1;break}E=w.gzindex<w.gzhead.comment.length?255&w.gzhead.comment.charCodeAt(w.gzindex++):0,nt(w,E)}while(E!==0);w.gzhead.hcrc&&w.pending>g&&(r.adler=c(r.adler,w.pending_buf,w.pending-g,g)),E===0&&(w.status=103)}else w.status=103;if(w.status===103&&(w.gzhead.hcrc?(w.pending+2>w.pending_buf_size&&T(r),w.pending+2<=w.pending_buf_size&&(nt(w,255&r.adler),nt(w,r.adler>>8&255),r.adler=0,w.status=j)):w.status=j),w.pending!==0){if(T(r),r.avail_out===0)return w.last_flush=-1,p}else if(r.avail_in===0&&B(F)<=B(R)&&F!==b)return Y(r,-5);if(w.status===666&&r.avail_in!==0)return Y(r,-5);if(r.avail_in!==0||w.lookahead!==0||F!==h&&w.status!==666){var W=w.strategy===2?function(I,$){for(var X;;){if(I.lookahead===0&&(ut(I),I.lookahead===0)){if($===h)return l;break}if(I.match_length=0,X=e._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++,X&&(O(I,!1),I.strm.avail_out===0))return l}return I.insert=0,$===b?(O(I,!0),I.strm.avail_out===0?it:A):I.last_lit&&(O(I,!1),I.strm.avail_out===0)?l:P}(w,F):w.strategy===3?function(I,$){for(var X,M,V,Q,st=I.window;;){if(I.lookahead<=H){if(ut(I),I.lookahead<=H&&$===h)return l;if(I.lookahead===0)break}if(I.match_length=0,I.lookahead>=D&&0<I.strstart&&(M=st[V=I.strstart-1])===st[++V]&&M===st[++V]&&M===st[++V]){Q=I.strstart+H;do;while(M===st[++V]&&M===st[++V]&&M===st[++V]&&M===st[++V]&&M===st[++V]&&M===st[++V]&&M===st[++V]&&M===st[++V]&&V<Q);I.match_length=H-(Q-V),I.match_length>I.lookahead&&(I.match_length=I.lookahead)}if(I.match_length>=D?(X=e._tr_tally(I,1,I.match_length-D),I.lookahead-=I.match_length,I.strstart+=I.match_length,I.match_length=0):(X=e._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++),X&&(O(I,!1),I.strm.avail_out===0))return l}return I.insert=0,$===b?(O(I,!0),I.strm.avail_out===0?it:A):I.last_lit&&(O(I,!1),I.strm.avail_out===0)?l:P}(w,F):i[w.level].func(w,F);if(W!==it&&W!==A||(w.status=666),W===l||W===it)return r.avail_out===0&&(w.last_flush=-1),p;if(W===P&&(F===1?e._tr_align(w):F!==5&&(e._tr_stored_block(w,0,0,!1),F===3&&(tt(w.head),w.lookahead===0&&(w.strstart=0,w.block_start=0,w.insert=0))),T(r),r.avail_out===0))return w.last_flush=-1,p}return F!==b?p:w.wrap<=0?1:(w.wrap===2?(nt(w,255&r.adler),nt(w,r.adler>>8&255),nt(w,r.adler>>16&255),nt(w,r.adler>>24&255),nt(w,255&r.total_in),nt(w,r.total_in>>8&255),nt(w,r.total_in>>16&255),nt(w,r.total_in>>24&255)):(J(w,r.adler>>>16),J(w,65535&r.adler)),T(r),0<w.wrap&&(w.wrap=-w.wrap),w.pending!==0?p:1)},s.deflateEnd=function(r){var F;return r&&r.state?(F=r.state.status)!==C&&F!==69&&F!==73&&F!==91&&F!==103&&F!==j&&F!==666?Y(r,v):(r.state=null,F===j?Y(r,-3):p):v},s.deflateSetDictionary=function(r,F){var R,w,g,E,U,W,I,$,X=F.length;if(!r||!r.state||(E=(R=r.state).wrap)===2||E===1&&R.status!==C||R.lookahead)return v;for(E===1&&(r.adler=a(r.adler,F,X,0)),R.wrap=0,X>=R.w_size&&(E===0&&(tt(R.head),R.strstart=0,R.block_start=0,R.insert=0),$=new n.Buf8(R.w_size),n.arraySet($,F,X-R.w_size,R.w_size,0),F=$,X=R.w_size),U=r.avail_in,W=r.next_in,I=r.input,r.avail_in=X,r.next_in=0,r.input=F,ut(R);R.lookahead>=D;){for(w=R.strstart,g=R.lookahead-(D-1);R.ins_h=(R.ins_h<<R.hash_shift^R.window[w+D-1])&R.hash_mask,R.prev[w&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=w,w++,--g;);R.strstart=w,R.lookahead=D-1,ut(R)}return R.strstart+=R.lookahead,R.block_start=R.strstart,R.insert=R.lookahead,R.lookahead=0,R.match_length=R.prev_length=D-1,R.match_available=0,r.next_in=W,r.input=I,r.avail_in=U,R.wrap=E,p},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,f,s){f.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,f,s){f.exports=function(i,n){var e,a,c,d,h,b,p,v,m,y,_,S,k,x,z,N,L,Z,D,H,et,C,j,l,P;e=i.state,a=i.next_in,l=i.input,c=a+(i.avail_in-5),d=i.next_out,P=i.output,h=d-(n-i.avail_out),b=d+(i.avail_out-257),p=e.dmax,v=e.wsize,m=e.whave,y=e.wnext,_=e.window,S=e.hold,k=e.bits,x=e.lencode,z=e.distcode,N=(1<<e.lenbits)-1,L=(1<<e.distbits)-1;t:do{k<15&&(S+=l[a++]<<k,k+=8,S+=l[a++]<<k,k+=8),Z=x[S&N];e:for(;;){if(S>>>=D=Z>>>24,k-=D,(D=Z>>>16&255)===0)P[d++]=65535&Z;else{if(!(16&D)){if((64&D)==0){Z=x[(65535&Z)+(S&(1<<D)-1)];continue e}if(32&D){e.mode=12;break t}i.msg="invalid literal/length code",e.mode=30;break t}H=65535&Z,(D&=15)&&(k<D&&(S+=l[a++]<<k,k+=8),H+=S&(1<<D)-1,S>>>=D,k-=D),k<15&&(S+=l[a++]<<k,k+=8,S+=l[a++]<<k,k+=8),Z=z[S&L];r:for(;;){if(S>>>=D=Z>>>24,k-=D,!(16&(D=Z>>>16&255))){if((64&D)==0){Z=z[(65535&Z)+(S&(1<<D)-1)];continue r}i.msg="invalid distance code",e.mode=30;break t}if(et=65535&Z,k<(D&=15)&&(S+=l[a++]<<k,(k+=8)<D&&(S+=l[a++]<<k,k+=8)),p<(et+=S&(1<<D)-1)){i.msg="invalid distance too far back",e.mode=30;break t}if(S>>>=D,k-=D,(D=d-h)<et){if(m<(D=et-D)&&e.sane){i.msg="invalid distance too far back",e.mode=30;break t}if(j=_,(C=0)===y){if(C+=v-D,D<H){for(H-=D;P[d++]=_[C++],--D;);C=d-et,j=P}}else if(y<D){if(C+=v+y-D,(D-=y)<H){for(H-=D;P[d++]=_[C++],--D;);if(C=0,y<H){for(H-=D=y;P[d++]=_[C++],--D;);C=d-et,j=P}}}else if(C+=y-D,D<H){for(H-=D;P[d++]=_[C++],--D;);C=d-et,j=P}for(;2<H;)P[d++]=j[C++],P[d++]=j[C++],P[d++]=j[C++],H-=3;H&&(P[d++]=j[C++],1<H&&(P[d++]=j[C++]))}else{for(C=d-et;P[d++]=P[C++],P[d++]=P[C++],P[d++]=P[C++],2<(H-=3););H&&(P[d++]=P[C++],1<H&&(P[d++]=P[C++]))}break}}break}}while(a<c&&d<b);a-=H=k>>3,S&=(1<<(k-=H<<3))-1,i.next_in=a,i.next_out=d,i.avail_in=a<c?c-a+5:5-(a-c),i.avail_out=d<b?b-d+257:257-(d-b),e.hold=S,e.bits=k}},{}],49:[function(t,f,s){var i=t("../utils/common"),n=t("./adler32"),e=t("./crc32"),a=t("./inffast"),c=t("./inftrees"),d=1,h=2,b=0,p=-2,v=1,m=852,y=592;function _(C){return(C>>>24&255)+(C>>>8&65280)+((65280&C)<<8)+((255&C)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function k(C){var j;return C&&C.state?(j=C.state,C.total_in=C.total_out=j.total=0,C.msg="",j.wrap&&(C.adler=1&j.wrap),j.mode=v,j.last=0,j.havedict=0,j.dmax=32768,j.head=null,j.hold=0,j.bits=0,j.lencode=j.lendyn=new i.Buf32(m),j.distcode=j.distdyn=new i.Buf32(y),j.sane=1,j.back=-1,b):p}function x(C){var j;return C&&C.state?((j=C.state).wsize=0,j.whave=0,j.wnext=0,k(C)):p}function z(C,j){var l,P;return C&&C.state?(P=C.state,j<0?(l=0,j=-j):(l=1+(j>>4),j<48&&(j&=15)),j&&(j<8||15<j)?p:(P.window!==null&&P.wbits!==j&&(P.window=null),P.wrap=l,P.wbits=j,x(C))):p}function N(C,j){var l,P;return C?(P=new S,(C.state=P).window=null,(l=z(C,j))!==b&&(C.state=null),l):p}var L,Z,D=!0;function H(C){if(D){var j;for(L=new i.Buf32(512),Z=new i.Buf32(32),j=0;j<144;)C.lens[j++]=8;for(;j<256;)C.lens[j++]=9;for(;j<280;)C.lens[j++]=7;for(;j<288;)C.lens[j++]=8;for(c(d,C.lens,0,288,L,0,C.work,{bits:9}),j=0;j<32;)C.lens[j++]=5;c(h,C.lens,0,32,Z,0,C.work,{bits:5}),D=!1}C.lencode=L,C.lenbits=9,C.distcode=Z,C.distbits=5}function et(C,j,l,P){var it,A=C.state;return A.window===null&&(A.wsize=1<<A.wbits,A.wnext=0,A.whave=0,A.window=new i.Buf8(A.wsize)),P>=A.wsize?(i.arraySet(A.window,j,l-A.wsize,A.wsize,0),A.wnext=0,A.whave=A.wsize):(P<(it=A.wsize-A.wnext)&&(it=P),i.arraySet(A.window,j,l-P,it,A.wnext),(P-=it)?(i.arraySet(A.window,j,l-P,P,0),A.wnext=P,A.whave=A.wsize):(A.wnext+=it,A.wnext===A.wsize&&(A.wnext=0),A.whave<A.wsize&&(A.whave+=it))),0}s.inflateReset=x,s.inflateReset2=z,s.inflateResetKeep=k,s.inflateInit=function(C){return N(C,15)},s.inflateInit2=N,s.inflate=function(C,j){var l,P,it,A,Y,B,tt,T,O,nt,J,K,ut,ft,at,ot,mt,ct,Et,St,r,F,R,w,g=0,E=new i.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!C||!C.state||!C.output||!C.input&&C.avail_in!==0)return p;(l=C.state).mode===12&&(l.mode=13),Y=C.next_out,it=C.output,tt=C.avail_out,A=C.next_in,P=C.input,B=C.avail_in,T=l.hold,O=l.bits,nt=B,J=tt,F=b;t:for(;;)switch(l.mode){case v:if(l.wrap===0){l.mode=13;break}for(;O<16;){if(B===0)break t;B--,T+=P[A++]<<O,O+=8}if(2&l.wrap&&T===35615){E[l.check=0]=255&T,E[1]=T>>>8&255,l.check=e(l.check,E,2,0),O=T=0,l.mode=2;break}if(l.flags=0,l.head&&(l.head.done=!1),!(1&l.wrap)||(((255&T)<<8)+(T>>8))%31){C.msg="incorrect header check",l.mode=30;break}if((15&T)!=8){C.msg="unknown compression method",l.mode=30;break}if(O-=4,r=8+(15&(T>>>=4)),l.wbits===0)l.wbits=r;else if(r>l.wbits){C.msg="invalid window size",l.mode=30;break}l.dmax=1<<r,C.adler=l.check=1,l.mode=512&T?10:12,O=T=0;break;case 2:for(;O<16;){if(B===0)break t;B--,T+=P[A++]<<O,O+=8}if(l.flags=T,(255&l.flags)!=8){C.msg="unknown compression method",l.mode=30;break}if(57344&l.flags){C.msg="unknown header flags set",l.mode=30;break}l.head&&(l.head.text=T>>8&1),512&l.flags&&(E[0]=255&T,E[1]=T>>>8&255,l.check=e(l.check,E,2,0)),O=T=0,l.mode=3;case 3:for(;O<32;){if(B===0)break t;B--,T+=P[A++]<<O,O+=8}l.head&&(l.head.time=T),512&l.flags&&(E[0]=255&T,E[1]=T>>>8&255,E[2]=T>>>16&255,E[3]=T>>>24&255,l.check=e(l.check,E,4,0)),O=T=0,l.mode=4;case 4:for(;O<16;){if(B===0)break t;B--,T+=P[A++]<<O,O+=8}l.head&&(l.head.xflags=255&T,l.head.os=T>>8),512&l.flags&&(E[0]=255&T,E[1]=T>>>8&255,l.check=e(l.check,E,2,0)),O=T=0,l.mode=5;case 5:if(1024&l.flags){for(;O<16;){if(B===0)break t;B--,T+=P[A++]<<O,O+=8}l.length=T,l.head&&(l.head.extra_len=T),512&l.flags&&(E[0]=255&T,E[1]=T>>>8&255,l.check=e(l.check,E,2,0)),O=T=0}else l.head&&(l.head.extra=null);l.mode=6;case 6:if(1024&l.flags&&(B<(K=l.length)&&(K=B),K&&(l.head&&(r=l.head.extra_len-l.length,l.head.extra||(l.head.extra=new Array(l.head.extra_len)),i.arraySet(l.head.extra,P,A,K,r)),512&l.flags&&(l.check=e(l.check,P,K,A)),B-=K,A+=K,l.length-=K),l.length))break t;l.length=0,l.mode=7;case 7:if(2048&l.flags){if(B===0)break t;for(K=0;r=P[A+K++],l.head&&r&&l.length<65536&&(l.head.name+=String.fromCharCode(r)),r&&K<B;);if(512&l.flags&&(l.check=e(l.check,P,K,A)),B-=K,A+=K,r)break t}else l.head&&(l.head.name=null);l.length=0,l.mode=8;case 8:if(4096&l.flags){if(B===0)break t;for(K=0;r=P[A+K++],l.head&&r&&l.length<65536&&(l.head.comment+=String.fromCharCode(r)),r&&K<B;);if(512&l.flags&&(l.check=e(l.check,P,K,A)),B-=K,A+=K,r)break t}else l.head&&(l.head.comment=null);l.mode=9;case 9:if(512&l.flags){for(;O<16;){if(B===0)break t;B--,T+=P[A++]<<O,O+=8}if(T!==(65535&l.check)){C.msg="header crc mismatch",l.mode=30;break}O=T=0}l.head&&(l.head.hcrc=l.flags>>9&1,l.head.done=!0),C.adler=l.check=0,l.mode=12;break;case 10:for(;O<32;){if(B===0)break t;B--,T+=P[A++]<<O,O+=8}C.adler=l.check=_(T),O=T=0,l.mode=11;case 11:if(l.havedict===0)return C.next_out=Y,C.avail_out=tt,C.next_in=A,C.avail_in=B,l.hold=T,l.bits=O,2;C.adler=l.check=1,l.mode=12;case 12:if(j===5||j===6)break t;case 13:if(l.last){T>>>=7&O,O-=7&O,l.mode=27;break}for(;O<3;){if(B===0)break t;B--,T+=P[A++]<<O,O+=8}switch(l.last=1&T,O-=1,3&(T>>>=1)){case 0:l.mode=14;break;case 1:if(H(l),l.mode=20,j!==6)break;T>>>=2,O-=2;break t;case 2:l.mode=17;break;case 3:C.msg="invalid block type",l.mode=30}T>>>=2,O-=2;break;case 14:for(T>>>=7&O,O-=7&O;O<32;){if(B===0)break t;B--,T+=P[A++]<<O,O+=8}if((65535&T)!=(T>>>16^65535)){C.msg="invalid stored block lengths",l.mode=30;break}if(l.length=65535&T,O=T=0,l.mode=15,j===6)break t;case 15:l.mode=16;case 16:if(K=l.length){if(B<K&&(K=B),tt<K&&(K=tt),K===0)break t;i.arraySet(it,P,A,K,Y),B-=K,A+=K,tt-=K,Y+=K,l.length-=K;break}l.mode=12;break;case 17:for(;O<14;){if(B===0)break t;B--,T+=P[A++]<<O,O+=8}if(l.nlen=257+(31&T),T>>>=5,O-=5,l.ndist=1+(31&T),T>>>=5,O-=5,l.ncode=4+(15&T),T>>>=4,O-=4,286<l.nlen||30<l.ndist){C.msg="too many length or distance symbols",l.mode=30;break}l.have=0,l.mode=18;case 18:for(;l.have<l.ncode;){for(;O<3;){if(B===0)break t;B--,T+=P[A++]<<O,O+=8}l.lens[U[l.have++]]=7&T,T>>>=3,O-=3}for(;l.have<19;)l.lens[U[l.have++]]=0;if(l.lencode=l.lendyn,l.lenbits=7,R={bits:l.lenbits},F=c(0,l.lens,0,19,l.lencode,0,l.work,R),l.lenbits=R.bits,F){C.msg="invalid code lengths set",l.mode=30;break}l.have=0,l.mode=19;case 19:for(;l.have<l.nlen+l.ndist;){for(;ot=(g=l.lencode[T&(1<<l.lenbits)-1])>>>16&255,mt=65535&g,!((at=g>>>24)<=O);){if(B===0)break t;B--,T+=P[A++]<<O,O+=8}if(mt<16)T>>>=at,O-=at,l.lens[l.have++]=mt;else{if(mt===16){for(w=at+2;O<w;){if(B===0)break t;B--,T+=P[A++]<<O,O+=8}if(T>>>=at,O-=at,l.have===0){C.msg="invalid bit length repeat",l.mode=30;break}r=l.lens[l.have-1],K=3+(3&T),T>>>=2,O-=2}else if(mt===17){for(w=at+3;O<w;){if(B===0)break t;B--,T+=P[A++]<<O,O+=8}O-=at,r=0,K=3+(7&(T>>>=at)),T>>>=3,O-=3}else{for(w=at+7;O<w;){if(B===0)break t;B--,T+=P[A++]<<O,O+=8}O-=at,r=0,K=11+(127&(T>>>=at)),T>>>=7,O-=7}if(l.have+K>l.nlen+l.ndist){C.msg="invalid bit length repeat",l.mode=30;break}for(;K--;)l.lens[l.have++]=r}}if(l.mode===30)break;if(l.lens[256]===0){C.msg="invalid code -- missing end-of-block",l.mode=30;break}if(l.lenbits=9,R={bits:l.lenbits},F=c(d,l.lens,0,l.nlen,l.lencode,0,l.work,R),l.lenbits=R.bits,F){C.msg="invalid literal/lengths set",l.mode=30;break}if(l.distbits=6,l.distcode=l.distdyn,R={bits:l.distbits},F=c(h,l.lens,l.nlen,l.ndist,l.distcode,0,l.work,R),l.distbits=R.bits,F){C.msg="invalid distances set",l.mode=30;break}if(l.mode=20,j===6)break t;case 20:l.mode=21;case 21:if(6<=B&&258<=tt){C.next_out=Y,C.avail_out=tt,C.next_in=A,C.avail_in=B,l.hold=T,l.bits=O,a(C,J),Y=C.next_out,it=C.output,tt=C.avail_out,A=C.next_in,P=C.input,B=C.avail_in,T=l.hold,O=l.bits,l.mode===12&&(l.back=-1);break}for(l.back=0;ot=(g=l.lencode[T&(1<<l.lenbits)-1])>>>16&255,mt=65535&g,!((at=g>>>24)<=O);){if(B===0)break t;B--,T+=P[A++]<<O,O+=8}if(ot&&(240&ot)==0){for(ct=at,Et=ot,St=mt;ot=(g=l.lencode[St+((T&(1<<ct+Et)-1)>>ct)])>>>16&255,mt=65535&g,!(ct+(at=g>>>24)<=O);){if(B===0)break t;B--,T+=P[A++]<<O,O+=8}T>>>=ct,O-=ct,l.back+=ct}if(T>>>=at,O-=at,l.back+=at,l.length=mt,ot===0){l.mode=26;break}if(32&ot){l.back=-1,l.mode=12;break}if(64&ot){C.msg="invalid literal/length code",l.mode=30;break}l.extra=15&ot,l.mode=22;case 22:if(l.extra){for(w=l.extra;O<w;){if(B===0)break t;B--,T+=P[A++]<<O,O+=8}l.length+=T&(1<<l.extra)-1,T>>>=l.extra,O-=l.extra,l.back+=l.extra}l.was=l.length,l.mode=23;case 23:for(;ot=(g=l.distcode[T&(1<<l.distbits)-1])>>>16&255,mt=65535&g,!((at=g>>>24)<=O);){if(B===0)break t;B--,T+=P[A++]<<O,O+=8}if((240&ot)==0){for(ct=at,Et=ot,St=mt;ot=(g=l.distcode[St+((T&(1<<ct+Et)-1)>>ct)])>>>16&255,mt=65535&g,!(ct+(at=g>>>24)<=O);){if(B===0)break t;B--,T+=P[A++]<<O,O+=8}T>>>=ct,O-=ct,l.back+=ct}if(T>>>=at,O-=at,l.back+=at,64&ot){C.msg="invalid distance code",l.mode=30;break}l.offset=mt,l.extra=15&ot,l.mode=24;case 24:if(l.extra){for(w=l.extra;O<w;){if(B===0)break t;B--,T+=P[A++]<<O,O+=8}l.offset+=T&(1<<l.extra)-1,T>>>=l.extra,O-=l.extra,l.back+=l.extra}if(l.offset>l.dmax){C.msg="invalid distance too far back",l.mode=30;break}l.mode=25;case 25:if(tt===0)break t;if(K=J-tt,l.offset>K){if((K=l.offset-K)>l.whave&&l.sane){C.msg="invalid distance too far back",l.mode=30;break}ut=K>l.wnext?(K-=l.wnext,l.wsize-K):l.wnext-K,K>l.length&&(K=l.length),ft=l.window}else ft=it,ut=Y-l.offset,K=l.length;for(tt<K&&(K=tt),tt-=K,l.length-=K;it[Y++]=ft[ut++],--K;);l.length===0&&(l.mode=21);break;case 26:if(tt===0)break t;it[Y++]=l.length,tt--,l.mode=21;break;case 27:if(l.wrap){for(;O<32;){if(B===0)break t;B--,T|=P[A++]<<O,O+=8}if(J-=tt,C.total_out+=J,l.total+=J,J&&(C.adler=l.check=l.flags?e(l.check,it,J,Y-J):n(l.check,it,J,Y-J)),J=tt,(l.flags?T:_(T))!==l.check){C.msg="incorrect data check",l.mode=30;break}O=T=0}l.mode=28;case 28:if(l.wrap&&l.flags){for(;O<32;){if(B===0)break t;B--,T+=P[A++]<<O,O+=8}if(T!==(4294967295&l.total)){C.msg="incorrect length check",l.mode=30;break}O=T=0}l.mode=29;case 29:F=1;break t;case 30:F=-3;break t;case 31:return-4;case 32:default:return p}return C.next_out=Y,C.avail_out=tt,C.next_in=A,C.avail_in=B,l.hold=T,l.bits=O,(l.wsize||J!==C.avail_out&&l.mode<30&&(l.mode<27||j!==4))&&et(C,C.output,C.next_out,J-C.avail_out)?(l.mode=31,-4):(nt-=C.avail_in,J-=C.avail_out,C.total_in+=nt,C.total_out+=J,l.total+=J,l.wrap&&J&&(C.adler=l.check=l.flags?e(l.check,it,J,C.next_out-J):n(l.check,it,J,C.next_out-J)),C.data_type=l.bits+(l.last?64:0)+(l.mode===12?128:0)+(l.mode===20||l.mode===15?256:0),(nt==0&&J===0||j===4)&&F===b&&(F=-5),F)},s.inflateEnd=function(C){if(!C||!C.state)return p;var j=C.state;return j.window&&(j.window=null),C.state=null,b},s.inflateGetHeader=function(C,j){var l;return C&&C.state?(2&(l=C.state).wrap)==0?p:((l.head=j).done=!1,b):p},s.inflateSetDictionary=function(C,j){var l,P=j.length;return C&&C.state?(l=C.state).wrap!==0&&l.mode!==11?p:l.mode===11&&n(1,j,P,0)!==l.check?-3:et(C,j,P,P)?(l.mode=31,-4):(l.havedict=1,b):p},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,f,s){var i=t("../utils/common"),n=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],e=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];f.exports=function(d,h,b,p,v,m,y,_){var S,k,x,z,N,L,Z,D,H,et=_.bits,C=0,j=0,l=0,P=0,it=0,A=0,Y=0,B=0,tt=0,T=0,O=null,nt=0,J=new i.Buf16(16),K=new i.Buf16(16),ut=null,ft=0;for(C=0;C<=15;C++)J[C]=0;for(j=0;j<p;j++)J[h[b+j]]++;for(it=et,P=15;1<=P&&J[P]===0;P--);if(P<it&&(it=P),P===0)return v[m++]=20971520,v[m++]=20971520,_.bits=1,0;for(l=1;l<P&&J[l]===0;l++);for(it<l&&(it=l),C=B=1;C<=15;C++)if(B<<=1,(B-=J[C])<0)return-1;if(0<B&&(d===0||P!==1))return-1;for(K[1]=0,C=1;C<15;C++)K[C+1]=K[C]+J[C];for(j=0;j<p;j++)h[b+j]!==0&&(y[K[h[b+j]]++]=j);if(L=d===0?(O=ut=y,19):d===1?(O=n,nt-=257,ut=e,ft-=257,256):(O=a,ut=c,-1),C=l,N=m,Y=j=T=0,x=-1,z=(tt=1<<(A=it))-1,d===1&&852<tt||d===2&&592<tt)return 1;for(;;){for(Z=C-Y,H=y[j]<L?(D=0,y[j]):y[j]>L?(D=ut[ft+y[j]],O[nt+y[j]]):(D=96,0),S=1<<C-Y,l=k=1<<A;v[N+(T>>Y)+(k-=S)]=Z<<24|D<<16|H|0,k!==0;);for(S=1<<C-1;T&S;)S>>=1;if(S!==0?(T&=S-1,T+=S):T=0,j++,--J[C]==0){if(C===P)break;C=h[b+y[j]]}if(it<C&&(T&z)!==x){for(Y===0&&(Y=it),N+=l,B=1<<(A=C-Y);A+Y<P&&!((B-=J[A+Y])<=0);)A++,B<<=1;if(tt+=1<<A,d===1&&852<tt||d===2&&592<tt)return 1;v[x=T&z]=it<<24|A<<16|N-m|0}}return T!==0&&(v[N+T]=C-Y<<24|64<<16|0),_.bits=it,0}},{"../utils/common":41}],51:[function(t,f,s){f.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,f,s){var i=t("../utils/common"),n=0,e=1;function a(g){for(var E=g.length;0<=--E;)g[E]=0}var c=0,d=29,h=256,b=h+1+d,p=30,v=19,m=2*b+1,y=15,_=16,S=7,k=256,x=16,z=17,N=18,L=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],et=new Array(2*(b+2));a(et);var C=new Array(2*p);a(C);var j=new Array(512);a(j);var l=new Array(256);a(l);var P=new Array(d);a(P);var it,A,Y,B=new Array(p);function tt(g,E,U,W,I){this.static_tree=g,this.extra_bits=E,this.extra_base=U,this.elems=W,this.max_length=I,this.has_stree=g&&g.length}function T(g,E){this.dyn_tree=g,this.max_code=0,this.stat_desc=E}function O(g){return g<256?j[g]:j[256+(g>>>7)]}function nt(g,E){g.pending_buf[g.pending++]=255&E,g.pending_buf[g.pending++]=E>>>8&255}function J(g,E,U){g.bi_valid>_-U?(g.bi_buf|=E<<g.bi_valid&65535,nt(g,g.bi_buf),g.bi_buf=E>>_-g.bi_valid,g.bi_valid+=U-_):(g.bi_buf|=E<<g.bi_valid&65535,g.bi_valid+=U)}function K(g,E,U){J(g,U[2*E],U[2*E+1])}function ut(g,E){for(var U=0;U|=1&g,g>>>=1,U<<=1,0<--E;);return U>>>1}function ft(g,E,U){var W,I,$=new Array(y+1),X=0;for(W=1;W<=y;W++)$[W]=X=X+U[W-1]<<1;for(I=0;I<=E;I++){var M=g[2*I+1];M!==0&&(g[2*I]=ut($[M]++,M))}}function at(g){var E;for(E=0;E<b;E++)g.dyn_ltree[2*E]=0;for(E=0;E<p;E++)g.dyn_dtree[2*E]=0;for(E=0;E<v;E++)g.bl_tree[2*E]=0;g.dyn_ltree[2*k]=1,g.opt_len=g.static_len=0,g.last_lit=g.matches=0}function ot(g){8<g.bi_valid?nt(g,g.bi_buf):0<g.bi_valid&&(g.pending_buf[g.pending++]=g.bi_buf),g.bi_buf=0,g.bi_valid=0}function mt(g,E,U,W){var I=2*E,$=2*U;return g[I]<g[$]||g[I]===g[$]&&W[E]<=W[U]}function ct(g,E,U){for(var W=g.heap[U],I=U<<1;I<=g.heap_len&&(I<g.heap_len&&mt(E,g.heap[I+1],g.heap[I],g.depth)&&I++,!mt(E,W,g.heap[I],g.depth));)g.heap[U]=g.heap[I],U=I,I<<=1;g.heap[U]=W}function Et(g,E,U){var W,I,$,X,M=0;if(g.last_lit!==0)for(;W=g.pending_buf[g.d_buf+2*M]<<8|g.pending_buf[g.d_buf+2*M+1],I=g.pending_buf[g.l_buf+M],M++,W===0?K(g,I,E):(K(g,($=l[I])+h+1,E),(X=L[$])!==0&&J(g,I-=P[$],X),K(g,$=O(--W),U),(X=Z[$])!==0&&J(g,W-=B[$],X)),M<g.last_lit;);K(g,k,E)}function St(g,E){var U,W,I,$=E.dyn_tree,X=E.stat_desc.static_tree,M=E.stat_desc.has_stree,V=E.stat_desc.elems,Q=-1;for(g.heap_len=0,g.heap_max=m,U=0;U<V;U++)$[2*U]!==0?(g.heap[++g.heap_len]=Q=U,g.depth[U]=0):$[2*U+1]=0;for(;g.heap_len<2;)$[2*(I=g.heap[++g.heap_len]=Q<2?++Q:0)]=1,g.depth[I]=0,g.opt_len--,M&&(g.static_len-=X[2*I+1]);for(E.max_code=Q,U=g.heap_len>>1;1<=U;U--)ct(g,$,U);for(I=V;U=g.heap[1],g.heap[1]=g.heap[g.heap_len--],ct(g,$,1),W=g.heap[1],g.heap[--g.heap_max]=U,g.heap[--g.heap_max]=W,$[2*I]=$[2*U]+$[2*W],g.depth[I]=(g.depth[U]>=g.depth[W]?g.depth[U]:g.depth[W])+1,$[2*U+1]=$[2*W+1]=I,g.heap[1]=I++,ct(g,$,1),2<=g.heap_len;);g.heap[--g.heap_max]=g.heap[1],function(st,vt){var Ft,zt,wt,ht,te,ue,Bt=vt.dyn_tree,Ee=vt.max_code,Ve=vt.stat_desc.static_tree,Qe=vt.stat_desc.has_stree,tr=vt.stat_desc.extra_bits,ze=vt.stat_desc.extra_base,Yt=vt.stat_desc.max_length,ee=0;for(ht=0;ht<=y;ht++)st.bl_count[ht]=0;for(Bt[2*st.heap[st.heap_max]+1]=0,Ft=st.heap_max+1;Ft<m;Ft++)Yt<(ht=Bt[2*Bt[2*(zt=st.heap[Ft])+1]+1]+1)&&(ht=Yt,ee++),Bt[2*zt+1]=ht,Ee<zt||(st.bl_count[ht]++,te=0,ze<=zt&&(te=tr[zt-ze]),ue=Bt[2*zt],st.opt_len+=ue*(ht+te),Qe&&(st.static_len+=ue*(Ve[2*zt+1]+te)));if(ee!==0){do{for(ht=Yt-1;st.bl_count[ht]===0;)ht--;st.bl_count[ht]--,st.bl_count[ht+1]+=2,st.bl_count[Yt]--,ee-=2}while(0<ee);for(ht=Yt;ht!==0;ht--)for(zt=st.bl_count[ht];zt!==0;)Ee<(wt=st.heap[--Ft])||(Bt[2*wt+1]!==ht&&(st.opt_len+=(ht-Bt[2*wt+1])*Bt[2*wt],Bt[2*wt+1]=ht),zt--)}}(g,E),ft($,Q,g.bl_count)}function r(g,E,U){var W,I,$=-1,X=E[1],M=0,V=7,Q=4;for(X===0&&(V=138,Q=3),E[2*(U+1)+1]=65535,W=0;W<=U;W++)I=X,X=E[2*(W+1)+1],++M<V&&I===X||(M<Q?g.bl_tree[2*I]+=M:I!==0?(I!==$&&g.bl_tree[2*I]++,g.bl_tree[2*x]++):M<=10?g.bl_tree[2*z]++:g.bl_tree[2*N]++,$=I,Q=(M=0)===X?(V=138,3):I===X?(V=6,3):(V=7,4))}function F(g,E,U){var W,I,$=-1,X=E[1],M=0,V=7,Q=4;for(X===0&&(V=138,Q=3),W=0;W<=U;W++)if(I=X,X=E[2*(W+1)+1],!(++M<V&&I===X)){if(M<Q)for(;K(g,I,g.bl_tree),--M!=0;);else I!==0?(I!==$&&(K(g,I,g.bl_tree),M--),K(g,x,g.bl_tree),J(g,M-3,2)):M<=10?(K(g,z,g.bl_tree),J(g,M-3,3)):(K(g,N,g.bl_tree),J(g,M-11,7));$=I,Q=(M=0)===X?(V=138,3):I===X?(V=6,3):(V=7,4)}}a(B);var R=!1;function w(g,E,U,W){J(g,(c<<1)+(W?1:0),3),function(I,$,X,M){ot(I),M&&(nt(I,X),nt(I,~X)),i.arraySet(I.pending_buf,I.window,$,X,I.pending),I.pending+=X}(g,E,U,!0)}s._tr_init=function(g){R||(function(){var E,U,W,I,$,X=new Array(y+1);for(I=W=0;I<d-1;I++)for(P[I]=W,E=0;E<1<<L[I];E++)l[W++]=I;for(l[W-1]=I,I=$=0;I<16;I++)for(B[I]=$,E=0;E<1<<Z[I];E++)j[$++]=I;for($>>=7;I<p;I++)for(B[I]=$<<7,E=0;E<1<<Z[I]-7;E++)j[256+$++]=I;for(U=0;U<=y;U++)X[U]=0;for(E=0;E<=143;)et[2*E+1]=8,E++,X[8]++;for(;E<=255;)et[2*E+1]=9,E++,X[9]++;for(;E<=279;)et[2*E+1]=7,E++,X[7]++;for(;E<=287;)et[2*E+1]=8,E++,X[8]++;for(ft(et,b+1,X),E=0;E<p;E++)C[2*E+1]=5,C[2*E]=ut(E,5);it=new tt(et,L,h+1,b,y),A=new tt(C,Z,0,p,y),Y=new tt(new Array(0),D,0,v,S)}(),R=!0),g.l_desc=new T(g.dyn_ltree,it),g.d_desc=new T(g.dyn_dtree,A),g.bl_desc=new T(g.bl_tree,Y),g.bi_buf=0,g.bi_valid=0,at(g)},s._tr_stored_block=w,s._tr_flush_block=function(g,E,U,W){var I,$,X=0;0<g.level?(g.strm.data_type===2&&(g.strm.data_type=function(M){var V,Q=4093624447;for(V=0;V<=31;V++,Q>>>=1)if(1&Q&&M.dyn_ltree[2*V]!==0)return n;if(M.dyn_ltree[18]!==0||M.dyn_ltree[20]!==0||M.dyn_ltree[26]!==0)return e;for(V=32;V<h;V++)if(M.dyn_ltree[2*V]!==0)return e;return n}(g)),St(g,g.l_desc),St(g,g.d_desc),X=function(M){var V;for(r(M,M.dyn_ltree,M.l_desc.max_code),r(M,M.dyn_dtree,M.d_desc.max_code),St(M,M.bl_desc),V=v-1;3<=V&&M.bl_tree[2*H[V]+1]===0;V--);return M.opt_len+=3*(V+1)+5+5+4,V}(g),I=g.opt_len+3+7>>>3,($=g.static_len+3+7>>>3)<=I&&(I=$)):I=$=U+5,U+4<=I&&E!==-1?w(g,E,U,W):g.strategy===4||$===I?(J(g,2+(W?1:0),3),Et(g,et,C)):(J(g,4+(W?1:0),3),function(M,V,Q,st){var vt;for(J(M,V-257,5),J(M,Q-1,5),J(M,st-4,4),vt=0;vt<st;vt++)J(M,M.bl_tree[2*H[vt]+1],3);F(M,M.dyn_ltree,V-1),F(M,M.dyn_dtree,Q-1)}(g,g.l_desc.max_code+1,g.d_desc.max_code+1,X+1),Et(g,g.dyn_ltree,g.dyn_dtree)),at(g),W&&ot(g)},s._tr_tally=function(g,E,U){return g.pending_buf[g.d_buf+2*g.last_lit]=E>>>8&255,g.pending_buf[g.d_buf+2*g.last_lit+1]=255&E,g.pending_buf[g.l_buf+g.last_lit]=255&U,g.last_lit++,E===0?g.dyn_ltree[2*U]++:(g.matches++,E--,g.dyn_ltree[2*(l[U]+h+1)]++,g.dyn_dtree[2*O(E)]++),g.last_lit===g.lit_bufsize-1},s._tr_align=function(g){J(g,2,3),K(g,k,et),function(E){E.bi_valid===16?(nt(E,E.bi_buf),E.bi_buf=0,E.bi_valid=0):8<=E.bi_valid&&(E.pending_buf[E.pending++]=255&E.bi_buf,E.bi_buf>>=8,E.bi_valid-=8)}(g)}},{"../utils/common":41}],53:[function(t,f,s){f.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,f,s){(function(i){(function(n,e){if(!n.setImmediate){var a,c,d,h,b=1,p={},v=!1,m=n.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(n);y=y&&y.setTimeout?y:n,a={}.toString.call(n.process)==="[object process]"?function(x){process.nextTick(function(){S(x)})}:function(){if(n.postMessage&&!n.importScripts){var x=!0,z=n.onmessage;return n.onmessage=function(){x=!1},n.postMessage("","*"),n.onmessage=z,x}}()?(h="setImmediate$"+Math.random()+"$",n.addEventListener?n.addEventListener("message",k,!1):n.attachEvent("onmessage",k),function(x){n.postMessage(h+x,"*")}):n.MessageChannel?((d=new MessageChannel).port1.onmessage=function(x){S(x.data)},function(x){d.port2.postMessage(x)}):m&&"onreadystatechange"in m.createElement("script")?(c=m.documentElement,function(x){var z=m.createElement("script");z.onreadystatechange=function(){S(x),z.onreadystatechange=null,c.removeChild(z),z=null},c.appendChild(z)}):function(x){setTimeout(S,0,x)},y.setImmediate=function(x){typeof x!="function"&&(x=new Function(""+x));for(var z=new Array(arguments.length-1),N=0;N<z.length;N++)z[N]=arguments[N+1];var L={callback:x,args:z};return p[b]=L,a(b),b++},y.clearImmediate=_}function _(x){delete p[x]}function S(x){if(v)setTimeout(S,0,x);else{var z=p[x];if(z){v=!0;try{(function(N){var L=N.callback,Z=N.args;switch(Z.length){case 0:L();break;case 1:L(Z[0]);break;case 2:L(Z[0],Z[1]);break;case 3:L(Z[0],Z[1],Z[2]);break;default:L.apply(e,Z)}})(z)}finally{_(x),v=!1}}}}function k(x){x.source===n&&typeof x.data=="string"&&x.data.indexOf(h)===0&&S(+x.data.slice(h.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof ie<"u"?ie:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Je);const ve=Je.exports,vr=async(o,u)=>{if(o.length===0)throw new Error("No level to pack");const t=new ve,f=[],s=[];o.forEach(e=>{const a=[],c=e.slice(0,Math.floor(e.length/2)),d=e.slice(Math.floor(e.length/2));for(let h=0;h<e[0].length*2;h++){const b=h<e[0].length?c.map(v=>v[h]):d.map(v=>v[h-e[0].length]);let p=f.findIndex(v=>v.every((m,y)=>m===b[y]));p===-1&&(f.push(b),p=f.length-1),h<e[0].length?a.push([p,0]):a[h-e[0].length][1]=p}s.push(a)});const i=JSON.stringify({c2array:!0,size:[f.length,f[0].length,1],data:f}),n=JSON.stringify({c2array:!0,size:[s.length,s[0].length,2],data:s});return t.file("levelColumns.json",i),t.file("levelColumnsIndexes.json",n),t.file("tiles.json",JSON.stringify(u.map(e=>({name:e.name,data:e.data.src})))),t.generateAsync({type:"blob"})},br=async o=>{if(!o.files["levelColumns.json"]||!o.files["levelColumnsIndexes.json"]||!o.files["tiles.json"])throw new Error("Invalid zip file");const u=await o.files["levelColumns.json"].async("string"),t=await o.files["levelColumnsIndexes.json"].async("string"),f=await o.files["tiles.json"].async("string"),s=JSON.parse(u),i=JSON.parse(t),n=JSON.parse(f),e=[],a=s.data[0].length;return i.data.forEach(c=>{const d=[];c.forEach(h=>{s.data[h[0]].forEach((b,p)=>{d.length<=p&&d.push([]),d[p].push(b)}),s.data[h[1]].forEach((b,p)=>{const v=p+a;d.length<=v&&d.push([]),d[v].push(b)})}),e.push(d)}),{levels:e,tiles:n.map(c=>{const d=new Image;return d.src=c.data,{name:c.name,data:d}})}};function Te(o,u,t){const f=o.slice();return f[30]=u[t],f[32]=t,f}function Be(o){let u,t,f,s,i,n,e,a,c,d;return{c(){u=rt("li"),t=rt("input"),f=lt(),s=rt("label"),i=rt("img"),G(t,"type","radio"),G(t,"name","tile"+String(o[32])),G(t,"id","tile"+String(o[32])),t.__value=o[32],t.value=t.__value,G(t,"class","svelte-1j60u50"),o[24][0].push(t),Xt(i.src,n=o[30].data.src)||G(i,"src",n),G(i,"alt",e=o[30].name),G(i,"title",a=o[30].name),G(i,"draggable","false"),G(i,"class","svelte-1j60u50"),G(s,"for","tile"+String(o[32])),G(s,"class","svelte-1j60u50"),Tt(s,"current",o[4]==o[32]),G(u,"class","tileSelector__itemList__tile svelte-1j60u50"),G(u,"draggable","true"),G(u,"data-id",o[32]),Tt(u,"hidden",o[1]==o[32])},m(h,b){bt(h,u,b),q(u,t),t.checked=t.__value===o[4],q(u,f),q(u,s),q(s,i),c||(d=[dt(t,"change",o[25]),dt(u,"dragstart",o[13]),dt(u,"dragover",Ot(o[14])),dt(u,"dragend",o[15])],c=!0)},p(h,b){b[0]&16&&(t.checked=t.__value===h[4]),b[0]&8&&!Xt(i.src,n=h[30].data.src)&&G(i,"src",n),b[0]&8&&e!==(e=h[30].name)&&G(i,"alt",e),b[0]&8&&a!==(a=h[30].name)&&G(i,"title",a),b[0]&16&&Tt(s,"current",h[4]==h[32]),b[0]&2&&Tt(u,"hidden",h[1]==h[32])},d(h){h&&gt(u),o[24][0].splice(o[24][0].indexOf(t),1),c=!1,Lt(d)}}}function yr(o){let u,t,f,s,i,n,e,a,c,d,h,b,p,v,m,y,_,S,k,x,z,N,L,Z,D,H,et,C,j,l,P,it,A,Y,B,tt,T,O,nt,J,K,ut,ft,at,ot,mt,ct,Et,St,r,F,R,w,g;function E(Q){o[20](Q)}let U={label:"Width:",name:"width",type:"number",inputParams:{min:0,max:100,step:1}};o[6]!==void 0&&(U.value=o[6]),v=new de({props:U}),Gt.push(()=>he(v,"value",E)),v.$on("keypress",o[10]);function W(Q){o[21](Q)}let I={label:"Height:",name:"height",type:"number",inputParams:{min:0,max:100,step:1}};o[5]!==void 0&&(I.value=o[5]),_=new de({props:I}),Gt.push(()=>he(_,"value",W)),_.$on("keypress",o[10]);function $(Q){o[22](Q)}let X={label:"Horizontal mirror:",name:"mirror",type:"checkbox",inputParams:{checked:!1}};o[7]!==void 0&&(X.value=o[7]),D=new de({props:X}),Gt.push(()=>he(D,"value",$));let M=o[3],V=[];for(let Q=0;Q<M.length;Q+=1)V[Q]=Be(Te(o,M,Q));return{c(){u=rt("form"),t=rt("div"),f=rt("h3"),f.textContent="Project Manager",s=lt(),i=rt("button"),i.textContent="Import level set",n=lt(),e=rt("button"),e.textContent="Export level set",a=lt(),c=rt("button"),c.textContent="Delete current project",d=lt(),h=rt("div"),b=rt("h3"),b.textContent="Grid Size",p=lt(),It(v.$$.fragment),y=lt(),It(_.$$.fragment),k=lt(),x=rt("button"),x.textContent="Resize",z=lt(),N=rt("div"),L=rt("h3"),L.textContent="Mirror",Z=lt(),It(D.$$.fragment),et=lt(),C=rt("div"),j=rt("h3"),l=Vt("Tile selector : "),P=Vt(o[4]),it=lt(),A=rt("ul"),Y=rt("li"),B=rt("input"),tt=lt(),T=rt("label"),O=rt("img"),J=lt();for(let Q=0;Q<V.length;Q+=1)V[Q].c();K=lt(),ut=rt("li"),ft=rt("input"),at=lt(),ot=rt("label"),ot.textContent="+",mt=lt(),ct=rt("button"),ct.textContent="Delete current tile",Et=lt(),St=rt("button"),St.textContent="Download current tile",r=lt(),F=rt("button"),F.textContent="Download tileset",G(f,"class","svelte-1j60u50"),G(i,"class","svelte-1j60u50"),G(e,"class","svelte-1j60u50"),G(c,"class","warn svelte-1j60u50"),G(t,"class","fileManager svelte-1j60u50"),G(b,"class","svelte-1j60u50"),G(x,"class","svelte-1j60u50"),G(h,"class","gridSize svelte-1j60u50"),G(L,"class","svelte-1j60u50"),G(N,"class","mirror"),G(j,"class","svelte-1j60u50"),G(B,"type","radio"),G(B,"name","tileEraser"),G(B,"id","tileEraser"),B.__value=-1,B.value=B.__value,G(B,"class","svelte-1j60u50"),o[24][0].push(B),Xt(O.src,nt=_r)||G(O,"src",nt),G(O,"alt","Eraser"),G(O,"title","Eraser"),G(O,"class","svelte-1j60u50"),G(T,"for","tileEraser"),G(T,"class","noBg svelte-1j60u50"),Tt(T,"current",o[4]==-1),G(Y,"class","tileSelector__itemList__tile svelte-1j60u50"),G(ft,"type","file"),G(ft,"id","newTileButton"),G(ft,"accept","*.png, *.jpg, *.jpeg"),G(ft,"class","svelte-1j60u50"),G(ot,"for","newTileButton"),G(ot,"class","noBg svelte-1j60u50"),G(ut,"class","tileSelector__itemList__tile svelte-1j60u50"),G(A,"class","tileSelector__itemList svelte-1j60u50"),G(ct,"class","warn svelte-1j60u50"),G(St,"class","svelte-1j60u50"),G(F,"class","svelte-1j60u50"),G(C,"class","tileSelector"),G(u,"class","svelte-1j60u50")},m(Q,st){bt(Q,u,st),q(u,t),q(t,f),q(t,s),q(t,i),q(t,n),q(t,e),q(t,a),q(t,c),q(u,d),q(u,h),q(h,b),q(h,p),xt(v,h,null),q(h,y),xt(_,h,null),q(h,k),q(h,x),q(u,z),q(u,N),q(N,L),q(N,Z),xt(D,N,null),q(u,et),q(u,C),q(C,j),q(j,l),q(j,P),q(C,it),q(C,A),q(A,Y),q(Y,B),B.checked=B.__value===o[4],q(Y,tt),q(Y,T),q(T,O),q(A,J);for(let vt=0;vt<V.length;vt+=1)V[vt].m(A,null);q(A,K),q(A,ut),q(ut,ft),q(ut,at),q(ut,ot),q(C,mt),q(C,ct),q(C,Et),q(C,St),q(C,r),q(C,F),R=!0,w||(g=[dt(i,"click",Ot(o[19])),dt(e,"click",Ot(o[8])),dt(c,"click",Ot(o[12])),dt(x,"click",Ot(o[11])),dt(B,"change",o[23]),dt(ft,"change",o[26]),dt(ft,"change",Ot(o[9])),dt(ct,"click",Ot(o[16])),dt(St,"click",Ot(o[17])),dt(F,"click",Ot(o[18]))],w=!0)},p(Q,st){const vt={};!m&&st[0]&64&&(m=!0,vt.value=Q[6],ce(()=>m=!1)),v.$set(vt);const Ft={};!S&&st[0]&32&&(S=!0,Ft.value=Q[5],ce(()=>S=!1)),_.$set(Ft);const zt={};if(!H&&st[0]&128&&(H=!0,zt.value=Q[7],ce(()=>H=!1)),D.$set(zt),(!R||st[0]&16)&&we(P,Q[4]),st[0]&16&&(B.checked=B.__value===Q[4]),(!R||st[0]&16)&&Tt(T,"current",Q[4]==-1),st[0]&57370){M=Q[3];let wt;for(wt=0;wt<M.length;wt+=1){const ht=Te(Q,M,wt);V[wt]?V[wt].p(ht,st):(V[wt]=Be(ht),V[wt].c(),V[wt].m(A,K))}for(;wt<V.length;wt+=1)V[wt].d(1);V.length=M.length}},i(Q){R||(_t(v.$$.fragment,Q),_t(_.$$.fragment,Q),_t(D.$$.fragment,Q),R=!0)},o(Q){yt(v.$$.fragment,Q),yt(_.$$.fragment,Q),yt(D.$$.fragment,Q),R=!1},d(Q){Q&&gt(u),At(v),At(_),At(D),o[24][0].splice(o[24][0].indexOf(B),1),ye(V,Q),w=!1,Lt(g)}}}function wr(o){let u,t;return u=new Ye({props:{title:"Configuration",shadow:"right",$$slots:{default:[yr]},$$scope:{ctx:o}}}),{c(){It(u.$$.fragment)},m(f,s){xt(u,f,s),t=!0},p(f,s){const i={};s[0]&255|s[1]&4&&(i.$$scope={dirty:s,ctx:f}),u.$set(i)},i(f){t||(_t(u.$$.fragment,f),t=!0)},o(f){yt(u.$$.fragment,f),t=!1},d(f){At(u,f)}}}function kr(o,u,t){let f,s,i,n,e,a;Ct(o,Dt,A=>t(3,f=A)),Ct(o,Ht,A=>t(4,s=A)),Ct(o,Wt,A=>t(5,i=A)),Ct(o,Kt,A=>t(6,n=A)),Ct(o,kt,A=>t(27,e=A)),Ct(o,ge,A=>t(7,a=A));let c,d=-1,h;const b=async()=>{if(e.length===0){alert("No levels to export");return}try{const A=await vr(e,f),Y=document.createElement("a");Y.href=URL.createObjectURL(A),Y.download="level.zip",Y.click()}catch(A){alert("Error while exporting level"),console.error(A)}},p=async A=>{if(A[0].type!=="application/zip"){alert("File is not a zip");return}let Y;try{Y=await ve.loadAsync(A[0])}catch(B){alert("File is not a valid zip file"),console.error(B);return}try{const B=await br(Y);kt.reset(),B.levels.forEach(tt=>{kt.pushLevel(tt)}),Ht.set(1),Dt.set(B.tiles),Wt.set(Math.floor(B.levels[0].length/2)),Kt.set(B.levels[0][0].length)}catch(B){alert("Error durring level import"),console.error(B)}},v=A=>{const B=A.target.files;B&&p(B)};He(()=>{t(2,h=document.createElement("input")),h.setAttribute("type","file"),h.setAttribute("accept","*.zip"),t(2,h.style.display="none",h),document.body.appendChild(h),h.addEventListener("change",v),console.log(h)}),$e(()=>{h.removeEventListener("change",v),document.body.removeChild(h)});const m=()=>{let A=c[0],Y=new FileReader;Y.onload=()=>{const B=new Image;B.onload=()=>{Dt.update(tt=>[...tt,{name:A.name,data:gr(B,32,32)}])},B.onerror=()=>{alert("Invalid file")},B.src=Y.result,B.title=A.name,B.alt=A.name+" tile"},A.type&&Y.readAsDataURL(A)},y=A=>{A.key==="Enter"&&(_(),A.preventDefault())},_=()=>{kt.resize(n,i)},S=()=>{confirm("Are you sure you want to delete this project?")&&(kt.reset(),Dt.set([]))},k=A=>{const Y=A.target,B=parseInt(Y.getAttribute("data-id"));A.dataTransfer.setDragImage(f[B].data,16,16),A.dataTransfer.dropEffect="copy",setTimeout(()=>{t(1,d=B)},0)},x=A=>{if(d==-1)return;let Y=A.target;for(;!Y.classList.contains("tileSelector__itemList__tile");)Y=Y.parentElement;const B=parseInt(Y.getAttribute("data-id"));B!=d&&(Dt.update(tt=>{const T=tt[d];return tt[d]=tt[B],tt[B]=T,tt}),kt.switchTiles(d,B),t(1,d=B))},z=()=>{t(1,d=-1)},N=()=>{s!=-1&&(Dt.update(A=>A.filter((Y,B)=>B!=s)),Ht.set(-1))},L=()=>{if(s==-1)return;const A=document.createElement("a");A.download=f[s].name,A.href=f[s].data.src,A.click()},Z=async()=>{const A=new ve;f.forEach(Y=>{A.file(Y.name,Y.data.src,{base64:!0})});try{const Y=await A.generateAsync({type:"blob"}),B=document.createElement("a");B.download="tileset.zip",B.href=URL.createObjectURL(Y),B.click()}catch(Y){console.error(Y),alert("Something went wrong when downloading the tileset ;(")}},D=[[]],H=A=>h.click();function et(A){n=A,Kt.set(n)}function C(A){i=A,Wt.set(i)}function j(A){a=A,ge.set(a)}function l(){s=this.__value,Ht.set(s)}function P(){s=this.__value,Ht.set(s)}function it(){c=this.files,t(0,c)}return[c,d,h,f,s,i,n,a,b,m,y,_,S,k,x,z,N,L,Z,H,et,C,j,l,D,P,it]}class Sr extends Pt{constructor(u){super(),Nt(this,u,kr,wr,jt,{},null,[-1,-1])}}function Cr(o){let u,t,f,s,i,n;return{c(){u=rt("div"),t=rt("canvas"),G(t,"width",f=o[1]*32),G(t,"height",s=o[2]*32),G(u,"class","grid svelte-2utg53")},m(e,a){bt(e,u,a),q(u,t),o[11](t),i||(n=[dt(window,"resize",o[3]),dt(t,"mousedown",Ot(o[4])),dt(t,"mousemove",o[6]),dt(t,"contextmenu",o[5])],i=!0)},p(e,[a]){a&2&&f!==(f=e[1]*32)&&G(t,"width",f),a&4&&s!==(s=e[2]*32)&&G(t,"height",s)},i:pt,o:pt,d(e){e&&gt(u),o[11](null),i=!1,Lt(n)}}}function Er(o,u,t){let f,s,i;Ct(o,Dt,k=>t(13,f=k)),Ct(o,kt,k=>t(9,s=k)),Ct(o,Rt,k=>t(10,i=k));let{gridId:n}=u,e,a=null,c,d;const h=()=>{if(a==null)return;a.clearRect(0,0,e.width,e.height);let k=Math.floor(s[n].length/2);s[n].forEach((x,z)=>{x.forEach((N,L)=>{z==k?(a.fillStyle="black",a.fillRect(L*32,z*32,32,32)):N===-1?(a.fillStyle="white",a.fillRect(L*32,z*32,32,32)):a.drawImage(f[N].data,L*32,z*32,32,32)})})},b=()=>{if(a!=null){h(),a.beginPath(),a.strokeStyle="black",a.fillStyle="black",a.lineWidth=1;for(let k=0;k<c;k++)a.moveTo(k*32,0),a.lineTo(k*32,d*32);for(let k=0;k<d;k++)a.moveTo(0,k*32),a.lineTo(c*32,k*32);a.stroke()}},p=(k,x)=>({x:Math.floor(k/e.width*c),y:Math.floor(x/e.height*d)}),v=Ge(),m=k=>{if(k.buttons==2&&!k.shiftKey)return v("erase",p(k.offsetX,k.offsetY)),!1;if(k.buttons==1)return v("click",p(k.offsetX,k.offsetY)),!0},y=k=>{if(!k.shiftKey){k.preventDefault(),m(k);return}},_=k=>{k.buttons==2?v("erase",p(k.offsetX,k.offsetY)):k.buttons==1&&v("click",p(k.offsetX,k.offsetY))};He(()=>{if(a=e.getContext("2d"),a==null){alert("Could not get canvas context");return}a.imageSmoothingEnabled=!0,console.log("Context loaded"),n>-1&&b()}),$e(()=>{a=null});function S(k){Gt[k?"unshift":"push"](()=>{e=k,t(0,e)})}return o.$$set=k=>{"gridId"in k&&t(7,n=k.gridId)},o.$$.update=()=>{o.$$.dirty&1664&&n>-1&&n<s.length&&(t(1,c=s[n][0].length),t(2,d=s[n].length),(n===i||kt.needUpdate(n))&&b())},[e,c,d,b,m,y,_,n,h,s,i,S]}class Xe extends Pt{constructor(u){super(),Nt(this,u,Er,Cr,jt,{gridId:7,drawTiles:8})}get drawTiles(){return this.$$.ctx[8]}}function zr(o){let u;return{c(){u=rt("p"),u.textContent="There is currently no level selected.",G(u,"class","center svelte-10pwihz")},m(t,f){bt(t,u,f)},p:pt,i:pt,o:pt,d(t){t&&gt(u)}}}function xr(o){let u,t,f,s,i,n;return{c(){u=rt("div"),t=rt("p"),t.textContent="There is currently no levels.",f=lt(),s=rt("button"),s.textContent="Add a new level",G(u,"class","center svelte-10pwihz")},m(e,a){bt(e,u,a),q(u,t),q(u,f),q(u,s),i||(n=dt(s,"click",o[2]),i=!0)},p:pt,i:pt,o:pt,d(e){e&&gt(u),i=!1,n()}}}function Ar(o){let u,t;return u=new Xe({props:{gridId:o[0]}}),u.$on("click",o[3]),u.$on("erase",o[4]),{c(){It(u.$$.fragment)},m(f,s){xt(u,f,s),t=!0},p(f,s){const i={};s&1&&(i.gridId=f[0]),u.$set(i)},i(f){t||(_t(u.$$.fragment,f),t=!0)},o(f){yt(u.$$.fragment,f),t=!1},d(f){At(u,f)}}}function Ir(o){let u,t,f,s;const i=[Ar,xr,zr],n=[];function e(a,c){return a[0]!=-1&&a[1].length>0?0:a[1].length==0?1:2}return t=e(o),f=n[t]=i[t](o),{c(){u=rt("section"),f.c(),G(u,"class","editor svelte-10pwihz")},m(a,c){bt(a,u,c),n[t].m(u,null),s=!0},p(a,[c]){let d=t;t=e(a),t===d?n[t].p(a,c):(Se(),yt(n[d],1,1,()=>{n[d]=null}),Ce(),f=n[t],f?f.p(a,c):(f=n[t]=i[t](a),f.c()),_t(f,1),f.m(u,null))},i(a){s||(_t(f),s=!0)},o(a){yt(f),s=!1},d(a){a&&gt(u),n[t].d()}}}function Or(o,u,t){let f,s,i,n;Ct(o,Ht,d=>t(5,f=d)),Ct(o,Rt,d=>t(0,s=d)),Ct(o,kt,d=>t(1,i=d)),Ct(o,ge,d=>t(6,n=d));const e=()=>{kt.addLevel(),Rt.set(i.length-1)},a=(d,h=!1)=>{kt.setLevelCell(s,d.detail.x,d.detail.y,h?-1:f),n&&kt.setLevelCell(s,d.detail.x,i[s].length-d.detail.y-1,h?-1:f)};return[s,i,e,a,d=>{a(d,!0)}]}class Tr extends Pt{constructor(u){super(),Nt(this,u,Or,Ir,jt,{})}}const Br="/Vivian-level-editor/assets/trash-white.330e363c.svg",Rr="/Vivian-level-editor/assets/copy-white.e7560aad.svg";function Re(o,u,t){const f=o.slice();return f[4]=u[t],f}function De(o){let u,t,f,s,i,n,e,a;return{c(){u=rt("button"),t=rt("img"),i=lt(),Xt(t.src,f=o[4].icon)||G(t,"src",f),G(t,"alt",s=o[4].title+"button"),G(t,"class","svelte-1yu8awl"),G(u,"title",n=o[4].title),G(u,"class","svelte-1yu8awl")},m(c,d){bt(c,u,d),q(u,t),q(u,i),e||(a=dt(u,"click",rr(function(){be(o[4].action(o[1]))&&o[4].action(o[1]).apply(this,arguments)})),e=!0)},p(c,d){o=c,d&1&&!Xt(t.src,f=o[4].icon)&&G(t,"src",f),d&1&&s!==(s=o[4].title+"button")&&G(t,"alt",s),d&1&&n!==(n=o[4].title)&&G(u,"title",n)},d(c){c&&gt(u),e=!1,a()}}}function Dr(o){let u,t,f,s,i=o[0],n=[];for(let c=0;c<i.length;c+=1)n[c]=De(Re(o,i,c));const e=o[3].default,a=Pe(e,o,o[2],null);return{c(){u=rt("div"),t=rt("div");for(let c=0;c<n.length;c+=1)n[c].c();f=lt(),a&&a.c(),G(t,"class","buttons svelte-1yu8awl"),G(u,"class","overlay svelte-1yu8awl")},m(c,d){bt(c,u,d),q(u,t);for(let h=0;h<n.length;h+=1)n[h].m(t,null);q(u,f),a&&a.m(u,null),s=!0},p(c,[d]){if(d&3){i=c[0];let h;for(h=0;h<i.length;h+=1){const b=Re(c,i,h);n[h]?n[h].p(b,d):(n[h]=De(b),n[h].c(),n[h].m(t,null))}for(;h<n.length;h+=1)n[h].d(1);n.length=i.length}a&&a.p&&(!s||d&4)&&Ze(a,e,c,c[2],s?We(e,c[2],d,null):Me(c[2]),null)},i(c){s||(_t(a,c),s=!0)},o(c){yt(a,c),s=!1},d(c){c&&gt(u),ye(n,c),a&&a.d(c)}}}function Lr(o,u,t){let{$$slots:f={},$$scope:s}=u,{buttons:i}=u,{childId:n}=u;return o.$$set=e=>{"buttons"in e&&t(0,i=e.buttons),"childId"in e&&t(1,n=e.childId),"$$scope"in e&&t(2,s=e.$$scope)},[i,n,s,f]}class jr extends Pt{constructor(u){super(),Nt(this,u,Lr,Dr,jt,{buttons:0,childId:1})}}function Le(o,u,t){const f=o.slice();return f[6]=u[t],f[8]=t,f}function Fr(o){let u;return{c(){u=rt("p"),u.textContent="There is currently no levels."},m(t,f){bt(t,u,f)},p:pt,i:pt,o:pt,d(t){t&&gt(u)}}}function Nr(o){let u,t,f=o[0],s=[];for(let n=0;n<f.length;n+=1)s[n]=je(Le(o,f,n));const i=n=>yt(s[n],1,1,()=>{s[n]=null});return{c(){u=rt("ul");for(let n=0;n<s.length;n+=1)s[n].c();G(u,"class","levelList__list svelte-ynwbqm")},m(n,e){bt(n,u,e);for(let a=0;a<s.length;a+=1)s[a].m(u,null);t=!0},p(n,e){if(e&7){f=n[0];let a;for(a=0;a<f.length;a+=1){const c=Le(n,f,a);s[a]?(s[a].p(c,e),_t(s[a],1)):(s[a]=je(c),s[a].c(),_t(s[a],1),s[a].m(u,null))}for(Se(),a=f.length;a<s.length;a+=1)i(a);Ce()}},i(n){if(!t){for(let e=0;e<f.length;e+=1)_t(s[e]);t=!0}},o(n){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)yt(s[e]);t=!1},d(n){n&&gt(u),ye(s,n)}}}function Pr(o){let u,t;return u=new Xe({props:{gridId:o[8]}}),{c(){It(u.$$.fragment)},m(f,s){xt(u,f,s),t=!0},p:pt,i(f){t||(_t(u.$$.fragment,f),t=!0)},o(f){yt(u.$$.fragment,f),t=!1},d(f){At(u,f)}}}function je(o){let u,t,f,s,i,n,e,a,c;return i=new jr({props:{buttons:o[2],childId:o[8],$$slots:{default:[Pr]},$$scope:{ctx:o}}}),{c(){u=rt("li"),t=rt("input"),f=lt(),s=rt("label"),It(i.$$.fragment),n=lt(),G(t,"type","radio"),G(t,"name","level"),G(t,"id","level-"+o[8]),t.__value=o[8],t.value=t.__value,G(t,"class","svelte-ynwbqm"),o[5][0].push(t),G(s,"class","levelList__list__grid svelte-ynwbqm"),G(s,"for","level-"+o[8]),G(u,"class","svelte-ynwbqm")},m(d,h){bt(d,u,h),q(u,t),t.checked=t.__value===o[1],q(u,f),q(u,s),xt(i,s,null),q(u,n),e=!0,a||(c=dt(t,"change",o[4]),a=!0)},p(d,h){h&2&&(t.checked=t.__value===d[1]);const b={};h&512&&(b.$$scope={dirty:h,ctx:d}),i.$set(b)},i(d){e||(_t(i.$$.fragment,d),e=!0)},o(d){yt(i.$$.fragment,d),e=!1},d(d){d&&gt(u),o[5][0].splice(o[5][0].indexOf(t),1),At(i),a=!1,c()}}}function Ur(o){let u,t,f,s,i,n,e,a;const c=[Nr,Fr],d=[];function h(b,p){return b[0].length!=0?0:1}return s=h(o),i=d[s]=c[s](o),{c(){u=rt("button"),u.textContent="Add a new level",t=lt(),f=rt("div"),i.c(),G(u,"class","svelte-ynwbqm"),G(f,"class","levelList svelte-ynwbqm")},m(b,p){bt(b,u,p),bt(b,t,p),bt(b,f,p),d[s].m(f,null),n=!0,e||(a=dt(u,"click",o[3]),e=!0)},p(b,p){let v=s;s=h(b),s===v?d[s].p(b,p):(Se(),yt(d[v],1,1,()=>{d[v]=null}),Ce(),i=d[s],i?i.p(b,p):(i=d[s]=c[s](b),i.c()),_t(i,1),i.m(f,null))},i(b){n||(_t(i),n=!0)},o(b){yt(i),n=!1},d(b){b&&gt(u),b&&gt(t),b&&gt(f),d[s].d(),e=!1,a()}}}function Wr(o){let u,t;return u=new Ye({props:{title:"Level Selector",shadow:"left",$$slots:{default:[Ur]},$$scope:{ctx:o}}}),{c(){It(u.$$.fragment)},m(f,s){xt(u,f,s),t=!0},p(f,[s]){const i={};s&515&&(i.$$scope={dirty:s,ctx:f}),u.$set(i)},i(f){t||(_t(u.$$.fragment,f),t=!0)},o(f){yt(u.$$.fragment,f),t=!1},d(f){At(u,f)}}}function Zr(o,u,t){let f,s;Ct(o,kt,c=>t(0,f=c)),Ct(o,Rt,c=>t(1,s=c));const i=[{title:"Duplicate Level",icon:Rr,action:c=>(kt.pushLevel(f[c].map(d=>[...d]),c+1),Rt.update(d=>c+1),null)},{title:"Delete Level",icon:Br,action:c=>(s==c?Rt.set(-1):Rt.update(d=>d>c?d-1:d),kt.removeLevel(c),null)}],n=c=>{kt.addLevel(),Rt.update(d=>f.length-1)},e=[[]];function a(){s=this.__value,Rt.set(s)}return[f,s,i,n,a,e]}class Mr extends Pt{constructor(u){super(),Nt(this,u,Zr,Wr,jt,{})}}function Hr(o){let u,t,f,s,i,n,e,a,c;return s=new Sr({}),n=new Tr({}),a=new Mr({}),{c(){u=rt("header"),u.innerHTML="<h1>Vivian level Editor</h1>",t=lt(),f=rt("main"),It(s.$$.fragment),i=lt(),It(n.$$.fragment),e=lt(),It(a.$$.fragment),G(f,"class","svelte-1fszlhy")},m(d,h){bt(d,u,h),bt(d,t,h),bt(d,f,h),xt(s,f,null),q(f,i),xt(n,f,null),q(f,e),xt(a,f,null),c=!0},p:pt,i(d){c||(_t(s.$$.fragment,d),_t(n.$$.fragment,d),_t(a.$$.fragment,d),c=!0)},o(d){yt(s.$$.fragment,d),yt(n.$$.fragment,d),yt(a.$$.fragment,d),c=!1},d(d){d&&gt(u),d&&gt(t),d&&gt(f),At(s),At(n),At(a)}}}class $r extends Pt{constructor(u){super(),Nt(this,u,null,Hr,jt,{})}}new $r({target:document.getElementById("app")});
