(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function w(){}function $e(e,t){for(const n in t)e[n]=t[n];return e}function ot(e){return e()}function Ke(){return Object.create(null)}function W(e){e.forEach(ot)}function ut(e){return typeof e=="function"}function X(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let pe;function Ae(e,t){return pe||(pe=document.createElement("a")),pe.href=t,e===pe.href}function bt(e){return Object.keys(e).length===0}function ct(e,...t){if(e==null)return w;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function ae(e){let t;return ct(e,n=>t=n)(),t}function O(e,t,n){e.$$.on_destroy.push(ct(t,n))}function yt(e,t,n,l){if(e){const r=at(e,t,n,l);return e[0](r)}}function at(e,t,n,l){return e[1]&&l?$e(n.ctx.slice(),e[1](l(t))):n.ctx}function wt(e,t,n,l){if(e[2]&&l){const r=e[2](l(n));if(t.dirty===void 0)return r;if(typeof r=="object"){const s=[],i=Math.max(t.dirty.length,r.length);for(let u=0;u<i;u+=1)s[u]=t.dirty[u]|r[u];return s}return t.dirty|r}return t.dirty}function kt(e,t,n,l,r,s){if(r){const i=at(t,n,l,s);e.p(i,r)}}function $t(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let l=0;l<n;l++)t[l]=-1;return t}return-1}function Ue(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function Ve(e){return e==null?"":e}function _(e,t){e.appendChild(t)}function S(e,t,n){e.insertBefore(t,n||null)}function $(e){e.parentNode.removeChild(e)}function ft(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function h(e){return document.createElement(e)}function de(e){return document.createTextNode(e)}function b(){return de(" ")}function A(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function be(e){return function(t){return t.preventDefault(),e.call(this,t)}}function d(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Qe(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const l in t)t[l]==null?e.removeAttribute(l):l==="style"?e.style.cssText=t[l]:l==="__value"?e.value=e[l]=t[l]:n[l]&&n[l].set?e[l]=t[l]:d(e,l,t[l])}function St(e){return Array.from(e.childNodes)}function Oe(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function J(e,t,n){e.classList[n?"add":"remove"](t)}function zt(e,t,{bubbles:n=!1,cancelable:l=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,l,t),r}let _e;function fe(e){_e=e}function Ne(){if(!_e)throw new Error("Function called outside component initialization");return _e}function Lt(e){Ne().$$.on_mount.push(e)}function Et(e){Ne().$$.after_update.push(e)}function dt(){const e=Ne();return(t,n,{cancelable:l=!1}={})=>{const r=e.$$.callbacks[t];if(r){const s=zt(t,n,{cancelable:l});return r.slice().forEach(i=>{i.call(e,s)}),!s.defaultPrevented}return!0}}function Ct(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(l=>l.call(this,t))}const ce=[],ge=[],ye=[],Te=[],At=Promise.resolve();let Ie=!1;function Tt(){Ie||(Ie=!0,At.then(_t))}function je(e){ye.push(e)}function Ze(e){Te.push(e)}const Ce=new Set;let ve=0;function _t(){const e=_e;do{for(;ve<ce.length;){const t=ce[ve];ve++,fe(t),It(t.$$)}for(fe(null),ce.length=0,ve=0;ge.length;)ge.pop()();for(let t=0;t<ye.length;t+=1){const n=ye[t];Ce.has(n)||(Ce.add(n),n())}ye.length=0}while(ce.length);for(;Te.length;)Te.pop()();Ie=!1,Ce.clear(),fe(e)}function It(e){if(e.fragment!==null){e.update(),W(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(je)}}const we=new Set;let U;function Pe(){U={r:0,c:[],p:U}}function qe(){U.r||W(U.c),U=U.p}function z(e,t){e&&e.i&&(we.delete(e),e.i(t))}function C(e,t,n,l){if(e&&e.o){if(we.has(e))return;we.add(e),U.c.push(()=>{we.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}function jt(e,t){const n={},l={},r={$$scope:1};let s=e.length;for(;s--;){const i=e[s],u=t[s];if(u){for(const o in i)o in u||(l[o]=1);for(const o in u)r[o]||(n[o]=u[o],r[o]=1);e[s]=u}else for(const o in i)r[o]=1}for(const i in l)i in n||(n[i]=void 0);return n}function xe(e,t,n){const l=e.$$.props[t];l!==void 0&&(e.$$.bound[l]=n,n(e.$$.ctx[l]))}function R(e){e&&e.c()}function P(e,t,n,l){const{fragment:r,after_update:s}=e.$$;r&&r.m(t,n),l||je(()=>{const i=e.$$.on_mount.map(ot).filter(ut);e.$$.on_destroy?e.$$.on_destroy.push(...i):W(i),e.$$.on_mount=[]}),s.forEach(je)}function q(e,t){const n=e.$$;n.fragment!==null&&(W(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ot(e,t){e.$$.dirty[0]===-1&&(ce.push(e),Tt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Q(e,t,n,l,r,s,i,u=[-1]){const o=_e;fe(e);const a=e.$$={fragment:null,ctx:[],props:s,update:w,not_equal:r,bound:Ke(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(o?o.$$.context:[])),callbacks:Ke(),dirty:u,skip_bound:!1,root:t.target||o.$$.root};i&&i(a.root);let c=!1;if(a.ctx=n?n(e,t.props||{},(f,m,...k)=>{const y=k.length?k[0]:m;return a.ctx&&r(a.ctx[f],a.ctx[f]=y)&&(!a.skip_bound&&a.bound[f]&&a.bound[f](y),c&&Ot(e,f)),m}):[],a.update(),c=!0,W(a.before_update),a.fragment=l?l(a.ctx):!1,t.target){if(t.hydrate){const f=St(t.target);a.fragment&&a.fragment.l(f),f.forEach($)}else a.fragment&&a.fragment.c();t.intro&&z(e.$$.fragment),P(e,t.target,t.anchor,t.customElement),_t()}fe(o)}class Z{$destroy(){q(this,1),this.$destroy=w}$on(t,n){if(!ut(n))return w;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(t){this.$$set&&!bt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Nt(e){let t,n,l,r,s,i,u,o=[{type:e[3]},{name:e[2]},{id:e[2]},e[4],{value:e[0]}],a={};for(let c=0;c<o.length;c+=1)a=$e(a,o[c]);return{c(){t=h("div"),n=h("label"),l=de(e[1]),r=b(),s=h("input"),d(n,"for",e[2]),Qe(s,a)},m(c,f){S(c,t,f),_(t,n),_(n,l),_(t,r),_(t,s),s.value=a.value,s.autofocus&&s.focus(),i||(u=[A(s,"input",e[5]),A(s,"keypress",e[6])],i=!0)},p(c,[f]){f&2&&Oe(l,c[1]),f&4&&d(n,"for",c[2]),Qe(s,a=jt(o,[f&8&&{type:c[3]},f&4&&{name:c[2]},f&4&&{id:c[2]},f&16&&c[4],f&1&&s.value!==c[0]&&{value:c[0]}])),"value"in a&&(s.value=a.value)},i:w,o:w,d(c){c&&$(t),i=!1,W(u)}}}function Pt(e,t,n){let{value:l=""}=t,{label:r="Input"}=t,{name:s="input"}=t,{type:i="text"}=t,{inputParams:u={}}=t;const o=dt(),a=f=>{n(0,l=f.target.value),(i==="number"||i==="range")&&n(0,l=Number(l)),o("input",l)};function c(f){Ct.call(this,e,f)}return e.$$set=f=>{"value"in f&&n(0,l=f.value),"label"in f&&n(1,r=f.label),"name"in f&&n(2,s=f.name),"type"in f&&n(3,i=f.type),"inputParams"in f&&n(4,u=f.inputParams)},[l,r,s,i,u,a,c]}class et extends Z{constructor(t){super(),Q(this,t,Pt,Nt,X,{value:0,label:1,name:2,type:3,inputParams:4})}}function qt(e){let t,n,l,r,s,i,u,o;const a=e[4].default,c=yt(a,e,e[3],null);return{c(){t=h("nav"),n=h("h2"),l=de(e[0]),r=b(),s=h("hr"),i=b(),c&&c.c(),d(n,"class","svelte-15oiif1"),d(s,"class","svelte-15oiif1"),d(t,"class",u=Ve(e[2].class)+" svelte-15oiif1"),J(t,"leftShadow",e[1]=="left"),J(t,"rightShadow",e[1]=="right")},m(f,m){S(f,t,m),_(t,n),_(n,l),_(t,r),_(t,s),_(t,i),c&&c.m(t,null),o=!0},p(f,[m]){(!o||m&1)&&Oe(l,f[0]),c&&c.p&&(!o||m&8)&&kt(c,a,f,f[3],o?wt(a,f[3],m,null):$t(f[3]),null),(!o||m&4&&u!==(u=Ve(f[2].class)+" svelte-15oiif1"))&&d(t,"class",u),(!o||m&6)&&J(t,"leftShadow",f[1]=="left"),(!o||m&6)&&J(t,"rightShadow",f[1]=="right")},i(f){o||(z(c,f),o=!0)},o(f){C(c,f),o=!1},d(f){f&&$(t),c&&c.d(f)}}}function Mt(e,t,n){let{$$slots:l={},$$scope:r}=t,{title:s="Undefined"}=t,{shadow:i="left"}=t;return e.$$set=u=>{n(2,t=$e($e({},t),Ue(u))),"title"in u&&n(0,s=u.title),"shadow"in u&&n(1,i=u.shadow),"$$scope"in u&&n(3,r=u.$$scope)},t=Ue(t),[s,i,t,r,l]}class gt extends Z{constructor(t){super(),Q(this,t,Mt,qt,X,{title:0,shadow:1})}}const se=[];function he(e,t=w){let n;const l=new Set;function r(u){if(X(e,u)&&(e=u,n)){const o=!se.length;for(const a of l)a[1](),se.push(a,e);if(o){for(let a=0;a<se.length;a+=2)se[a][0](se[a+1]);se.length=0}}}function s(u){r(u(e))}function i(u,o=w){const a=[u,o];return l.add(a),l.size===1&&(n=t(r)||w),u(e),()=>{l.delete(a),l.size===0&&(n(),n=null)}}return{set:r,update:s,subscribe:i}}const Se=he(-1);function mt(e,t,n){const{subscribe:l,set:r,update:s}=he(e);return{subscribe:l,set(i){i<t?i=t:i>n&&(i=n),r(i)},update(i){s(u=>(u=i(u),u<t?u=t:u>n&&(u=n),u))}}}const me=mt(10,1,50),V=mt(10,1,20);function Dt(){const{subscribe:e,set:t,update:n}=he(new Array);return{subscribe:e,set:t,addLevel(){n(l=>[...l,Array.from({length:ae(V)*2+1},r=>Array(ae(me)).fill(-1))])},pushLevel(l){n(r=>[...r,l])},removeLevel(l){n(r=>r.filter((s,i)=>i!==l))},setLevelCell(l,r,s,i){s!=ae(V)&&n(u=>(u[l][s][r]=i,u))},resize(l,r){r=r*2+1,n(s=>s.map(i=>{const u=i.map(o=>o.length>=l?o.slice(0,l):[...o,...Array(l-o.length).fill(-1)]);return u.length>=r?u.slice(0,r):[...u,...Array.from({length:r-u.length},o=>Array(l).fill(-1))]}))},reset(){n(l=>new Array)}}}const M=Dt(),tt=localStorage.getItem("levels");if(tt){const e=JSON.parse(tt);M.set(e.levels),me.set(e.width),V.set(e.height)}M.subscribe(e=>{localStorage.setItem("levels",JSON.stringify({width:ae(me),height:ae(V),levels:e}))});const ie=he(Array()),nt=localStorage.getItem("images");if(nt){const e=JSON.parse(nt);ie.update(t=>[...t,...e.map(n=>{const l=new Image;return l.src=n.data,{name:n.name,data:l}})])}ie.subscribe(e=>{localStorage.setItem("images",JSON.stringify(e.map(t=>({name:t.name,data:t.data.src}))))});const ke=he(-1),Bt="/Vivian-level-editor/assets/trash.8b6cb216.svg";function lt(e,t,n){const l=e.slice();return l[15]=t[n],l[17]=n,l}function rt(e){let t,n,l,r,s,i,u,o,a,c;return{c(){t=h("li"),n=h("input"),l=b(),r=h("label"),s=h("img"),d(n,"type","radio"),d(n,"name","tile"+String(e[17])),d(n,"id","tile"+String(e[17])),n.__value=e[17],n.value=n.__value,d(n,"class","svelte-17mgxwz"),e[12][0].push(n),Ae(s.src,i=e[15].data.src)||d(s,"src",i),d(s,"alt",u=e[15].name),d(s,"title",o=e[15].name),d(s,"class","svelte-17mgxwz"),d(r,"for","tile"+String(e[17])),d(r,"class","svelte-17mgxwz"),J(r,"current",e[3]==e[17]),d(t,"class","tileSelector__itemList__tile svelte-17mgxwz")},m(f,m){S(f,t,m),_(t,n),n.checked=n.__value===e[3],_(t,l),_(t,r),_(r,s),a||(c=A(n,"change",e[13]),a=!0)},p(f,m){m&8&&(n.checked=n.__value===f[3]),m&16&&!Ae(s.src,i=f[15].data.src)&&d(s,"src",i),m&16&&u!==(u=f[15].name)&&d(s,"alt",u),m&16&&o!==(o=f[15].name)&&d(s,"title",o),m&8&&J(r,"current",f[3]==f[17])},d(f){f&&$(t),e[12][0].splice(e[12][0].indexOf(n),1),a=!1,c()}}}function Rt(e){let t,n,l,r,s,i,u,o,a,c,f,m,k,y,G,x,I,v,g,L,Y,N,oe,Me,ze,De,D,ee,E,Be,F,K,Re,Ge,Le,te,H,He,ue,ne,Ee,Je;function pt(p){e[9](p)}let We={label:"Width:",name:"width",type:"number",inputParams:{min:0,max:100,step:1}};e[2]!==void 0&&(We.value=e[2]),y=new et({props:We}),ge.push(()=>xe(y,"value",pt)),y.$on("keypress",e[6]);function vt(p){e[10](p)}let Xe={label:"Height:",name:"height",type:"number",inputParams:{min:0,max:100,step:1}};e[1]!==void 0&&(Xe.value=e[1]),I=new et({props:Xe}),ge.push(()=>xe(I,"value",vt)),I.$on("keypress",e[6]);let le=e[4],T=[];for(let p=0;p<le.length;p+=1)T[p]=rt(lt(e,le,p));return{c(){t=h("form"),n=h("div"),l=h("h3"),l.textContent="Project Manager",r=b(),s=h("button"),s.textContent="Import level set",i=b(),u=h("button"),u.textContent="Export level set",o=b(),a=h("button"),a.textContent="Delete current project",c=b(),f=h("div"),m=h("h3"),m.textContent="Grid Size",k=b(),R(y.$$.fragment),x=b(),R(I.$$.fragment),g=b(),L=h("button"),L.textContent="Resize",Y=b(),N=h("div"),oe=h("h3"),Me=de("Tile selector : "),ze=de(e[3]),De=b(),D=h("ul"),ee=h("li"),E=h("input"),Be=b(),F=h("label"),K=h("img"),Ge=b();for(let p=0;p<T.length;p+=1)T[p].c();Le=b(),te=h("li"),H=h("input"),He=b(),ue=h("label"),ue.textContent="+",d(l,"class","svelte-17mgxwz"),d(s,"class","svelte-17mgxwz"),d(u,"class","svelte-17mgxwz"),d(a,"class","warn svelte-17mgxwz"),d(n,"class","fileManager svelte-17mgxwz"),d(m,"class","svelte-17mgxwz"),d(L,"class","svelte-17mgxwz"),d(f,"class","gridSize svelte-17mgxwz"),d(oe,"class","svelte-17mgxwz"),d(E,"type","radio"),d(E,"name","tileEraser"),d(E,"id","tileEraser"),E.__value=-1,E.value=E.__value,d(E,"class","svelte-17mgxwz"),e[12][0].push(E),Ae(K.src,Re=Bt)||d(K,"src",Re),d(K,"alt","Eraser"),d(K,"title","Eraser"),d(K,"class","svelte-17mgxwz"),d(F,"for","tileEraser"),d(F,"class","noBg svelte-17mgxwz"),J(F,"current",e[3]==-1),d(ee,"class","tileSelector__itemList__tile svelte-17mgxwz"),d(H,"type","file"),d(H,"id","newTileButton"),d(H,"accept","*.png, *.jpg, *.jpeg"),d(H,"class","svelte-17mgxwz"),d(ue,"for","newTileButton"),d(ue,"class","noBg svelte-17mgxwz"),d(te,"class","tileSelector__itemList__tile svelte-17mgxwz"),d(D,"class","tileSelector__itemList svelte-17mgxwz"),d(N,"class","tileSelector"),d(t,"class","svelte-17mgxwz")},m(p,B){S(p,t,B),_(t,n),_(n,l),_(n,r),_(n,s),_(n,i),_(n,u),_(n,o),_(n,a),_(t,c),_(t,f),_(f,m),_(f,k),P(y,f,null),_(f,x),P(I,f,null),_(f,g),_(f,L),_(t,Y),_(t,N),_(N,oe),_(oe,Me),_(oe,ze),_(N,De),_(N,D),_(D,ee),_(ee,E),E.checked=E.__value===e[3],_(ee,Be),_(ee,F),_(F,K),_(D,Ge);for(let re=0;re<T.length;re+=1)T[re].m(D,null);_(D,Le),_(D,te),_(te,H),_(te,He),_(te,ue),ne=!0,Ee||(Je=[A(a,"click",be(e[8])),A(L,"click",be(e[7])),A(E,"change",e[11]),A(H,"change",e[14]),A(H,"change",be(e[5]))],Ee=!0)},p(p,B){const re={};!G&&B&4&&(G=!0,re.value=p[2],Ze(()=>G=!1)),y.$set(re);const Ye={};if(!v&&B&2&&(v=!0,Ye.value=p[1],Ze(()=>v=!1)),I.$set(Ye),(!ne||B&8)&&Oe(ze,p[3]),B&8&&(E.checked=E.__value===p[3]),(!ne||B&8)&&J(F,"current",p[3]==-1),B&24){le=p[4];let j;for(j=0;j<le.length;j+=1){const Fe=lt(p,le,j);T[j]?T[j].p(Fe,B):(T[j]=rt(Fe),T[j].c(),T[j].m(D,Le))}for(;j<T.length;j+=1)T[j].d(1);T.length=le.length}},i(p){ne||(z(y.$$.fragment,p),z(I.$$.fragment,p),ne=!0)},o(p){C(y.$$.fragment,p),C(I.$$.fragment,p),ne=!1},d(p){p&&$(t),q(y),q(I),e[12][0].splice(e[12][0].indexOf(E),1),ft(T,p),Ee=!1,W(Je)}}}function Gt(e){let t,n;return t=new gt({props:{title:"Configuration",shadow:"right",$$slots:{default:[Rt]},$$scope:{ctx:e}}}),{c(){R(t.$$.fragment)},m(l,r){P(t,l,r),n=!0},p(l,[r]){const s={};r&262175&&(s.$$scope={dirty:r,ctx:l}),t.$set(s)},i(l){n||(z(t.$$.fragment,l),n=!0)},o(l){C(t.$$.fragment,l),n=!1},d(l){q(t,l)}}}function Ht(e,t,n){let l,r,s,i;O(e,V,v=>n(1,l=v)),O(e,me,v=>n(2,r=v)),O(e,ke,v=>n(3,s=v)),O(e,ie,v=>n(4,i=v));let u;const o=()=>{let v=u[0],g=new FileReader;g.onload=()=>{const L=new Image;L.src=g.result,L.title=v.name,ie.update(Y=>[...Y,{name:v.name,data:L}])},g.readAsDataURL(v)},a=v=>{v.key==="Enter"&&(c(),v.preventDefault())},c=()=>{M.resize(r,l)},f=()=>{confirm("Are you sure you want to delete this project?")&&(M.reset(),ie.set([]))},m=[[]];function k(v){r=v,me.set(r)}function y(v){l=v,V.set(l)}function G(){s=this.__value,ke.set(s)}function x(){s=this.__value,ke.set(s)}function I(){u=this.files,n(0,u)}return[u,l,r,s,i,o,a,c,f,k,y,G,m,x,I]}class Jt extends Z{constructor(t){super(),Q(this,t,Ht,Gt,X,{})}}function Wt(e){let t,n,l,r,s,i;return{c(){t=h("div"),n=h("canvas"),d(n,"width",l=e[2]*32),d(n,"height",r=e[1]*32),d(t,"class","grid svelte-2utg53")},m(u,o){S(u,t,o),_(t,n),e[9](n),s||(i=[A(window,"resize",e[3]),A(n,"mousedown",be(e[4])),A(n,"mousemove",e[6]),A(n,"contextmenu",e[5])],s=!0)},p(u,[o]){o&4&&l!==(l=u[2]*32)&&d(n,"width",l),o&2&&r!==(r=u[1]*32)&&d(n,"height",r)},i:w,o:w,d(u){u&&$(t),e[9](null),s=!1,W(i)}}}function Xt(e,t,n){let l,r,s,i,u;O(e,M,g=>n(8,s=g)),O(e,ie,g=>n(11,i=g)),O(e,V,g=>n(12,u=g));let{gridId:o}=t,a,c;const f=()=>{!c||(c.clearRect(0,0,a.width,a.height),s[o].forEach((g,L)=>{g.forEach((Y,N)=>{L==u?(c.fillStyle="black",c.fillRect(N*32,L*32,32,32)):Y===-1?(c.fillStyle="white",c.fillRect(N*32,L*32,32,32)):c.drawImage(i[Y].data,N*32,L*32,32,32)})}))},m=()=>{if(c){f(),c.beginPath(),c.strokeStyle="black",c.fillStyle="black",c.lineWidth=1;for(let g=0;g<l;g++)c.moveTo(g*32,0),c.lineTo(g*32,r*32);for(let g=0;g<r;g++)c.moveTo(0,g*32),c.lineTo(l*32,g*32);c.stroke()}},k=(g,L)=>({x:Math.floor(g/a.width*l),y:Math.floor(L/a.height*r)}),y=dt(),G=g=>{if(console.log(g.buttons),g.buttons==2&&!g.shiftKey)return y("erase",k(g.offsetX,g.offsetY)),!1;if(g.buttons==1)return y("click",k(g.offsetX,g.offsetY)),!0},x=g=>{if(!g.shiftKey){g.preventDefault(),G(g);return}},I=g=>{g.buttons==2?y("erase",k(g.offsetX,g.offsetY)):g.buttons==1&&y("click",k(g.offsetX,g.offsetY))};Lt(()=>{if(c=a.getContext("2d"),!c){alert("Could not get canvas context");return}c.imageSmoothingEnabled=!0,console.log("Context loaded"),o>-1&&m()}),Et(()=>{o>-1&&m()});function v(g){ge[g?"unshift":"push"](()=>{a=g,n(0,a)})}return e.$$set=g=>{"gridId"in g&&n(7,o=g.gridId)},e.$$.update=()=>{e.$$.dirty&384&&n(2,l=s[o][0].length),e.$$.dirty&384&&n(1,r=s[o].length),e.$$.dirty&384&&s[o]&&m()},[a,r,l,m,G,x,I,o,s,v]}class ht extends Z{constructor(t){super(),Q(this,t,Xt,Wt,X,{gridId:7})}}function Yt(e){let t;return{c(){t=h("p"),t.textContent="There is currently no level selected.",d(t,"class","center svelte-92ejb9")},m(n,l){S(n,t,l)},p:w,i:w,o:w,d(n){n&&$(t)}}}function Ft(e){let t,n,l,r,s,i;return{c(){t=h("div"),n=h("p"),n.textContent="There is currently no levels.",l=b(),r=h("button"),r.textContent="Add a new level",d(t,"class","center svelte-92ejb9")},m(u,o){S(u,t,o),_(t,n),_(t,l),_(t,r),s||(i=A(r,"click",e[2]),s=!0)},p:w,i:w,o:w,d(u){u&&$(t),s=!1,i()}}}function Kt(e){let t,n,l;return n=new ht({props:{gridId:e[0]}}),n.$on("click",e[3]),n.$on("erase",e[4]),{c(){t=h("div"),R(n.$$.fragment),d(t,"class","editor__gridContener svelte-92ejb9")},m(r,s){S(r,t,s),P(n,t,null),l=!0},p(r,s){const i={};s&1&&(i.gridId=r[0]),n.$set(i)},i(r){l||(z(n.$$.fragment,r),l=!0)},o(r){C(n.$$.fragment,r),l=!1},d(r){r&&$(t),q(n)}}}function Ut(e){let t,n,l,r;const s=[Kt,Ft,Yt],i=[];function u(o,a){return o[0]!=-1&&o[1].length>0?0:o[1].length==0?1:2}return n=u(e),l=i[n]=s[n](e),{c(){t=h("section"),l.c(),d(t,"class","editor svelte-92ejb9")},m(o,a){S(o,t,a),i[n].m(t,null),r=!0},p(o,[a]){let c=n;n=u(o),n===c?i[n].p(o,a):(Pe(),C(i[c],1,1,()=>{i[c]=null}),qe(),l=i[n],l?l.p(o,a):(l=i[n]=s[n](o),l.c()),z(l,1),l.m(t,null))},i(o){r||(z(l),r=!0)},o(o){C(l),r=!1},d(o){o&&$(t),i[n].d()}}}function Vt(e,t,n){let l,r,s;O(e,ke,a=>n(5,l=a)),O(e,Se,a=>n(0,r=a)),O(e,M,a=>n(1,s=a));const i=()=>{M.addLevel(),Se.set(s.length-1)},u=(a,c=!1)=>{console.log(a.detail,c),M.setLevelCell(r,a.detail.x,a.detail.y,c?-1:l)};return[r,s,i,u,a=>{u(a,!0)}]}class Qt extends Z{constructor(t){super(),Q(this,t,Vt,Ut,X,{})}}function st(e,t,n){const l=e.slice();return l[5]=t[n],l[7]=n,l}function Zt(e){let t;return{c(){t=h("p"),t.textContent="There is currently no levels."},m(n,l){S(n,t,l)},p:w,i:w,o:w,d(n){n&&$(t)}}}function xt(e){let t,n,l=e[0],r=[];for(let i=0;i<l.length;i+=1)r[i]=it(st(e,l,i));const s=i=>C(r[i],1,1,()=>{r[i]=null});return{c(){t=h("ul");for(let i=0;i<r.length;i+=1)r[i].c();d(t,"class","levelList__list svelte-ynwbqm")},m(i,u){S(i,t,u);for(let o=0;o<r.length;o+=1)r[o].m(t,null);n=!0},p(i,u){if(u&3){l=i[0];let o;for(o=0;o<l.length;o+=1){const a=st(i,l,o);r[o]?(r[o].p(a,u),z(r[o],1)):(r[o]=it(a),r[o].c(),z(r[o],1),r[o].m(t,null))}for(Pe(),o=l.length;o<r.length;o+=1)s(o);qe()}},i(i){if(!n){for(let u=0;u<l.length;u+=1)z(r[u]);n=!0}},o(i){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)C(r[u]);n=!1},d(i){i&&$(t),ft(r,i)}}}function it(e){let t,n,l,r,s,i,u,o,a;return s=new ht({props:{gridId:e[7]}}),{c(){t=h("li"),n=h("input"),l=b(),r=h("label"),R(s.$$.fragment),i=b(),d(n,"type","radio"),d(n,"name","level"),d(n,"id","level-"+e[7]),n.__value=e[7],n.value=n.__value,d(n,"class","svelte-ynwbqm"),e[4][0].push(n),d(r,"class","levelList__list__grid svelte-ynwbqm"),d(r,"for","level-"+e[7]),d(t,"class","svelte-ynwbqm")},m(c,f){S(c,t,f),_(t,n),n.checked=n.__value===e[1],_(t,l),_(t,r),P(s,r,null),_(t,i),u=!0,o||(a=A(n,"change",e[3]),o=!0)},p(c,f){f&2&&(n.checked=n.__value===c[1])},i(c){u||(z(s.$$.fragment,c),u=!0)},o(c){C(s.$$.fragment,c),u=!1},d(c){c&&$(t),e[4][0].splice(e[4][0].indexOf(n),1),q(s),o=!1,a()}}}function en(e){let t,n,l,r,s,i,u,o;const a=[xt,Zt],c=[];function f(m,k){return m[0].length!=0?0:1}return r=f(e),s=c[r]=a[r](e),{c(){t=h("button"),t.textContent="Add a new level",n=b(),l=h("div"),s.c(),d(t,"class","svelte-ynwbqm"),d(l,"class","levelList svelte-ynwbqm")},m(m,k){S(m,t,k),S(m,n,k),S(m,l,k),c[r].m(l,null),i=!0,u||(o=A(t,"click",e[2]),u=!0)},p(m,k){let y=r;r=f(m),r===y?c[r].p(m,k):(Pe(),C(c[y],1,1,()=>{c[y]=null}),qe(),s=c[r],s?s.p(m,k):(s=c[r]=a[r](m),s.c()),z(s,1),s.m(l,null))},i(m){i||(z(s),i=!0)},o(m){C(s),i=!1},d(m){m&&$(t),m&&$(n),m&&$(l),c[r].d(),u=!1,o()}}}function tn(e){let t,n;return t=new gt({props:{title:"Level Selector",shadow:"left",$$slots:{default:[en]},$$scope:{ctx:e}}}),{c(){R(t.$$.fragment)},m(l,r){P(t,l,r),n=!0},p(l,[r]){const s={};r&259&&(s.$$scope={dirty:r,ctx:l}),t.$set(s)},i(l){n||(z(t.$$.fragment,l),n=!0)},o(l){C(t.$$.fragment,l),n=!1},d(l){q(t,l)}}}function nn(e,t,n){let l,r;O(e,M,o=>n(0,l=o)),O(e,Se,o=>n(1,r=o));const s=o=>{M.addLevel()},i=[[]];function u(){r=this.__value,Se.set(r)}return[l,r,s,u,i]}class ln extends Z{constructor(t){super(),Q(this,t,nn,tn,X,{})}}function rn(e){let t,n,l,r,s,i,u,o,a;return r=new Jt({}),i=new Qt({}),o=new ln({}),{c(){t=h("header"),t.innerHTML="<h1>Vivian level Editor</h1>",n=b(),l=h("main"),R(r.$$.fragment),s=b(),R(i.$$.fragment),u=b(),R(o.$$.fragment),d(l,"class","svelte-1fszlhy")},m(c,f){S(c,t,f),S(c,n,f),S(c,l,f),P(r,l,null),_(l,s),P(i,l,null),_(l,u),P(o,l,null),a=!0},p:w,i(c){a||(z(r.$$.fragment,c),z(i.$$.fragment,c),z(o.$$.fragment,c),a=!0)},o(c){C(r.$$.fragment,c),C(i.$$.fragment,c),C(o.$$.fragment,c),a=!1},d(c){c&&$(t),c&&$(n),c&&$(l),q(r),q(i),q(o)}}}class sn extends Z{constructor(t){super(),Q(this,t,null,rn,X,{})}}new sn({target:document.getElementById("app")});
