(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function y(){}function ke(e,t){for(const n in t)e[n]=t[n];return e}function ot(e){return e()}function Ke(){return Object.create(null)}function H(e){e.forEach(ot)}function ut(e){return typeof e=="function"}function J(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let me;function Ae(e,t){return me||(me=document.createElement("a")),me.href=t,e===me.href}function bt(e){return Object.keys(e).length===0}function ct(e,...t){if(e==null)return y;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function $e(e){let t;return ct(e,n=>t=n)(),t}function O(e,t,n){e.$$.on_destroy.push(ct(t,n))}function yt(e,t,n,l){if(e){const r=at(e,t,n,l);return e[0](r)}}function at(e,t,n,l){return e[1]&&l?ke(n.ctx.slice(),e[1](l(t))):n.ctx}function wt(e,t,n,l){if(e[2]&&l){const r=e[2](l(n));if(t.dirty===void 0)return r;if(typeof r=="object"){const s=[],i=Math.max(t.dirty.length,r.length);for(let o=0;o<i;o+=1)s[o]=t.dirty[o]|r[o];return s}return t.dirty|r}return t.dirty}function kt(e,t,n,l,r,s){if(r){const i=at(t,n,l,s);e.p(i,r)}}function $t(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let l=0;l<n;l++)t[l]=-1;return t}return-1}function Ue(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function Ve(e){return e==null?"":e}function g(e,t){e.appendChild(t)}function $(e,t,n){e.insertBefore(t,n||null)}function k(e){e.parentNode.removeChild(e)}function ft(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function h(e){return document.createElement(e)}function ae(e){return document.createTextNode(e)}function v(){return ae(" ")}function C(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function ve(e){return function(t){return t.preventDefault(),e.call(this,t)}}function d(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Qe(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const l in t)t[l]==null?e.removeAttribute(l):l==="style"?e.style.cssText=t[l]:l==="__value"?e.value=e[l]=t[l]:n[l]&&n[l].set?e[l]=t[l]:d(e,l,t[l])}function St(e){return Array.from(e.childNodes)}function Oe(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function G(e,t,n){e.classList[n?"add":"remove"](t)}function zt(e,t,{bubbles:n=!1,cancelable:l=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,l,t),r}let fe;function ce(e){fe=e}function Ne(){if(!fe)throw new Error("Function called outside component initialization");return fe}function Lt(e){Ne().$$.on_mount.push(e)}function Ct(e){Ne().$$.after_update.push(e)}function dt(){const e=Ne();return(t,n,{cancelable:l=!1}={})=>{const r=e.$$.callbacks[t];if(r){const s=zt(t,n,{cancelable:l});return r.slice().forEach(i=>{i.call(e,s)}),!s.defaultPrevented}return!0}}function Et(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(l=>l.call(this,t))}const ue=[],de=[],be=[],Te=[],At=Promise.resolve();let Ie=!1;function Tt(){Ie||(Ie=!0,At.then(_t))}function je(e){be.push(e)}function Ze(e){Te.push(e)}const Ee=new Set;let pe=0;function _t(){const e=fe;do{for(;pe<ue.length;){const t=ue[pe];pe++,ce(t),It(t.$$)}for(ce(null),ue.length=0,pe=0;de.length;)de.pop()();for(let t=0;t<be.length;t+=1){const n=be[t];Ee.has(n)||(Ee.add(n),n())}be.length=0}while(ue.length);for(;Te.length;)Te.pop()();Ie=!1,Ee.clear(),ce(e)}function It(e){if(e.fragment!==null){e.update(),H(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(je)}}const ye=new Set;let F;function Pe(){F={r:0,c:[],p:F}}function qe(){F.r||H(F.c),F=F.p}function S(e,t){e&&e.i&&(ye.delete(e),e.i(t))}function L(e,t,n,l){if(e&&e.o){if(ye.has(e))return;ye.add(e),F.c.push(()=>{ye.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}function jt(e,t){const n={},l={},r={$$scope:1};let s=e.length;for(;s--;){const i=e[s],o=t[s];if(o){for(const u in i)u in o||(l[u]=1);for(const u in o)r[u]||(n[u]=o[u],r[u]=1);e[s]=o}else for(const u in i)r[u]=1}for(const i in l)i in n||(n[i]=void 0);return n}function xe(e,t,n){const l=e.$$.props[t];l!==void 0&&(e.$$.bound[l]=n,n(e.$$.ctx[l]))}function B(e){e&&e.c()}function N(e,t,n,l){const{fragment:r,after_update:s}=e.$$;r&&r.m(t,n),l||je(()=>{const i=e.$$.on_mount.map(ot).filter(ut);e.$$.on_destroy?e.$$.on_destroy.push(...i):H(i),e.$$.on_mount=[]}),s.forEach(je)}function P(e,t){const n=e.$$;n.fragment!==null&&(H(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ot(e,t){e.$$.dirty[0]===-1&&(ue.push(e),Tt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function K(e,t,n,l,r,s,i,o=[-1]){const u=fe;ce(e);const c=e.$$={fragment:null,ctx:[],props:s,update:y,not_equal:r,bound:Ke(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:Ke(),dirty:o,skip_bound:!1,root:t.target||u.$$.root};i&&i(c.root);let a=!1;if(c.ctx=n?n(e,t.props||{},(f,m,...w)=>{const b=w.length?w[0]:m;return c.ctx&&r(c.ctx[f],c.ctx[f]=b)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](b),a&&Ot(e,f)),m}):[],c.update(),a=!0,H(c.before_update),c.fragment=l?l(c.ctx):!1,t.target){if(t.hydrate){const f=St(t.target);c.fragment&&c.fragment.l(f),f.forEach(k)}else c.fragment&&c.fragment.c();t.intro&&S(e.$$.fragment),N(e,t.target,t.anchor,t.customElement),_t()}ce(u)}class U{$destroy(){P(this,1),this.$destroy=y}$on(t,n){if(!ut(n))return y;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(t){this.$$set&&!bt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Nt(e){let t,n,l,r,s,i,o,u=[{type:e[3]},{name:e[2]},{id:e[2]},e[4],{value:e[0]}],c={};for(let a=0;a<u.length;a+=1)c=ke(c,u[a]);return{c(){t=h("div"),n=h("label"),l=ae(e[1]),r=v(),s=h("input"),d(n,"for",e[2]),Qe(s,c)},m(a,f){$(a,t,f),g(t,n),g(n,l),g(t,r),g(t,s),s.value=c.value,s.autofocus&&s.focus(),i||(o=[C(s,"input",e[5]),C(s,"keypress",e[6])],i=!0)},p(a,[f]){f&2&&Oe(l,a[1]),f&4&&d(n,"for",a[2]),Qe(s,c=jt(u,[f&8&&{type:a[3]},f&4&&{name:a[2]},f&4&&{id:a[2]},f&16&&a[4],f&1&&s.value!==a[0]&&{value:a[0]}])),"value"in c&&(s.value=c.value)},i:y,o:y,d(a){a&&k(t),i=!1,H(o)}}}function Pt(e,t,n){let{value:l=""}=t,{label:r="Input"}=t,{name:s="input"}=t,{type:i="text"}=t,{inputParams:o={}}=t;const u=dt(),c=f=>{n(0,l=f.target.value),(i==="number"||i==="range")&&n(0,l=Number(l)),u("input",l)};function a(f){Et.call(this,e,f)}return e.$$set=f=>{"value"in f&&n(0,l=f.value),"label"in f&&n(1,r=f.label),"name"in f&&n(2,s=f.name),"type"in f&&n(3,i=f.type),"inputParams"in f&&n(4,o=f.inputParams)},[l,r,s,i,o,c,a]}class et extends U{constructor(t){super(),K(this,t,Pt,Nt,J,{value:0,label:1,name:2,type:3,inputParams:4})}}function qt(e){let t,n,l,r,s,i,o,u;const c=e[4].default,a=yt(c,e,e[3],null);return{c(){t=h("nav"),n=h("h2"),l=ae(e[0]),r=v(),s=h("hr"),i=v(),a&&a.c(),d(n,"class","svelte-15oiif1"),d(s,"class","svelte-15oiif1"),d(t,"class",o=Ve(e[2].class)+" svelte-15oiif1"),G(t,"leftShadow",e[1]=="left"),G(t,"rightShadow",e[1]=="right")},m(f,m){$(f,t,m),g(t,n),g(n,l),g(t,r),g(t,s),g(t,i),a&&a.m(t,null),u=!0},p(f,[m]){(!u||m&1)&&Oe(l,f[0]),a&&a.p&&(!u||m&8)&&kt(a,c,f,f[3],u?wt(c,f[3],m,null):$t(f[3]),null),(!u||m&4&&o!==(o=Ve(f[2].class)+" svelte-15oiif1"))&&d(t,"class",o),(!u||m&6)&&G(t,"leftShadow",f[1]=="left"),(!u||m&6)&&G(t,"rightShadow",f[1]=="right")},i(f){u||(S(a,f),u=!0)},o(f){L(a,f),u=!1},d(f){f&&k(t),a&&a.d(f)}}}function Mt(e,t,n){let{$$slots:l={},$$scope:r}=t,{title:s="Undefined"}=t,{shadow:i="left"}=t;return e.$$set=o=>{n(2,t=ke(ke({},t),Ue(o))),"title"in o&&n(0,s=o.title),"shadow"in o&&n(1,i=o.shadow),"$$scope"in o&&n(3,r=o.$$scope)},t=Ue(t),[s,i,t,r,l]}class gt extends U{constructor(t){super(),K(this,t,Mt,qt,J,{title:0,shadow:1})}}const re=[];function he(e,t=y){let n;const l=new Set;function r(o){if(J(e,o)&&(e=o,n)){const u=!re.length;for(const c of l)c[1](),re.push(c,e);if(u){for(let c=0;c<re.length;c+=2)re[c][0](re[c+1]);re.length=0}}}function s(o){r(o(e))}function i(o,u=y){const c=[o,u];return l.add(c),l.size===1&&(n=t(r)||y),o(e),()=>{l.delete(c),l.size===0&&(n(),n=null)}}return{set:r,update:s,subscribe:i}}const Se=he(-1);function ht(e,t,n){const{subscribe:l,set:r,update:s}=he(e);return{subscribe:l,set(i){i<t?i=t:i>n&&(i=n),r(i)},update(i){s(o=>(o=i(o),o<t?o=t:o>n&&(o=n),o))}}}const _e=ht(10,1,50),ge=ht(10,1,50);function Dt(){const{subscribe:e,set:t,update:n}=he(new Array);return{subscribe:e,set:t,addLevel(){n(l=>[...l,Array.from({length:$e(ge)},r=>Array($e(_e)).fill(-1))])},pushLevel(l){n(r=>[...r,l])},removeLevel(l){n(r=>r.filter((s,i)=>i!==l))},setLevelCell(l,r,s,i){n(o=>(o[l][s][r]=i,o))},resize(l,r){n(s=>s.map(i=>{const o=i.map(u=>u.length>=l?u.slice(0,l):[...u,...Array(l-u.length).fill(-1)]);return o.length>=r?o.slice(0,r):[...o,...Array.from({length:r-o.length},u=>Array(l).fill(-1))]}))},reset(){n(l=>new Array)}}}const q=Dt(),tt=localStorage.getItem("levels");if(tt){const e=JSON.parse(tt);q.set(e.levels),_e.set(e.width),ge.set(e.height)}q.subscribe(e=>{localStorage.setItem("levels",JSON.stringify({width:$e(_e),height:$e(ge),levels:e}))});const se=he(Array()),nt=localStorage.getItem("images");if(nt){const e=JSON.parse(nt);se.update(t=>[...t,...e.map(n=>{const l=new Image;return l.src=n.data,{name:n.name,data:l}})])}se.subscribe(e=>{localStorage.setItem("images",JSON.stringify(e.map(t=>({name:t.name,data:t.data.src}))))});const we=he(0),Bt="/Vivian-level-editor/assets/trash.8b6cb216.svg";function lt(e,t,n){const l=e.slice();return l[15]=t[n],l[17]=n,l}function rt(e){let t,n,l,r,s,i,o,u,c;return{c(){t=h("li"),n=h("input"),l=v(),r=h("label"),s=h("img"),d(n,"type","radio"),d(n,"name","tile"+String(e[17])),d(n,"id","tile"+String(e[17])),n.__value=e[17],n.value=n.__value,d(n,"class","svelte-17mgxwz"),e[12][0].push(n),Ae(s.src,i=e[15].data.src)||d(s,"src",i),d(s,"alt",o=e[15].name),d(s,"class","svelte-17mgxwz"),d(r,"for","tile"+String(e[17])),d(r,"class","svelte-17mgxwz"),G(r,"current",e[3]==e[17]),d(t,"class","tileSelector__itemList__tile svelte-17mgxwz")},m(a,f){$(a,t,f),g(t,n),n.checked=n.__value===e[3],g(t,l),g(t,r),g(r,s),u||(c=C(n,"change",e[13]),u=!0)},p(a,f){f&8&&(n.checked=n.__value===a[3]),f&16&&!Ae(s.src,i=a[15].data.src)&&d(s,"src",i),f&16&&o!==(o=a[15].name)&&d(s,"alt",o),f&8&&G(r,"current",a[3]==a[17])},d(a){a&&k(t),e[12][0].splice(e[12][0].indexOf(n),1),u=!1,c()}}}function Rt(e){let t,n,l,r,s,i,o,u,c,a,f,m,w,b,W,V,A,_,j,T,X,Q,ie,Me,ze,De,M,Z,z,Be,Y,x,Re,Ge,Le,ee,R,He,oe,te,Ce,Je;function pt(p){e[9](p)}let We={label:"Width:",name:"width",type:"number",inputParams:{min:0,max:100,step:1}};e[2]!==void 0&&(We.value=e[2]),b=new et({props:We}),de.push(()=>xe(b,"value",pt)),b.$on("keypress",e[6]);function vt(p){e[10](p)}let Xe={label:"Height:",name:"height",type:"number",inputParams:{min:0,max:100,step:1}};e[1]!==void 0&&(Xe.value=e[1]),A=new et({props:Xe}),de.push(()=>xe(A,"value",vt)),A.$on("keypress",e[6]);let ne=e[4],E=[];for(let p=0;p<ne.length;p+=1)E[p]=rt(lt(e,ne,p));return{c(){t=h("form"),n=h("div"),l=h("h3"),l.textContent="Project Manager",r=v(),s=h("button"),s.textContent="Import level set",i=v(),o=h("button"),o.textContent="Export level set",u=v(),c=h("button"),c.textContent="Delete current project",a=v(),f=h("div"),m=h("h3"),m.textContent="Grid Size",w=v(),B(b.$$.fragment),V=v(),B(A.$$.fragment),j=v(),T=h("button"),T.textContent="Resize",X=v(),Q=h("div"),ie=h("h3"),Me=ae("Tile selector : "),ze=ae(e[3]),De=v(),M=h("ul"),Z=h("li"),z=h("input"),Be=v(),Y=h("label"),x=h("img"),Ge=v();for(let p=0;p<E.length;p+=1)E[p].c();Le=v(),ee=h("li"),R=h("input"),He=v(),oe=h("label"),oe.textContent="+",d(l,"class","svelte-17mgxwz"),d(s,"class","svelte-17mgxwz"),d(o,"class","svelte-17mgxwz"),d(c,"class","warn svelte-17mgxwz"),d(n,"class","fileManager svelte-17mgxwz"),d(m,"class","svelte-17mgxwz"),d(T,"class","svelte-17mgxwz"),d(f,"class","gridSize svelte-17mgxwz"),d(ie,"class","svelte-17mgxwz"),d(z,"type","radio"),d(z,"name","tileEraser"),d(z,"id","tileEraser"),z.__value=-1,z.value=z.__value,d(z,"class","svelte-17mgxwz"),e[12][0].push(z),Ae(x.src,Re=Bt)||d(x,"src",Re),d(x,"alt","Empty tile"),d(x,"class","svelte-17mgxwz"),d(Y,"for","tileEraser"),d(Y,"class","noBg svelte-17mgxwz"),G(Y,"current",e[3]==-1),d(Z,"class","tileSelector__itemList__tile svelte-17mgxwz"),d(R,"type","file"),d(R,"id","newTileButton"),d(R,"accept","*.png, *.jpg, *.jpeg"),d(R,"class","svelte-17mgxwz"),d(oe,"for","newTileButton"),d(oe,"class","noBg svelte-17mgxwz"),d(ee,"class","tileSelector__itemList__tile svelte-17mgxwz"),d(M,"class","tileSelector__itemList svelte-17mgxwz"),d(Q,"class","tileSelector"),d(t,"class","svelte-17mgxwz")},m(p,D){$(p,t,D),g(t,n),g(n,l),g(n,r),g(n,s),g(n,i),g(n,o),g(n,u),g(n,c),g(t,a),g(t,f),g(f,m),g(f,w),N(b,f,null),g(f,V),N(A,f,null),g(f,j),g(f,T),g(t,X),g(t,Q),g(Q,ie),g(ie,Me),g(ie,ze),g(Q,De),g(Q,M),g(M,Z),g(Z,z),z.checked=z.__value===e[3],g(Z,Be),g(Z,Y),g(Y,x),g(M,Ge);for(let le=0;le<E.length;le+=1)E[le].m(M,null);g(M,Le),g(M,ee),g(ee,R),g(ee,He),g(ee,oe),te=!0,Ce||(Je=[C(c,"click",ve(e[8])),C(T,"click",ve(e[7])),C(z,"change",e[11]),C(R,"change",e[14]),C(R,"change",ve(e[5]))],Ce=!0)},p(p,D){const le={};!W&&D&4&&(W=!0,le.value=p[2],Ze(()=>W=!1)),b.$set(le);const Ye={};if(!_&&D&2&&(_=!0,Ye.value=p[1],Ze(()=>_=!1)),A.$set(Ye),(!te||D&8)&&Oe(ze,p[3]),D&8&&(z.checked=z.__value===p[3]),(!te||D&8)&&G(Y,"current",p[3]==-1),D&24){ne=p[4];let I;for(I=0;I<ne.length;I+=1){const Fe=lt(p,ne,I);E[I]?E[I].p(Fe,D):(E[I]=rt(Fe),E[I].c(),E[I].m(M,Le))}for(;I<E.length;I+=1)E[I].d(1);E.length=ne.length}},i(p){te||(S(b.$$.fragment,p),S(A.$$.fragment,p),te=!0)},o(p){L(b.$$.fragment,p),L(A.$$.fragment,p),te=!1},d(p){p&&k(t),P(b),P(A),e[12][0].splice(e[12][0].indexOf(z),1),ft(E,p),Ce=!1,H(Je)}}}function Gt(e){let t,n;return t=new gt({props:{title:"Configuration",shadow:"right",$$slots:{default:[Rt]},$$scope:{ctx:e}}}),{c(){B(t.$$.fragment)},m(l,r){N(t,l,r),n=!0},p(l,[r]){const s={};r&262175&&(s.$$scope={dirty:r,ctx:l}),t.$set(s)},i(l){n||(S(t.$$.fragment,l),n=!0)},o(l){L(t.$$.fragment,l),n=!1},d(l){P(t,l)}}}function Ht(e,t,n){let l,r,s,i;O(e,ge,_=>n(1,l=_)),O(e,_e,_=>n(2,r=_)),O(e,we,_=>n(3,s=_)),O(e,se,_=>n(4,i=_));let o;const u=()=>{let _=o[0],j=new FileReader;j.onload=()=>{const T=new Image;T.src=j.result,T.title=_.name,se.update(X=>[...X,{name:_.name,data:T}])},j.readAsDataURL(_)},c=_=>{_.key==="Enter"&&(a(),_.preventDefault())},a=()=>{q.resize(r,l)},f=()=>{confirm("Are you sure you want to delete this project?")&&(q.reset(),se.set([]))},m=[[]];function w(_){r=_,_e.set(r)}function b(_){l=_,ge.set(l)}function W(){s=this.__value,we.set(s)}function V(){s=this.__value,we.set(s)}function A(){o=this.files,n(0,o)}return[o,l,r,s,i,u,c,a,f,w,b,W,m,V,A]}class Jt extends U{constructor(t){super(),K(this,t,Ht,Gt,J,{})}}function Wt(e){let t,n,l,r,s,i;return{c(){t=h("div"),n=h("canvas"),d(n,"width",l=e[2]*32),d(n,"height",r=e[1]*32),d(t,"class","grid svelte-2utg53")},m(o,u){$(o,t,u),g(t,n),e[9](n),s||(i=[C(window,"resize",e[3]),C(n,"mousedown",ve(e[4])),C(n,"mousemove",e[6]),C(n,"contextmenu",e[5])],s=!0)},p(o,[u]){u&4&&l!==(l=o[2]*32)&&d(n,"width",l),u&2&&r!==(r=o[1]*32)&&d(n,"height",r)},i:y,o:y,d(o){o&&k(t),e[9](null),s=!1,H(i)}}}function Xt(e,t,n){let l,r,s,i;O(e,q,_=>n(8,s=_)),O(e,se,_=>n(11,i=_));let{gridId:o}=t,u,c;const a=()=>{!c||(c.clearRect(0,0,u.width,u.height),s[o].forEach((_,j)=>{_.forEach((T,X)=>{T===-1?(c.fillStyle="white",c==null||c.fillRect(X*32,j*32,32,32)):c==null||c.drawImage(i[T].data,X*32,j*32,32,32)})}))},f=()=>{if(c){a(),c.beginPath(),c.strokeStyle="black",c.fillStyle="black",c.lineWidth=1;for(let _=0;_<l;_++)c.moveTo(_*32,0),c.lineTo(_*32,r*32);for(let _=0;_<r;_++)c.moveTo(0,_*32),c.lineTo(l*32,_*32);c.stroke()}},m=(_,j)=>({x:Math.floor(_/u.width*l),y:Math.floor(j/u.height*r)}),w=dt(),b=_=>{if(console.log(_.buttons),_.buttons==2&&!_.shiftKey)return w("erase",m(_.offsetX,_.offsetY)),!1;if(_.buttons==1)return w("click",m(_.offsetX,_.offsetY)),!0},W=_=>{if(!_.shiftKey){_.preventDefault(),b(_);return}},V=_=>{_.buttons==2?w("erase",m(_.offsetX,_.offsetY)):_.buttons==1&&w("click",m(_.offsetX,_.offsetY))};Lt(()=>{if(c=u.getContext("2d"),!c){alert("Could not get canvas context");return}c.imageSmoothingEnabled=!0,console.log("Context loaded"),o>-1&&f()}),Ct(()=>{o>-1&&f()});function A(_){de[_?"unshift":"push"](()=>{u=_,n(0,u)})}return e.$$set=_=>{"gridId"in _&&n(7,o=_.gridId)},e.$$.update=()=>{e.$$.dirty&384&&n(2,l=s[o][0].length),e.$$.dirty&384&&n(1,r=s[o].length),e.$$.dirty&384&&s[o]&&f()},[u,r,l,f,b,W,V,o,s,A]}class mt extends U{constructor(t){super(),K(this,t,Xt,Wt,J,{gridId:7})}}function Yt(e){let t;return{c(){t=h("p"),t.textContent="There is currently no level selected.",d(t,"class","center svelte-92ejb9")},m(n,l){$(n,t,l)},p:y,i:y,o:y,d(n){n&&k(t)}}}function Ft(e){let t,n,l,r,s,i;return{c(){t=h("div"),n=h("p"),n.textContent="There is currently no levels.",l=v(),r=h("button"),r.textContent="Add a new level",d(t,"class","center svelte-92ejb9")},m(o,u){$(o,t,u),g(t,n),g(t,l),g(t,r),s||(i=C(r,"click",e[2]),s=!0)},p:y,i:y,o:y,d(o){o&&k(t),s=!1,i()}}}function Kt(e){let t,n,l;return n=new mt({props:{gridId:e[0]}}),n.$on("click",e[3]),n.$on("erase",e[4]),{c(){t=h("div"),B(n.$$.fragment),d(t,"class","editor__gridContener svelte-92ejb9")},m(r,s){$(r,t,s),N(n,t,null),l=!0},p(r,s){const i={};s&1&&(i.gridId=r[0]),n.$set(i)},i(r){l||(S(n.$$.fragment,r),l=!0)},o(r){L(n.$$.fragment,r),l=!1},d(r){r&&k(t),P(n)}}}function Ut(e){let t,n,l,r;const s=[Kt,Ft,Yt],i=[];function o(u,c){return u[0]!=-1&&u[1].length>0?0:u[1].length==0?1:2}return n=o(e),l=i[n]=s[n](e),{c(){t=h("section"),l.c(),d(t,"class","editor svelte-92ejb9")},m(u,c){$(u,t,c),i[n].m(t,null),r=!0},p(u,[c]){let a=n;n=o(u),n===a?i[n].p(u,c):(Pe(),L(i[a],1,1,()=>{i[a]=null}),qe(),l=i[n],l?l.p(u,c):(l=i[n]=s[n](u),l.c()),S(l,1),l.m(t,null))},i(u){r||(S(l),r=!0)},o(u){L(l),r=!1},d(u){u&&k(t),i[n].d()}}}function Vt(e,t,n){let l,r,s;O(e,we,c=>n(5,l=c)),O(e,Se,c=>n(0,r=c)),O(e,q,c=>n(1,s=c));const i=()=>{q.addLevel(),Se.set(s.length-1)},o=(c,a=!1)=>{console.log(c.detail,a),q.setLevelCell(r,c.detail.x,c.detail.y,a?-1:l)};return[r,s,i,o,c=>{o(c,!0)}]}class Qt extends U{constructor(t){super(),K(this,t,Vt,Ut,J,{})}}function st(e,t,n){const l=e.slice();return l[5]=t[n],l[7]=n,l}function Zt(e){let t;return{c(){t=h("p"),t.textContent="There is currently no levels."},m(n,l){$(n,t,l)},p:y,i:y,o:y,d(n){n&&k(t)}}}function xt(e){let t,n,l=e[0],r=[];for(let i=0;i<l.length;i+=1)r[i]=it(st(e,l,i));const s=i=>L(r[i],1,1,()=>{r[i]=null});return{c(){t=h("ul");for(let i=0;i<r.length;i+=1)r[i].c();d(t,"class","levelList__list svelte-ynwbqm")},m(i,o){$(i,t,o);for(let u=0;u<r.length;u+=1)r[u].m(t,null);n=!0},p(i,o){if(o&3){l=i[0];let u;for(u=0;u<l.length;u+=1){const c=st(i,l,u);r[u]?(r[u].p(c,o),S(r[u],1)):(r[u]=it(c),r[u].c(),S(r[u],1),r[u].m(t,null))}for(Pe(),u=l.length;u<r.length;u+=1)s(u);qe()}},i(i){if(!n){for(let o=0;o<l.length;o+=1)S(r[o]);n=!0}},o(i){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)L(r[o]);n=!1},d(i){i&&k(t),ft(r,i)}}}function it(e){let t,n,l,r,s,i,o,u,c;return s=new mt({props:{gridId:e[7]}}),{c(){t=h("li"),n=h("input"),l=v(),r=h("label"),B(s.$$.fragment),i=v(),d(n,"type","radio"),d(n,"name","level"),d(n,"id","level-"+e[7]),n.__value=e[7],n.value=n.__value,d(n,"class","svelte-ynwbqm"),e[4][0].push(n),d(r,"class","levelList__list__grid svelte-ynwbqm"),d(r,"for","level-"+e[7]),d(t,"class","svelte-ynwbqm")},m(a,f){$(a,t,f),g(t,n),n.checked=n.__value===e[1],g(t,l),g(t,r),N(s,r,null),g(t,i),o=!0,u||(c=C(n,"change",e[3]),u=!0)},p(a,f){f&2&&(n.checked=n.__value===a[1])},i(a){o||(S(s.$$.fragment,a),o=!0)},o(a){L(s.$$.fragment,a),o=!1},d(a){a&&k(t),e[4][0].splice(e[4][0].indexOf(n),1),P(s),u=!1,c()}}}function en(e){let t,n,l,r,s,i,o,u;const c=[xt,Zt],a=[];function f(m,w){return m[0].length!=0?0:1}return r=f(e),s=a[r]=c[r](e),{c(){t=h("button"),t.textContent="Add a new level",n=v(),l=h("div"),s.c(),d(t,"class","svelte-ynwbqm"),d(l,"class","levelList svelte-ynwbqm")},m(m,w){$(m,t,w),$(m,n,w),$(m,l,w),a[r].m(l,null),i=!0,o||(u=C(t,"click",e[2]),o=!0)},p(m,w){let b=r;r=f(m),r===b?a[r].p(m,w):(Pe(),L(a[b],1,1,()=>{a[b]=null}),qe(),s=a[r],s?s.p(m,w):(s=a[r]=c[r](m),s.c()),S(s,1),s.m(l,null))},i(m){i||(S(s),i=!0)},o(m){L(s),i=!1},d(m){m&&k(t),m&&k(n),m&&k(l),a[r].d(),o=!1,u()}}}function tn(e){let t,n;return t=new gt({props:{title:"Level Selector",shadow:"left",$$slots:{default:[en]},$$scope:{ctx:e}}}),{c(){B(t.$$.fragment)},m(l,r){N(t,l,r),n=!0},p(l,[r]){const s={};r&259&&(s.$$scope={dirty:r,ctx:l}),t.$set(s)},i(l){n||(S(t.$$.fragment,l),n=!0)},o(l){L(t.$$.fragment,l),n=!1},d(l){P(t,l)}}}function nn(e,t,n){let l,r;O(e,q,u=>n(0,l=u)),O(e,Se,u=>n(1,r=u));const s=u=>{q.addLevel()},i=[[]];function o(){r=this.__value,Se.set(r)}return[l,r,s,o,i]}class ln extends U{constructor(t){super(),K(this,t,nn,tn,J,{})}}function rn(e){let t,n,l,r,s,i,o,u,c;return r=new Jt({}),i=new Qt({}),u=new ln({}),{c(){t=h("header"),t.innerHTML="<h1>Vivian level Editor</h1>",n=v(),l=h("main"),B(r.$$.fragment),s=v(),B(i.$$.fragment),o=v(),B(u.$$.fragment),d(l,"class","svelte-1fszlhy")},m(a,f){$(a,t,f),$(a,n,f),$(a,l,f),N(r,l,null),g(l,s),N(i,l,null),g(l,o),N(u,l,null),c=!0},p:y,i(a){c||(S(r.$$.fragment,a),S(i.$$.fragment,a),S(u.$$.fragment,a),c=!0)},o(a){L(r.$$.fragment,a),L(i.$$.fragment,a),L(u.$$.fragment,a),c=!1},d(a){a&&k(t),a&&k(n),a&&k(l),P(r),P(i),P(u)}}}class sn extends U{constructor(t){super(),K(this,t,null,rn,J,{})}}new sn({target:document.getElementById("app")});
